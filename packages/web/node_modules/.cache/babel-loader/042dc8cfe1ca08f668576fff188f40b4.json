{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Nabin/workspace/probro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Nabin/workspace/probro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport EmailValidator from 'email-validator';\nimport { updateFormValue } from '../index';\nimport { ENDPOINT } from '../../config';\nexport default\n/*#__PURE__*/\n(function () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(dispatch, getState) {\n    var _getState, form, _form$registerForm, firstName, middleName, lastName, email, password, confirmPassword, strongRegex, res;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            dispatch(updateFormValue('registerForm', {\n              loading: true,\n              error: null,\n              success: null\n            }));\n            _getState = getState(), form = _getState.form;\n            _form$registerForm = form.registerForm, firstName = _form$registerForm.firstName, middleName = _form$registerForm.middleName, lastName = _form$registerForm.lastName, email = _form$registerForm.email, password = _form$registerForm.password, confirmPassword = _form$registerForm.confirmPassword;\n\n            if (!(firstName === '' || lastName === '' || email === '' || password === '' || confirmPassword === '')) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", dispatch(updateFormValue('registerForm', {\n              loading: false,\n              error: 'Please fill all the fields.'\n            })));\n\n          case 5:\n            if (!(EmailValidator.validate(email) === false)) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", dispatch(updateFormValue('registerForm', {\n              loading: false,\n              error: 'Email is incorrect. Please try again.'\n            })));\n\n          case 7:\n            if (!(password !== confirmPassword)) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", dispatch(updateFormValue('registerForm', {\n              loading: false,\n              error: \"Password didn't match\"\n            })));\n\n          case 9:\n            // password validation using following regex expression.\n            strongRegex = new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})');\n\n            if (strongRegex.test(password)) {\n              _context.next = 12;\n              break;\n            }\n\n            return _context.abrupt(\"return\", dispatch(updateFormValue('registerForm', {\n              loading: false,\n              error: 'Password must contain at least 8 characters, a lowercase, an uppercase, numbers and special characters.'\n            })));\n\n          case 12:\n            _context.prev = 12;\n            _context.next = 15;\n            return axios.post(\"\".concat(ENDPOINT, \"/auth/user-registration\"), {\n              firstName: firstName,\n              middleName: middleName,\n              lastName: lastName,\n              email: email,\n              password: password\n            });\n\n          case 15:\n            res = _context.sent;\n\n            if (res.status === 200) {\n              dispatch(updateFormValue('registerForm', {\n                firstName: '',\n                middleName: '',\n                lastName: '',\n                email: '',\n                password: '',\n                confirmPassword: '',\n                loading: false,\n                error: null,\n                success: true\n              }));\n            } else if (res.status === 201) {\n              dispatch(updateFormValue('registerForm', {\n                loading: false,\n                error: res.data\n              }));\n            }\n\n            _context.next = 22;\n            break;\n\n          case 19:\n            _context.prev = 19;\n            _context.t0 = _context[\"catch\"](12);\n            dispatch(updateFormValue('registerForm', {\n              loading: false,\n              error: _context.t0\n            }));\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[12, 19]]);\n  }));\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();","map":{"version":3,"sources":["/Users/Nabin/workspace/probro/packages/web/src/actions/helper-functions/registerFormHandler.js"],"names":["axios","EmailValidator","updateFormValue","ENDPOINT","dispatch","getState","loading","error","success","form","registerForm","firstName","middleName","lastName","email","password","confirmPassword","validate","strongRegex","RegExp","test","post","res","status","data"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport EmailValidator from 'email-validator';\nimport { updateFormValue } from '../index';\nimport { ENDPOINT } from '../../config';\n\nexport default async (dispatch, getState) => {\n  dispatch(updateFormValue('registerForm', { loading: true, error: null, success: null }));\n  const { form } = getState();\n  const {\n    firstName,\n    middleName,\n    lastName,\n    email,\n    password,\n    confirmPassword,\n  } = form.registerForm;\n  if (firstName === '' || lastName === '' || email === '' || password === '' || confirmPassword === '') {\n    return dispatch(updateFormValue('registerForm', { loading: false, error: 'Please fill all the fields.' }));\n  }\n  if (EmailValidator.validate(email) === false) {\n    return dispatch(updateFormValue('registerForm', { loading: false, error: 'Email is incorrect. Please try again.' }));\n  }\n  if (password !== confirmPassword) {\n    return dispatch(updateFormValue('registerForm', { loading: false, error: \"Password didn't match\" }));\n  }\n  // password validation using following regex expression.\n  const strongRegex = new RegExp('^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\\$%\\^&\\*])(?=.{8,})');\n  if (!strongRegex.test(password)) {\n    return dispatch(updateFormValue('registerForm', { loading: false, error: 'Password must contain at least 8 characters, a lowercase, an uppercase, numbers and special characters.' }));\n  }\n  try {\n    const res = await axios.post(`${ENDPOINT}/auth/user-registration`,\n      {\n        firstName,\n        middleName,\n        lastName,\n        email,\n        password,\n      });\n    if (res.status === 200) {\n      dispatch(updateFormValue('registerForm',\n        {\n          firstName: '',\n          middleName: '',\n          lastName: '',\n          email: '',\n          password: '',\n          confirmPassword: '',\n          loading: false,\n          error: null,\n          success: true,\n        }));\n    } else if (res.status === 201) {\n      dispatch(updateFormValue('registerForm', { loading: false, error: res.data }));\n    }\n  } catch (e) {\n    dispatch(updateFormValue('registerForm', { loading: false, error: e }));\n  }\n};\n"]},"metadata":{},"sourceType":"module"}