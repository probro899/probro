{"ast":null,"code":"import { connect } from './main';\nimport getRemoteUrl from './getRemoteUrl';\nimport store from '../store';\nvar client = connect(getRemoteUrl(), store);\nvar retryConnect = true;\nvar retryTimer = null;\nclient.on('connect', function () {\n  retryConnect = true;\n  store.dispatch({\n    type: 'CONNECT'\n  });\n});\n\nvar reconnect = function reconnect() {\n  if (retryTimer) {\n    return;\n  }\n\n  retryTimer = setTimeout(function () {\n    retryTimer = null;\n    client.reconnect();\n  }, 1000);\n};\n\nclient.on('disconnect', function () {\n  store.dispatch({\n    type: 'DISSCONNECT'\n  }); // Try to establish a connection after a timeout\n\n  if (retryConnect) {\n    reconnect();\n  }\n});\nclient.on('logout', function () {\n  retryConnect = false;\n});\nclient.on('error', function (err) {\n  console.error('socket Error', err);\n});\nexport { getRemoteUrl };\nexport default client;","map":{"version":3,"sources":["/home/bhagya/workspace/reactjs/projects/probro/packages/web/src/socket/index.js"],"names":["connect","getRemoteUrl","store","client","retryConnect","retryTimer","on","dispatch","type","reconnect","setTimeout","err","console","error"],"mappings":"AAAA,SAASA,OAAT,QAAwB,QAAxB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,IAAMC,MAAM,GAAGH,OAAO,CAACC,YAAY,EAAb,EAAiBC,KAAjB,CAAtB;AAEA,IAAIE,YAAY,GAAG,IAAnB;AACA,IAAIC,UAAU,GAAG,IAAjB;AAEAF,MAAM,CAACG,EAAP,CAAU,SAAV,EAAqB,YAAM;AACzBF,EAAAA,YAAY,GAAG,IAAf;AACAF,EAAAA,KAAK,CAACK,QAAN,CAAe;AACbC,IAAAA,IAAI,EAAE;AADO,GAAf;AAGD,CALD;;AAQA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,MAAIJ,UAAJ,EAAgB;AACd;AACD;;AAEDA,EAAAA,UAAU,GAAGK,UAAU,CAAC,YAAM;AAC5BL,IAAAA,UAAU,GAAG,IAAb;AACAF,IAAAA,MAAM,CAACM,SAAP;AACD,GAHsB,EAGpB,IAHoB,CAAvB;AAID,CATD;;AAWAN,MAAM,CAACG,EAAP,CAAU,YAAV,EAAwB,YAAM;AAC5BJ,EAAAA,KAAK,CAACK,QAAN,CAAe;AACbC,IAAAA,IAAI,EAAE;AADO,GAAf,EAD4B,CAI5B;;AAEA,MAAIJ,YAAJ,EAAkB;AAChBK,IAAAA,SAAS;AACV;AACF,CATD;AAWAN,MAAM,CAACG,EAAP,CAAU,QAAV,EAAoB,YAAM;AACxBF,EAAAA,YAAY,GAAG,KAAf;AACD,CAFD;AAIAD,MAAM,CAACG,EAAP,CAAU,OAAV,EAAmB,UAACK,GAAD,EAAS;AAC1BC,EAAAA,OAAO,CAACC,KAAR,CAAc,cAAd,EAA8BF,GAA9B;AACD,CAFD;AAIA,SAASV,YAAT;AACA,eAAeE,MAAf","sourcesContent":["import { connect } from './main';\nimport getRemoteUrl from './getRemoteUrl';\nimport store from '../store';\n\nconst client = connect(getRemoteUrl(), store);\n\nlet retryConnect = true;\nlet retryTimer = null;\n\nclient.on('connect', () => {\n  retryConnect = true;\n  store.dispatch({\n    type: 'CONNECT',\n  });\n});\n\n\nconst reconnect = () => {\n  if (retryTimer) {\n    return;\n  }\n\n  retryTimer = setTimeout(() => {\n    retryTimer = null;\n    client.reconnect();\n  }, 1000);\n};\n\nclient.on('disconnect', () => {\n  store.dispatch({\n    type: 'DISSCONNECT',\n  });\n  // Try to establish a connection after a timeout\n\n  if (retryConnect) {\n    reconnect();\n  }\n});\n\nclient.on('logout', () => {\n  retryConnect = false;\n});\n\nclient.on('error', (err) => {\n  console.error('socket Error', err);\n});\n\nexport { getRemoteUrl };\nexport default client;\n"]},"metadata":{},"sourceType":"module"}