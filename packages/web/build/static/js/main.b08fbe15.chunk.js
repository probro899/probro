(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/uploadicon512.d4c77ff2.png"},103:function(e,t,a){e.exports=a.p+"static/media/blog-img.4c2e5ee7.jpeg"},107:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.login=void 0;var n=c(a(141)),r=c(a(142));function c(e){return e&&e.__esModule?e:{default:e}}t.login=n.default,t.logout=r.default},123:function(e,t,a){e.exports=a(318)},132:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="schema.init";function r(e,t){return{type:n,schema:e,payload:t}}r.TYPE=n,t.default=r},133:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="schema.add";function r(e,t){return{schema:e,type:n,payload:t}}r.TYPE=n,t.default=r},134:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="schema.remove";function r(e,t){return{schema:e,type:n,payload:t}}r.TYPE=n,t.default=r},135:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="schema.update";function r(e,t){return{type:n,schema:e,payload:t}}r.TYPE=n,t.default=r},136:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.allIds.map(function(t){return e.byId[t]})}},137:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.allIds.map(function(a){return t(e.byId[a])})}},138:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.byId[t]}},141:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return{type:"LOGIN",payload:e}};n.TYPE="LOGIN",t.default=n},142:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return{type:"LOGOUT"}};n.TYPE="LOGOUT",t.default=n},172:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAU9AAAFPQFsmqclAAAKfUlEQVR4Ae2dW2wjVxnH52aP7bHXuTi2s5us7WT3odsVDRepEgh4QCsqCmLbp4qV2qLCPiBALbcHhHho+1AkEIjyUFWq2CItKqISElTVcnkoLELqQ9EKLbQiiT1OsolvcWLHY8/YPjPoc+xlN7tJfBv7m5nze221/n85//nOmXPOfB9rGAZDcS4cHXtnQw3gcKgBHA41gMOhBnA41AAOhxrA4VADOBxqAIdDDeBwqAEcDjWAw6EGcDjUAA6HGsDhUAM4HGoAh0MN4HCoARwONYDDEZwU/vr6xudVVV1yi+4zjXo9fud/c7ndcl2rr3g8nhvz83NvjU/laLH1rWA5nb5s6PolQsicqqqntFpN1HWdqVar9/3/fT4fw3EcI3q9msfjucXz/AbLcVfjsdirIxc/ImxngNXV5Id4nv9xs9n86F65NFXZ22Ng0PsBzOAPBJjAiWBREIT3CCHfWVxc+Ne4YxwmtjEADDzHsa8qirJULpXERr0+1H/f5XYzJ4JBTZKkG7puXLaLESxvgEw2N1GrKldUVXukkMuK/T7t3QJZIRSOaB6PeM3rk56ORsK7pv6gyVjaAMvLK58TBOH1bGYrpKnqSH9b9HiYSHS2wDDGNxKJxBsj/fEhYlkDJJOp1zRNu5TLbInj1BGOzmqiKF5dWEg8M04d/WJJA6RSqb/u7ux8qlwqIVDDwNqAmZic/Fsikfg0Ajk9YTkDrKys/qeQzz0w6pR/HDAlhGbC7585s3gOlbBjsNROINbBB0ATaAONCOR0jWUMAGkf6+B36JgAtOJQdDyWMAAs+GDOxzz4HUAjaAXNOBQdDXoDwKserPaxLPi6AbSCZtCOXSvqReD+Jk91eU1OhRDI6ZnT8UTB6/OdxbxZhDoDwA4fbPIgkNIXoB1iwKwRrQFgbx+2d60w7x8GaIcYIBacChEbAA52YG8fgZSBgBggFqz6UBoAnhg41TP7YGcUQAwQC9YsgNIAHMe+vLO9bfmnvwPEAjHhUHM36AwAK39Nq3/YDk9/B4gFYoLYcCj6P+gMoNaq39zdKQYQSBkqEBPEhk0XOgMQoj9m5ZX/YUBMEBs2XegM0Gg0FhHIMAWMsaEyQCqVekLZK9su/XeA2CBGHGr2wZYBnjjsyrYdaMdGDXAEUTut/g/Sji2KSRMqA9QbjTkEMkwFW4yoDGAQ0kQgw1SwxYjKAI0miSGQYSrYYkRjAIy7ZGaBKVZMGWBJrSoIZJhLO8YlLHpofQCHg8kAu4LLhUCGubRjRHNFDI0BopHwDcHlRqDEXCBGiBWLHlRTAMex1rn62yfYYkRlAMHlqiCQYSrYYsS1CDSYAgIV5oIsRlQGcLtd9rsIcABsMaIygG4Y78BXtnYFYoMYMYWHygCS5H/F6/UiUGIOEBvEiEkTKgNEI2FZ8vuTCKSYAsQGMWLShG4nUBBcq1CIyW5ATBAbtrDw/aVZ5gWozWc3WjGxzAvYwkJngHgsdn1ichLdkzIok9PT6xAbNl0oc61uGG9C2Va7ALEQQn6NMRy09QFWV5OZjbV0BIGUgZk7HcsuLi6gugvYAe9qi2Wu2CELtGJgGbQ1AlBXCJFleSudSqF8crollkhk4vH4LFZ9qN+3DMN4bnpmRkMgpS9AO8SAWSNqA0ANXkmS3rXi9jBoBu3Y6whbolIoTAXr6bRlPhqBTZ/5WAx16u9giS03QvTPzp2OWeayCGgFzQikHIslDADNGZrN5pegMjcCOUcCGkGrVRpKWGbT/ezZM2/rhv4UZhOANtAIWhHI6QpLnbo8eO7cb+APHJk9uYfpwAi0gCbQBhoRSOoaS/YLkNPpTxq68YetzVvBYfcG6hXoJTR78lSJ5dgvYNzrPw7Ldgxpl5H9R7GQf6BSGc89S7/fz0yFZt73+nwft2rvIMs3jUql5F8Q0nwql836R5UN4KkPRyIVnhdeTyTiXx/Jj5qELdrGtTuHXYOCjFCTz6z9ApjrJ6enW63jvD7pEat3DGPs1jiy0zuQEPJgIZ/3D6va2H47mJkKz/P/tlPPQMaurWMhI1QV5Sccz12oVWvhSrkk9lp7CE7x/CeCmtfnzelE/7NPkr5thyf+ILbuHcy0zaAoypcZw4CduUiTNGegSsfBQg0ugU+zPC8IvJCHSu8My/5RkqRf2nHQ78T2BqAcDa0P4HCoARyOYNfw23V4lnaL20suUYwKghDVCZkghBxZn8fldrc+3Kgpyg3R48l4fdIHmL7nHzaWXwPAtjAh5FHGaNXdaS3yms2moBM90qk5RKBcew+vhPC+72lfQoGKHi63W3O53QVD1yuiKO6yLCs36o2/BILBN2n38BHSWdFzLHOxXm8EDcNYqFWVgKZpPQ3woHQM4vFJjFt034I3B5Zl/8nx3BWrnQegN8B+i3j+sm4wH6lVlXBNUXp+px8FsD0MH3/6JKngdot53dB/L0n+l7BnCJQGgIraHMd/S1VriaqihCp7e4zVagjD7mFwYhL9RhIaA7S3cZ+vNxofq1Yqp6w46IfRMYPL5UoKAv9GPB5/Hou2sRtATqcvG7r+PUVR5sqlkjju832zgSPk4ORUkee5616f9Oy4PxcfmwFWk8mXGIN5ulzajVipL/CwgDXDiWCwdbLIctx3x7V4HKkB9juCqT/Tif5oIZcN2bk5RLd0jpj9gUAOMuGovyMYmQE6T3yxkI/Qgb+X20bwBz4ghDw5qiNn0w2w3yOHfZk+8d1xx6WTd70+6YtmvzmYZgBY1fM8/6ud4vZDTpzjB2VU185MMQDc09M07cl8NhOwcw+gUbB/8TS0quvG42ZMC0M1QKtBMsu+Vczn5mm6Hx4wLYTCEU0UxasLC4lnhvlvD80AsMhr1Btfo0+9ecA1tXB0NtlsNh8bVjYY2ACdG7m7OzsP07nefCAbzJ6aK7Ic9+LiQuKng/7gQAZoHcU2yW/zuWzEjv1+MQPFJyRJupZIJC4OIrNvAyz/d/krLMf9aOvWxhRN+eMBpoRQODLQl0l9GQDm+7pWfzaX2RJR/mUcBBw0RaLRVUVRPnP+/Pl0r5H3bABZTv9pp7h9gc73eIB1ARSl6OcD1Z4MsLa2/vftQv4TdPDx0a8JujYAPPn5bOYCfb/HTfTkyYLo8TzerQm6MgAMfmZr8wJd6VuDXkxw7HcBkPZhzqeDbx0ym5shhmHehtf040QfaYCVlZWf0znfmqzLsh+qqNy8efPIZtWHGkCW5R9WFeWrdPCtCezNbKylg/5A4PpRzarvawBIHbWa+v2dYtG+HZwcAJggs7k5D1v1h0V7jwHALZA66CaPPYC1W7FQeFiW5fteNbvHAJqqvgfVt5z+h7MTUESrUqlc3L+ddTd3GSCZTL2Wy2wt2P1qthPZzudFhmFfObgeuG0AmPc1TbtEN3rsC2R2tVa7q3HlbQMQol8t5LJ03rcxkNm387mHlpdXftCJsmUAWCDANS56rGt/YD3AsuxznamAg3t8tZp6kaZ+55DLZqY6r4acIAi/o6nfWcBUAEU1W19hl8vlBZr6ncf+WwHzIi0S5WAqFWWRGsDhUAM4HGoAh0MN4HAEn8+XdUWj9LqPA3G5Rc//APahc62IWCuAAAAAAElFTkSuQmCC"},173:function(e,t,a){e.exports=a.p+"static/media/logo.938bb86b.png"},174:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAI6AAACOgH+NilRAAACI0lEQVR4nO2bQU7CQBSGH4bIFDuRG8jKNTeQlWtvIEfwBnIEvAFewxW9AW5d4Q0wRTorMJNMTDMOtS3TeQ/6voQQWob876PlDUzp7Pd7wEDGcgIAUwBY6ft0ky4wcgQXIGM5NoXfWbsSAHhKN+kyZJ5gAgoKt3k1R8QqRK7GBchYDk3hjxWHBhHRmIAjCs/zBQAzfUs36dp/ygYEyFgO9LlsbteeXrYxEd4ENFS4zac5Lea+XtCLgFxLu/GS6n+8iThKgIzlgzk0QxVu825aZ+05RC0BFVpaKJK6k6lKAmQsR+Ydp1K4jRYxqdI6Swnw1NJCUnoOUSjAfLLPTqhwmxcj4mDrdAoI1NJCUTiHcAro96/eAOD2xAu3+dhuv+/tjV3XM3e73SVia2sK5+fBxVmUdgQsgEAGVFovAO03QSq0/ghovQDnPMBGiEh/F5g4ds2Vypz9teYY/S1zbG9XKpsWZKs8Jk8pAQCgi3l2bF8cmmDUHDM+MKaomDpjfmn9KcACCGRAhQUQyIAKCyCQARUWQCADKiyAQAZUWACBDKiwAAIZUGEBBDKgwgIIZECFBRDIgAoLIJABldYLKLU4KkSkrxkaOXYtlcq8XbtrVpOG9nalssb+TMGrwwQyoOJcGxQiWhC+GrQuiVLZn0XU1h8BLIBABlRYAIEMqHSFiPQEZ2CFsB+fAwNzOU2edafXE+fY8sqStP4UYAEEMqDSbgEA8APWFsDV0MiozQAAAABJRU5ErkJggg=="},175:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAALCAAACwgHbktmQAAACQElEQVR4nO2bu04CQRSGD8ZCagqxxEt8AREq5AWIhWEBjdFWE02gFkVMNFoQExNtQaNBfQmkEcEHwAZKsVhbCM2YtSABNrszsMscmPmSKSY5w/zzZ65ng4MQAkY4HI4qALQMg+zjghDybGcH0xQxyzYP0og5uzuYsrsD7AhvAM0S6LC3fwA+v980rlarQTqV7NRDoXXYCCum7X5VFRLxQxZJQ8NkgMvlgp3tTdO43MNTV33G6aRqV/qoWD0+U4RfAtIABBq4wrQHFN8KoESqpnGtZrOr/lkpgxKJoTSA5iZoHGAvcULItZ09CL8EpAEINHBFeANA2wSNihYyISWvN06mYzAW24KFxSXTOFVV4e72plMPBIIQWAuatmu323B1ec4iiQX9nAbLDDhKpggN2fvHrlkTVqJU7d5LZTtnW1ZvfMLvAUxLgDdhJQqJRIJKRSaTgdeX/GQZoOH3eS39PeHfAmwGFAsDdVKv1/4LRsZqCWgzqzfbZBRLhUAXIXkM6iENQKCBKyK9BfSRbwHBkQYg0MAV4d8C2L8LdOHxzMOKd5UqVjO95/2RI4Ts9gWO01WY9jTR0GLlKUCBNACBBq6MVT7gp9GA5PEpdSwNlp8CNPd+7TgdNLs0BLqngOUzYNbthrP0iWEMzV1iVAi/B0gDEGjgijQAgQauSAMQaOCKNACBBq5IAxBo4Io0AIEGrkgDEGjgivAG9GWEhv0OQJO718nZ8yJuuQFjRlz4JSANQKCBK3pZ4S+Of5cfLQDff0KbAPdutvZ1AAAAAElFTkSuQmCC"},176:function(e,t,a){e.exports=a.p+"static/media/default-cover.85eb53f0.png"},231:function(e,t,a){e.exports=a.p+"static/media/ringtone.da570d5f.mp3"},260:function(e,t,a){e.exports=a.p+"static/media/index.b4cb6006.png"},261:function(e,t,a){e.exports=a.p+"static/media/class.9d40f54e.png"},262:function(e,t,a){e.exports=a.p+"static/media/insight.f068a8c1.png"},267:function(e,t){},268:function(e,t){},269:function(e,t){},315:function(e,t,a){},318:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"updateNav",function(){return W}),a.d(n,"updateWebRtc",function(){return z}),a.d(n,"addDatabaseSchema",function(){return Y}),a.d(n,"updateDatabaseSchema",function(){return G}),a.d(n,"deleteDatabaseSchema",function(){return q});var r=a(1),c=a.n(r),s=a(22),o=a.n(s),i=a(4),l=a(5),u=a(7),d=a(6),m=a(8),p=a(17),f=a(40),b=a(121),h=a(28),v=a(19),g=a(9),y=a(44),E=a.n(y);var C=a(122),O=a.n(C),j=a(107),w=function(e,t){document.cookie="".concat(e.trim(),"=").concat(t)},I=function(e){document.cookie="".concat(e.trim(),"= ;expires=").concat(new Date(Date.now()-1).toUTCString())},k={sessionId:function(e){var t="".concat(e.trim(),"="),a=document.cookie.split(";").find(function(e){return 0===e.trim().indexOf(t)});return a?a.trim().substr(t.length):null}("pc-session"),slug:O()().substring(1,10),online:!1,user:null},N={sideNav:{name:""},mainNav:{name:""}},x={localCallHistory:{},showCommunication:null,showIncommingCall:!1,showOutgoingCall:!1,isConnecting:!1,communicationContainer:"list",peerType:"",connectionId:null,outGoingCallType:null,messages:[],peerConnections:{},pendingOffers:[],streams:{},currentOffer:null,iceCandidates:{},liveIncomingCall:!1,isLive:!1,mediaRecording:null,recordedBlobs:[],lastStreamId:null,chatHistoryType:null},S=Object(f.c)({account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VERIFIED":return Object(g.a)({},e,{sessionId:t.payload,user:null});case j.login.TYPE:return Object(g.a)({},e,{user:t.payload});case j.logout.TYPE:return I("pc-session"),Object(g.a)({},e,{user:null,online:!1,sessionId:null});case"CONNECT":return Object(g.a)({},e,{online:!0});case"DISCONNECT":return Object(g.a)({},e,{online:!1});default:return e}},webRtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateWebRtc":return Object(g.a)({},e,Object(v.a)({},t.schema,t.payload));default:return e}},navigate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateNav":return Object(g.a)({},e,Object(v.a)({},t.payload.schema,Object(g.a)({},e[t.payload.schema],t.payload.data)));default:return e}},database:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t.reduce(function(e,t){return e[t]={byId:{},allIds:[]},e},{});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,t=arguments.length>1?arguments[1]:void 0,a=t.schema;if(!a||!e[a])return e;switch(t.type){case E.a.init.TYPE:return Object(g.a)({},e,Object(v.a)({},a,t.payload.reduce(function(e,t){return e.byId[t.id]=t,e.allIds.push(t.id),e},{byId:{},allIds:[]})));case E.a.add.TYPE:return Array.isArray(t.payload)?Object(g.a)({},e,Object(v.a)({},a,{allIds:[].concat(Object(h.a)(e[a].allIds),Object(h.a)(t.payload.map(function(e){return e.id}))),byId:Object(g.a)({},e[a].byId,t.payload.reduce(function(e,t){return e[t.id]=t,e},{}))})):Object(g.a)({},e,Object(v.a)({},a,{byId:Object(g.a)({},e[a].byId,Object(v.a)({},t.payload.id,t.payload)),allIds:e[a].allIds.concat(t.payload.id)}));case E.a.remove.TYPE:var r=Object.assign({},e[a].byId);return delete r[t.payload.id],Object(g.a)({},e,Object(v.a)({},a,{allIds:e[a].allIds.filter(function(e){return e!==t.payload.id}),byId:r}));case E.a.update.TYPE:return Object(g.a)({},e,Object(v.a)({},a,{byId:Object(g.a)({},e[a].byId,Object(v.a)({},t.payload.id,Object(g.a)({},e[a].byId[t.payload.id],t.payload))),allIds:e[a].allIds}));default:return e}}}("User","UserDetail","Board","BoardColumn","BoardColumnCard","BoardColumnCardAttachment","BoardColumnCardComment","BoardColumnCardDescription","BoardColumnCardTag","Blog","BlogDetail","BlogComment","BlogLike","Notification","BoardMember","UserEducation","UserWorkExperience","UserSkill","UserPortal","BoardMessage","UserConnection","UserMessage","UserCarrierInterest","BoardMessageSeenStatus","UserMessageSeenStatus","NotificationReadStatus")}),A=[b.a],D=Object(f.e)(S,{},f.a.apply(void 0,A)),B=a(343),R=a(345),H=a(344),P=a(2),M=a.n(P),T=a(3),U=a(20),L=a.n(U),W=function(e){return function(){var t=Object(T.a)(M.a.mark(function t(a,n){return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"updateNav",payload:e});case 1:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},z=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"updateWebRtc",payload:t,schema:e});case 1:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},Y=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n(E.a.add(e,t));case 1:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},G=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n(E.a.update(e,t));case 1:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},q=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n(E.a.remove(e,t));case 1:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},F=a(342),Q=a(332),V=a(320),K=a(255),J=a(52),Z=a(23),X=a(75),_=function(e,t){return e},$=function(){},ee=function(e,t){var a=WebSocket,n=Object(X.createParser)(),r=0,c=0,s={},o={},i={},l={},u=[],d=function(e,t){var a=l[e];a&&a.forEach(function(e){return e.call(b,t)})},m=function(e){return u.push(e),function(){var t=u.indexOf(e);t>=0&&u.splice(t,1)}},p=function(e){if(null===e)return null;var t=new a(e);return t.onopen=function(){u.forEach(function(e){return t.send(e)}),u.length=0,d("connect")},t.onmessage=function(e){n.parse(e.data)},t.onclose=function(){u.length=0,Object.values(s).concat(Object.values(o)),s={},o={},i={},d("disconnect")},t.onerror=function(e){var t=Object.values(s).concat(Object.values(o));s={},o={},u.length=0,t.forEach(function(t){(0,_(t)[1])(e.message)}),d("error",e.message)},t};n.onEvent=d,n.onAction=function(e){t.dispatch(e)},n.onRpcResponse=function(e,t,a){var n=_(s[e]),r=n[0],c=n[1];delete s[e],t?r(a):c(a)},n.onScopeResponse=function(e,t,a){var n=_(o[e]),r=n[0],c=n[1],s=n[2],l=n[3];if(delete o[e],t){var u=(a||l.api).reduce(function(e,t){return e[t]=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];for(var r=[a].length,c=Array(r),o=0;o<r;o+=1)c[o]=a[o];return b.rpc.apply(b,[s,t].concat(c))},e},{});i[s]=u,r(u)}else c(a)};var f=p(e),b={isConnected:function(){return f&&f.readyState===a.OPEN},reconnect:function(){var e=arguments.length>0&&void 0!==(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:null;if(null===e&&null===f)return!1;var t=e||f.url;return(null===f||f.url!==t||f.readyState!==a.OPEN)&&(null!==f&&f.close(),f=p(t),!0)},close:function(){f.close(),f=null},on:function(e,t){var a=l[e];return a?a.push(t):l[e]=[t],function(){l[e]=l[e].filter(function(e){return e===t})}},call:function(e,t){for(var a=arguments.length<=2?0:arguments.length-2,n=Array(a>2?a-2:0),r=2;r<a;r+=1)n[r-2]=r+2<2||arguments.length<=r+2?void 0:arguments[r+2];var c=Object(X.PKT_CALL)(e,t,n);return b.isConnected()?(f.send(c),$):m(c)},rpc:function(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),c=2;c<a;c++)n[c-2]=arguments[c];for(var o=n.length,i=Array(o>2?o-2:0),l=2;l<o;l+=1)i[l-2]=n[l];return new Promise(function(a,c){s[r+=1]=[a,c];var o=Object(X.PKT_RPC_REQUEST)(r,e,t,n);if(!b.isConnected())return m(o);f.send(o)})},scope:function(e){var t=(arguments.length<=1?0:arguments.length-1)>1&&void 0!==(arguments.length<=2?void 0:arguments[2])?arguments.length<=2?void 0:arguments[2]:null;return new Promise(function(a,n){if(i[e])return a(i[e]);o[c+=1]=[a,n,e,t];var r=Object(X.PKT_SCOPE_REQUEST)(c,e,!t);return b.isConnected()?(f.send(r),$):m(r)})}};return b},te="https://properclass.com",ae=function(){var e=D.getState().account.sessionId;return e?"".concat("wss","://").concat("properclass.com",":").concat(443,"/shocked/web/").concat(e):null},ne=ee(ae(),D),re=!0,ce=null;ne.on("connect",function(){re=!0,D.dispatch({type:"CONNECT"})});ne.on("disconnect",function(){console.log("disconnetct called"),D.dispatch({type:"DISSCONNECT"}),re&&(ce||(ce=setTimeout(function(){ce=null,console.log("reconnect try"),ne.reconnect()},1e3)))}),ne.on("logout",function(){re=!1,D.dispatch({type:"updateWebRtc",payload:null,schema:"showCommunication"}),D.dispatch({type:"updateWebRtc",payload:null,schema:"showIncommingCall"})}),ne.on("error",function(e){console.error("socket Error",e)});var se=ne,oe=a(333),ie=a(32),le=a.n(ie),ue=a(330),de=a(58),me=a(162),pe=a(33),fe=a(87),be=a(324),he=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={hidden:!1},a.componentWillMount=function(){var e=a.props.data;a.setState({hidden:e.hidden})},a.handleLockClick=function(){var e=a.state.hidden;a.setState({hidden:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.hidden,t=this.props,a=t.data,n=t.onChange,r=t.value,s={};return a.icon&&(s=function(e,t,a){return"left"===e.side?{leftIcon:c.a.createElement(Z.a,{onClick:t,icon:e.name,iconSize:Z.a.SIZE_LARGE}),rightIcon:null}:"right"===e.side?{leftIcon:null,rightIcon:c.a.createElement(me.a,{content:!0===a?c.a.createElement("span",{style:{color:"#1d4354"}},"Show"):c.a.createElement("span",{style:{color:"#1d4354"}},"Hide"),position:pe.a.RIGHT},c.a.createElement(Z.a,{style:{marginTop:3,marginRight:5,color:"#757575"},icon:e.name,onClick:t,iconSize:"20"}))}:{leftIcon:null,rightIcon:null}}(a.icon,this.handleLockClick,e)),c.a.createElement(fe.c,null,c.a.createElement("span",{className:"label-text"},a.name),a.required&&c.a.createElement("span",{style:{color:"red"}}," *"),c.a.createElement(be.a,Object.assign({onChange:function(e){return n(a.id,e.target.value)},value:r,type:e?"password":"text",leftIcon:s.leftIcon,rightElement:s.rightIcon},a)))}}]),t}(c.a.Component);he.defaultProps={value:""};var ve=he,ge=a(194),ye=function(e){var t=e.onSubmit,a=e.data,n=e.state;return c.a.createElement("div",{className:"btn-group"},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",alignItems:"center"}},n.loading&&c.a.createElement(ge.a,{intent:J.a.PRIMARY,size:40}),n.error&&c.a.createElement(fe.c,{style:{fontSize:16,color:"red"}},n.error),n.message&&c.a.createElement(fe.c,{style:{fontSize:16,color:"green"}},n.message)),c.a.createElement(de.b,Object.assign({fill:!0,large:!0,onClick:t,disabled:n.loading},a)))},Ee=a(329),Ce=a(325),Oe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onChange,n=e.value;return c.a.createElement(fe.c,null,c.a.createElement("span",{className:"label-text"},t.name),t.required&&c.a.createElement("span",{style:{color:"red"}}," *"),c.a.createElement(Ce.a,Object.assign({onAdd:function(e){return a(t.id,e)},onChange:function(e){return a(t.id,e)}},t,{className:"tag-input",values:n})))}}]),t}(c.a.Component),je=a(326),we=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onChange,n=e.value;return c.a.createElement(fe.c,null,c.a.createElement("span",{className:"label-text"},t.name),t.required&&c.a.createElement("span",{style:{color:"red"}}," *"),c.a.createElement(je.a,Object.assign({onChange:function(e){return a(t.id,e.target.value)},value:n,options:t.options},t)))}}]),t}(c.a.Component);we.defaultProps={value:""};var Ie=we,ke=a(340),Ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onChange,n=e.value;return c.a.createElement(fe.c,null,c.a.createElement("span",{className:"label-text"},t.name),t.required&&c.a.createElement("span",{style:{color:"red"}}," *"),c.a.createElement(ke.a,Object.assign({className:"pc-date-picker",formatDate:function(e){return e.toLocaleDateString()},parseDate:function(e){return new Date(e)},placeholder:"MM/DD/YYYY",onChange:function(e){return a(t.id,e)},value:n,closeOnSelection:!0,popoverProps:{usePortal:!1},rightElement:c.a.createElement(Z.a,{icon:"calendar",intent:"primary"})},t)))}}]),t}(c.a.Component);Ne.defaultProps={value:new Date};var xe=Ne,Se=a(327),Ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onChange,n=e.value;return c.a.createElement(fe.c,null,c.a.createElement("span",{className:"label-text"},t.name),t.required&&c.a.createElement("span",{style:{color:"red"}}," *"),c.a.createElement(Se.a,Object.assign({growVertically:!0,large:!0,onChange:function(e){return a(t.id,e.target.value)},value:n,options:t.options,fill:!0,style:{resize:"none"}},t)))}}]),t}(c.a.Component);Ae.defaultProps={value:""};var De=Ae,Be=a(328),Re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={fileInputText:"Choose a file..."},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.onChange,n=e.value,r=this.state.fileInputText;return c.a.createElement(fe.c,null,c.a.createElement("span",{className:"label-text"},t.name),t.required&&c.a.createElement("span",{style:{color:"red"}}," *"),c.a.createElement("br",null),c.a.createElement(Be.a,Object.assign({onInputChange:function(e){return a(t.id,e.target.files[0])},value:n,text:n.name||r},t)))}}]),t}(c.a.Component);Re.defaultProps={value:{}};var He=Re,Pe=function(e){var t=e.data;if(!t.fieldtype)return null;switch(t.fieldtype){case"input":return c.a.createElement(ve,e);case"button":return c.a.createElement(ye,e);case"tagInput":return c.a.createElement(Oe,e);case"select":return c.a.createElement(Ie,e);case"date":return c.a.createElement(xe,e);case"textarea":return c.a.createElement(De,e);case"image":return c.a.createElement(He,e);default:return null}},Me=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:!1,message:null,fields:{},data:[]},a.componentWillMount=function(){var e=a.props.data,t=e.filter(function(e){if("input"===e.fieldtype||"select"===e.fieldtype||"tagInput"===e.fieldtype||"image"===e.fieldtype||"textarea"===e.fieldtype||"date"===e.fieldtype)return e}).map(function(e){return"tagInput"===e.fieldtype?Object(v.a)({},e.id,e.val?e.val:[]):"date"===e.fieldtype?Object(v.a)({},e.id,e.val?e.val:new Date):"image"===e.fieldtype?Object(v.a)({},e.id,e.val?e.val:{}):Object(v.a)({},e.id,e.val?e.val:"")}).reduce(function(e,t){return e[Object.keys(t)[0]]=Object.values(t)[0],e},{});a.setState({fields:t,data:e})},a.onChange=function(e,t){var n=a.state.fields;a.setState({fields:Object(g.a)({},n,Object(v.a)({},e,t))})},a.onSubmit=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.props.callback,r=a.state,c=r.fields,s=r.data,o=!1,s.map(function(e){return e.required&&0===c[e.id].replace(/\s/g,"").length&&(o=!0,a.setState({error:"Fill the required field(*)"})),e}),!o){e.next=7;break}return e.abrupt("return");case 7:return a.setState({loading:!0}),e.next=10,n(c);case 10:200===(i=e.sent).response?a.setState({loading:!1,error:null,message:i.message}):a.setState({loading:!1,error:i.error});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.fields;return c.a.createElement("form",{onSubmit:this.onSubmit},c.a.createElement(Ee.a,null,a.map(function(t,a){return c.a.createElement(Pe,{key:a,data:t,onChange:e.onChange,onSubmit:e.onSubmit,value:n[t.id],state:e.state})})))}}]),t}(c.a.Component),Te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.action,a=e.isOpen,n=e.name;return c.a.createElement(ue.a,{isOpen:a,onClose:function(){return t("cancle")}},c.a.createElement("div",{className:"delete-popover"},c.a.createElement("div",{className:"top"},"Are you sure you want to delete"," ",c.a.createElement("span",{style:{color:"red"}},n),"?"),c.a.createElement("div",{className:"popover-button"},c.a.createElement(de.b,{text:"Delete",intent:"danger",onClick:function(){return t("confirm")}}),c.a.createElement(de.b,{text:"Cancle",onClick:function(){return t("cancle")}}))))}}]),t}(c.a.Component),Ue=a(90),Le=a.n(Ue),We=a(63),ze=function(e,t,a){var n,r=a.account,c=e.slice().reverse(),s=c.findIndex(function(e){return e.seenStatus.find(function(e){return e.userId===r.user.id})});if(-1===s)n=c.length;else{for(var o=0,i=0;i<s;i+=1)c[i]["user"===t?"fuserId":"userId"]!==r.user.id&&(o+=1);n=o}var l=c.find(function(e){return e["user"===t?"fuserId":"userId"]!==r.user.id});return{lastMessageId:l?l.id:c[0].id,unSeenNo:n}},Ye=function(e,t,a){var n=[];return n="user"===a?t:Le.a.uniq(t.map(function(e){return[e.tuserId,e.fuserId]}).reduce(function(e,t){return Array.isArray(t)?t.forEach(function(t){return e.push(t)}):e.push(t),e},[])),e.slice().reverse().map(function(e){var t=[];return n.length>0&&e.seenStatus.forEach(function(e){n.find(function(t){return t===e.userId})&&(n=n.filter(function(t){return t!==e.userId}),t.push(e))}),Object(g.a)({},e,{seenStatus:t})})},Ge=function(e,t,a){var n=a.database,r=[];return"board"===t&&Object.values(n.BoardMessageSeenStatus.byId).forEach(function(t){t.bmId===e&&r.push(t)}),"user"===t&&Object.values(n.UserMessageSeenStatus.byId).forEach(function(t){t.umId===e&&r.push(t)}),r},qe=function(e){var t=e.database,a=e.webRtc,n=[],r=[],c=[],s=null,o=null,i=null;return a.chatHistory&&("user"===a.chatHistory.type?(n=Object.values(t.UserMessage.byId).filter(function(e){return e.connectionId===a.chatHistory.connectionId})).length>0&&(i=new Date(n[0].timeStamp),n.forEach(function(t,a){Object(We.a)(i,new Date(t.timeStamp))&&0!==a||(r.push(Object(g.a)({},t,{showImage:!1,type:"date",seenStatus:Ge(t.id,"user",e)})),i=t.timeStamp),t.tuserId===o?r.push(Object(g.a)({},t,{showImage:!1,seenStatus:Ge(t.id,"user",e)})):(o=t.tuserId,r.push(Object(g.a)({},t,{showImage:!0,seenStatus:Ge(t.id,"user",e)})))}),c=Ye(r,[a.chatHistory.user.user.id],"user"),s=ze(r,"user",e)):(n=Object.values(t.BoardMessage.byId).filter(function(e){return e.boardId===a.chatHistory.connectionId})).length>0&&(n.forEach(function(t,a){Object(We.a)(i,new Date(t.timeStamp))&&0!==a||(r.push(Object(g.a)({},t,{showImage:!1,type:"date",seenStatus:Ge(t.id,"user",e)})),i=t.timeStamp),t.userId===o?r.push(Object(g.a)({},t,{showImage:!1,seenStatus:Ge(t.id,"board",e)})):(o=t.userId,r.push(Object(g.a)({},t,{showImage:!0,seenStatus:Ge(t.id,"board",e)})))}),c=Ye(r,Object.values(t.BoardMember.byId).filter(function(e){return e.boardId===a.chatHistory.connectionId})),s=ze(r,"board",e))),Object(g.a)({messages:c},s)},Fe=function(e,t){var a=t.webRtc,n=t.account,r=t.database;if("user"===a.chatHistory.type){if(e.fuserId===n.user.id)return{isOwn:!0,user:n.user};var c=Object.values(r.User.byId).find(function(t){return t.id===e.fuserId}),s=Object.values(r.UserDetail.byId).find(function(t){return t.userId===e.fuserId});return{isOwn:!1,user:Object(g.a)({},c,{userDetails:s})}}if(e.userId===n.user.id)return{isOwn:!0,user:n.user};var o=Object.values(r.User.byId).find(function(t){return t.id===e.userId}),i=Object.values(r.UserDetail.byId).find(function(t){return t.userId===e.userId});return{isOwn:!1,user:Object(g.a)({},o,{userDetails:i})}},Qe=a(45),Ve=a.n(Qe),Ke=function(e){var t=Math.floor(parseInt(e,10)/6e4),a=Math.floor((parseInt(e,10)-60*t*1e3)/1e3);return"(".concat(t," : ").concat(a,")  ")},Je=function(e,t,a,n,r){return c.a.createElement("div",{style:{width:"95%",display:"flex",justifyContent:r?"flex-start":"center",alignItems:"center",margin:r?0:10}},c.a.createElement("span",{style:{padding:5,border:r?null:"1px solid ".concat(a),borderRadius:10,fontSize:r?14:10,background:r?null:a,color:r?"#757575":"white"}},c.a.createElement(Z.a,{icon:t,iconSize:r?13:10,style:{marginRight:5}}),"".concat(e," ").concat(n.duration?Ke(n.duration):""),r?null:c.a.createElement(Ve.a,{format:"h:mm:a",style:{marginLeft:10}},n.timeStamp)))},Ze=function(e,t,a,n){if("board"===a){if(e.userId===t.user.id&&!e.duration||e.type&&n&&!e.duration)return Je("Missed Call","arrow-bottom-left","#f17d77",e,n);if(e.userId===t.user.id&&e.duration||e.type&&n&&!e.duration)return Je("Incoming Call","arrow-bottom-left","#A6A9A9",e,n)}return e.fuserId!==t.user.id||e.duration?e.tuserId!==t.user.id||e.duration?e.fuserId===t.user.id?Je("Incoming Call","arrow-bottom-left","#A6A9A9",e,n):e.tuserId===t.user.id?Je("Outgoing Call","arrow-top-right","#A6A9A9",e,n):void 0:Je("Outgoing Call","arrow-top-right","#A6A9A9",e,n):Je("Missed Call","arrow-bottom-left","#f17d77",e,n)},Xe=function(e,t,a,n,r){return c.a.createElement("div",{style:{width:"95%",display:"flex",justifyContent:r?"flex-start":"center",alignItems:"center",margin:r?0:10}},c.a.createElement("span",{style:{padding:5,border:r?null:"1px solid ".concat(a),borderRadius:10,fontSize:r?14:10,background:r?null:a,color:r?"#757575":"white"}},c.a.createElement(Z.a,{icon:t,iconSize:r?13:10,style:{marginRight:5}}),"".concat(e," ").concat(n.duration?Ke(n.duration):""),r?null:c.a.createElement(Ve.a,{format:"h:mm:a",style:{marginLeft:10}},n.timeStamp)))},_e=function(e,t,a,n){return"board"===a&&e.userId===t.user.id?Xe("Outgoing Call","arrow-top-right","#A6A9A9",e,n):e.tuserId!==t.user.id||e.duration?e.tuserId===t.user.id?Xe("Incoming Call","arrow-bottom-left","#A6A9A9",e,n):e.fuserId===t.user.id?Xe("Outgoing","arrow-top-right","#A6A9A9",e,n):void 0:Xe("Missed Call","arrow-bottom-left","#f17d77",e,n)},$e=function(e){var t=e.clo,a=e.idx,n="user"===t.type;return c.a.createElement("div",{key:a,style:{cursor:"pointer",padding:5,background:t.mouseHoverId===a?"#d6f4fe":"white"},onClick:function(){return t.onClick(t)},onMouseOver:function(){return t.onMouseHover(a)}},c.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("div",{style:{display:"flex"}},(n?t.user.userDetails&&t.user.userDetails.image:t.boardDetails.image)?c.a.createElement("img",{alt:"profile-img",src:"".concat(te,"/user/").concat(1e7+parseInt(t.user.user.id,10),"/profile/").concat(t.user.userDetails.image),style:{height:30,width:30,borderRadius:"50%"}}):c.a.createElement(Z.a,{icon:n?"user":"application",iconSize:30,style:{color:"#757575"}}),n?t.user.user.activeStatus?c.a.createElement("div",{style:{marginLeft:-5,marginTop:20,height:8,width:8,borderRadius:"50%",background:"#A4DE02"}}):c.a.createElement("div",{style:{marginLeft:-5,marginTop:20,height:8,width:8,borderRadius:"50%",background:"#f5f5f5"}}):null),c.a.createElement("div",{style:{display:"flex",flexDirection:"column",marginLeft:10}},c.a.createElement("div",{style:{fontWeight:"bold"}},c.a.createElement("span",{style:{padding:3}},n?t.user.user.firstName:t.boardDetails.name),!n&&t.boardDetails.activeStatus&&c.a.createElement("span",{style:{background:"green",padding:3,fontSize:10,marginLeft:5,fontWeight:"lighter",borderRadius:5,color:"white"}},"Live")),c.a.createElement("span",{style:{fontSize:14,color:"#757575",width:200,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},t.lastMessage.type?"Incoming"===t.lastMessage.type?Ze(t.lastMessage,D.getState().account,t.type,!0):_e(t.lastMessage,D.getState().account,t.type,!0):t.lastMessage.message))),c.a.createElement("div",{style:{position:"relative",display:"flex",justifyContent:"flex-end",flexDirection:"column",alignItems:"flex-end"}},c.a.createElement("span",{style:{fontSize:12,color:"#757575"}},le()(t.timeStamp).fromNow()),t.unSeenNo>0&&c.a.createElement("div",{style:{marginTop:5,position:"relative",backgroundColor:"green",height:20,width:20,borderRadius:"50%",justifyContent:"center",display:"flex",color:"white",alignItems:"center"}},c.a.createElement("span",{style:{fontSize:10,fontWeight:"bold"}},t.unSeenNo)))))},et=function(e){var t=e.props,a=t.change,n=t.updateWebRtc,r=t.database,c=t.apis,s=t.account,o=t.addDatabaseSchema,i=t.fromLive,l=t.showChatHistory,u=e.type,d=e.user,m=e.lastMessageId,p=e.boardDetails,f=e.unSeenNo,b=d?d.user.id:e.boardDetails.id;(n("chatHistory",e),i||a("history"),i&&l(!0),"user"===e.type)&&n("connectionId",Object.values(r.UserConnection.byId).find(function(e){return e.userId===b||e.mId===b}).id);n("peerType",u),n("showCommunication",b),f>0&&("user"===u&&(c.addUserMessageSeenStatus({userId:s.user.id,umId:m,timeStamp:Date.now(),status:!0,broadCastId:"UserConnection-".concat(s.user.id),broadCastUserList:[{userId:d.user.id}]}),o("UserMessageSeenStatus",{id:Date.now(),userId:s.user.id,umId:m,timeStamp:Date.now(),status:!0})),"board"===u&&(c.addBoardMessageSeenStatus({userId:s.user.id,bmId:m,timeStamp:Date.now(),status:!0,broadCastId:"Board-".concat(p.id)}),o("BoardMessageSeenStatus",{id:Date.now(),userId:s.user.id,bmId:m,timeStamp:Date.now(),status:!0})))},tt=function(e,t){return e.position>t.position?1:e.position<t.position?-1:void 0},at=function(e,t){return e.timeStamp<t.timeStamp?1:-1},nt=function(e,t){return e.timeStamp>t.timeStamp?1:-1},rt=function(e,t,a){var n=a.database,r=[];return"board"===t&&Object.values(n.BoardMessageSeenStatus.byId).forEach(function(t){t.bmId===e&&r.push(t)}),"user"===t&&Object.values(n.UserMessageSeenStatus.byId).forEach(function(t){t.umId===e&&r.push(t)}),r},ct=function(e){var t=e.database,a={},n={};Object.values(t.UserMessage.byId).forEach(function(e){a=a[e.connectionId]?Object(g.a)({},a,Object(v.a)({},e.connectionId,[].concat(Object(h.a)(a[e.connectionId]),[e]))):Object(g.a)({},a,Object(v.a)({},e.connectionId,[e]))}),Object.values(t.BoardMessage.byId).forEach(function(e){n=n[e.boardId]?Object(g.a)({},n,Object(v.a)({},e.boardId,[].concat(Object(h.a)(n[e.boardId]),[e]))):Object(g.a)({},n,Object(v.a)({},e.boardId,[e]))});var r=Object.values(a).map(function(t){return Object(g.a)({},function(e,t){var a,n=t.database,r=t.account,c=e.map(function(e){return Object(g.a)({},e,{seenStatus:rt(e.id,"user",t)})}),s=c.reverse(),o=s.findIndex(function(e){return e.seenStatus.find(function(e){return e.userId===r.user.id})});if(-1===o)a=c.length;else{for(var i=0,l=0;l<o;l+=1)s[l].fuserId!==r.user.id&&(i+=1);a=i}var u,d,m,p=c[0],f=c.find(function(e){return e.fuserId!==r.user.id}),b=f?f.id:c[0].id;return p.fuserId!==r.user.id?(u=Object.values(n.User.byId).find(function(e){return e.id===p.fuserId}),d=Object.values(n.UserDetail.byId).find(function(e){return e.userId===p.fuserId}),m=Object.values(n.UserConnection.byId).find(function(e){return e.userId===u.id||e.mId===u.id})):(u=Object.values(n.User.byId).find(function(e){return e.id===p.tuserId}),d=Object.values(n.UserDetail.byId).find(function(e){return e.userId===p.tuserId}),m=Object.values(n.UserConnection.byId).find(function(e){return e.userId===u.id||e.mId===u.id})),{connectionId:m?m.id:null,type:"user",user:{user:u,userDetails:d},unSeenNo:a,timeStamp:c[0].timeStamp,lastMessage:c[0],lastMessageId:b}}(t,e),{message:t.sort(nt)})}),c=Object.values(n).map(function(t){return Object(g.a)({},function(e,t){var a,n=t.database,r=t.account,c=e[0].boardId,s=n.Board.byId[c],o=e.map(function(e){return Object(g.a)({},e,{seenStatus:rt(e.id,"board",t)})}),i=o.reverse(),l=i.findIndex(function(e){return e.seenStatus.find(function(e){return e.userId===r.user.id})});if(-1===l)a=o.length;else{for(var u=0,d=0;d<l;d+=1)i[d].userId===r.user.id||i[d].type||(u+=1);a=u}var m=o.find(function(e){return e.userId!==r.user.id}),p=m?m.id:o[0].id,f=o.find(function(e){return!e.type||!(!e.type||e.userId!==r.user.id)||void 0});return{connectionId:c,type:"board",boardDetails:s,unSeenNo:a,timeStamp:o[0].timeStamp,lastMessage:f,lastMessageId:p}}(t,e),{message:t.sort(nt)})});return[].concat(Object(h.a)(r),Object(h.a)(c)).sort(at).sort(at)},st=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={mouseHoverId:null,chatList:[]},a.onMouseHover=function(e){a.setState({mouseHoverId:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=ct(this.props);this.setState({chatList:e})}},{key:"componentWillReceiveProps",value:function(e){var t=ct(e);this.setState({chatList:t})}},{key:"render",value:function(){var e=this,t=this.props.style,a=this.state,n=a.mouseHoverId,r=a.chatList;return c.a.createElement("div",{style:t,className:"chat-list"},r.map(function(t,a){return c.a.createElement($e,{clo:Object(g.a)({},t,{onClick:et,onMouseHover:e.onMouseHover,mouseHoverId:n,props:e.props}),idx:a})}))}}]),t}(c.a.Component),ot=function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n,r,c,s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=document.getElementById("mainCanvas"),n=null,e.prev=2,navigator.getWebcam=navigator.getUserMedia||navigator.webKitGetUserMedia||navigator.moxGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,e.t0=t,e.next="audio"===e.t0?7:"video"===e.t0?17:"screenshare"===e.t0?27:"whiteBoard"===e.t0?37:47;break;case 7:if(!navigator.mediaDevices.getUserMedia){e.next=13;break}return e.next=10,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 10:n=e.sent,e.next=16;break;case 13:return e.next=15,navigator.getWebcam({audio:!0,video:!1});case 15:n=e.sent;case 16:return e.abrupt("return",n);case 17:if(!navigator.mediaDevices.getUserMedia){e.next=23;break}return e.next=20,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 20:n=e.sent,e.next=26;break;case 23:return e.next=25,navigator.getWebcam({audio:!0,video:!0});case 25:n=e.sent;case 26:return e.abrupt("return",n);case 27:return e.next=29,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 29:return r=e.sent,e.next=32,navigator.mediaDevices.getDisplayMedia({video:!0});case 32:return c=e.sent,s=r.getTracks(),o=c.getTracks(),n=new MediaStream([].concat(Object(h.a)(s),Object(h.a)(o))),e.abrupt("return",n);case 37:return e.next=39,a.captureStream(10);case 39:return i=e.sent,e.next=42,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 42:return l=e.sent,u=l.getTracks(),d=i.getTracks(),n=new MediaStream([].concat(Object(h.a)(u),Object(h.a)(d))),e.abrupt("return",n);case 47:return e.abrupt("return",n);case 48:e.next=53;break;case 50:e.prev=50,e.t1=e.catch(2),console.error("Media Selector error",e.t1);case 53:case"end":return e.stop()}},e,null,[[2,50]])}));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Offer Initialization",n);try{r=t.updateWebRtc,c=n.connectionId,s=n.isLive,o=D.getState(),(i=o.webRtc).mainStreamId&&!s||r("mainStreamId",n.uid),r("connectionId",c),r("streams",Object(g.a)({},i.streams,Object(v.a)({},n.uid,Object(g.a)({},i.streams[n.uid],{callEnd:!1,stream:[],callType:"Incoming"})))),r("localCallHistory",Object(g.a)({},i.localCallHistory,{callType:i.localCallHistory.callType||"Incoming",callEnd:!1}))}catch(a){console.error("Offer initialization Error",a)}case 2:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}();function lt(e,t,a){a(e,t);var n=document.getElementById("video-".concat(D.getState().account.user.id));e&&n&&(n.srcObject=e);var r=D.getState(),c=r.webRtc,s=r.database,o=r.account;if("board"===c.chatHistory.type&&s.Board.byId[c.localCallHistory.chatHistory.connectionId].activeStatus===o.user.id){var i=document.getElementById("video-mentor");i&&(i.srcObject=c.streams[o.user.id].stream[0])}}function ut(e,t,a){return dt.apply(this,arguments)}function dt(){return(dt=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Hey got remote stream"),e.next=3,n(t,a);case 3:r=D.getState(),c=r.webRtc,s=r.database,o=r.account,i=document.getElementById("video-mentor"),"board"===c.localCallHistory.chatHistory.type&&((l=document.getElementById("video-".concat(a)))&&l.srcObject!==t.streams[0]&&(l.srcObject=t.streams[0]),a===s.Board.byId[c.localCallHistory.chatHistory.connectionId].activeStatus&&i&&i.srcObject!==t.streams[0]&&(i.srcObject=t.streams[0]),s.Board.byId[c.localCallHistory.chatHistory.connectionId].activeStatus===o.user.id&&i&&c.streams[o.user.id].stream[0]!==i.srcObject&&(i.srcObject=c.streams[o.user.id].stream[0])),"user"===c.localCallHistory.chatHistory.type&&i&&(i.srcObject=t.streams[0]);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(e,t,a,n,r,c){return pt.apply(this,arguments)}function pt(){return(pt=Object(T.a)(M.a.mark(function e(t,a,n,r,c,s){var o,i,l,u,d,m,p,f,b;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a,i={iceServers:[{urls:["stun:stun.l.google.com:19302"]},{urls:["turn:properclass.com:3478?transport=tcp"],username:"properclass",credential:"proper199201"}]},e.prev=2,(l=new RTCPeerConnection(i)).addEventListener("icecandidate",function(e){return t(e,o)}),l.addEventListener("iceconnectionstatechange",function(e){return r(e,l,o)}),l.addEventListener("track",function(e){return ut(e,o,n)}),l.onicecandidateerror=function(e){return console.error("Error on onIceCandidate",e)},l.onicegatheringstatechange=function(e){return console.info("OnICeGatheringsStateChange",e)},u=function(e){l.setLocalDescription(e)},d=function(e){l.addIceCandidate(new RTCIceCandidate(JSON.parse(e)))},m=function(e){l.setRemoteDescription(e)},p=function(){var e=Object(T.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:lt(t,o,s),t.getTracks().forEach(function(e){return l.addTrack(e,t)}),l.createOffer(function(e){u(e),c(e,o)},function(e){console.error("error in create offer",e)},{mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(T.a)(M.a.mark(function e(t,a){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a&&(a.getTracks().forEach(function(e){return l.addTrack(e,a)}),lt(a,o,s)),m(t),e.next=4,l.createAnswer();case 4:return n=e.sent,u(n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),b=function(e){l.addIceCandidate(new RTCIceCandidate(JSON.parse(e)))},e.abrupt("return",{pc:l,createOffer:p,createAnswer:f,addIceCandidate:b,setRemoteDescription:m,addCandidate:d});case 18:e.prev=18,e.t0=e.catch(2),console.error("Error in Creating turn server",e.t0);case 21:case"end":return e.stop()}},e,null,[[2,18]])}))).apply(this,arguments)}var ft=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){var c,s,o,i,l,u;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("OnIceCandidate local",n,r),c=e.account,s=e.updateWebRtc,o=D.getState(),i=o.webRtc,l=t.apis,a.prev=4,!n.candidate){a.next=15;break}if(!(u=i.iceCandidates[r])){a.next=14;break}if(s("iceCandidates",Object(g.a)({},i.iceCandidates,Object(v.a)({},r,Object(g.a)({},i.iceCandidates[r],{candidates:i.iceCandidates[r].candidates?[].concat(Object(h.a)(i.iceCandidates[r].candidates),[n]):[n]})))),!u.preFetch){a.next=12;break}return a.next=12,l.addIceCandidate({iceCandidateDetail:{iceCandidate:JSON.stringify(n.candidate),uid:c.user.id,broadCastId:"user"===i.localCallHistory.chatHistory.type?c.user.id:i.showCommunication,broadCastType:"user"===i.localCallHistory.chatHistory.type?"UserConnection":"Board"},userList:[{userId:r}]});case 12:a.next=15;break;case 14:s("iceCandidates",Object(g.a)({},i.iceCandidates,Object(v.a)({},r,Object(g.a)({},i.iceCandidates[r],{candidates:[n]}))));case 15:a.next=20;break;case 17:a.prev=17,a.t0=a.catch(4),console.error("Error in add local iCe candidate",a.t0);case 20:case"end":return a.stop()}},a,null,[[4,17]])}));return function(e,t){return a.apply(this,arguments)}}()},bt=function(e,t){return ht.apply(this,arguments)};function ht(){return(ht=Object(T.a)(M.a.mark(function e(t,a){var n,r,s,o,i,l,u,d,m;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=document.getElementById("video-mentor"),r=n.captureStream?n.captureStream():n.mozCaptureStream(),o=[],i=function(e){e.data&&e.data.size>0&&o.push(e.data)},l={mimeType:'video/webm;codecs="vp8,opus"'},MediaRecorder.isTypeSupported(l.mimeType)||(l={mimeType:'video/webm;codecs="vp8, opus"'},MediaRecorder.isTypeSupported(l.mimeType)||(l={mimeType:"video/webm"},MediaRecorder.isTypeSupported(l.mimeType)||(l={mimeType:""})));try{(s=new MediaRecorder(r,l)).ondataavailable=i,s.start(10)}catch(t){}return s.onstop=function(e){},s.onpause=function(e){},s.onresume=function(e){},u=function(e){(0,a.updateWebRtc)("recordedBlobs",D.getState().webRtc.recordedBlobs.filter(function(t){return Object.keys(t)[0]!==e}))},d=function(){var e=a.updateWebRtc,t=D.getState(),n=t.webRtc,s=t.database,i=new Blob(o,{type:"video/webm"}),l=window.URL.createObjectURL(i),d="".concat((new Date).getDate(),"-").concat((new Date).getMonth()+1,"-").concat((new Date).getFullYear());e("recordedBlobs",[].concat(Object(h.a)(D.getState().webRtc.recordedBlobs),[Object(v.a)({},r.id,c.a.createElement("a",{id:r.id,href:l,className:"recorded-item",download:"".concat("user"===n.localCallHistory.chatHistory.type?s.User.byId[n.showCommunication].firstName:s.Board.byId[n.showCommunication].name,"-").concat(d,".webm")},c.a.createElement("div",{onClick:function(){return u(r.id)}},"".concat("user"===n.localCallHistory.chatHistory.type?s.User.byId[n.showCommunication].firstName:s.Board.byId[n.showCommunication].name,"-").concat(d))))]))},m=function(){s.stop(),d()},e.abrupt("return",{stopRecording:m,mediaRecorder:s,stream:r});case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var vt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D.getState(),c=r.webRtc,s=t.updateWebRtc,!c.mediaRecording||n.id===c.mediaRecording.stream.id){e.next=9;break}return c.mediaRecording.stopRecording(),e.next=6,bt(1,t);case 6:return o=e.sent,e.next=9,s("mediaRecording",o);case 9:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),gt=function(e){return function(){var t=Object(T.a)(M.a.mark(function t(a,n){var r,c,s;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.updateWebRtc,c=D.getState(),s=c.webRtc,t.next=4,r("streams",Object(g.a)({},s.streams,Object(v.a)({},n,Object(g.a)({},s.streams[n],{startTimeStamp:s.streams[n].startTimeStamp||Date.now(),endTimeStamp:null,stream:s.streams[n]?[].concat(Object(h.a)(s.streams[n].stream),[a]):[a]}))));case 4:return t.next=6,r("localCallHistory",Object(g.a)({},s.localCallHistory,{startTime:s.localCallHistory.startTime||Date.now()}));case 6:return t.next=8,r("lastStreamId",n);case 8:return t.next=10,vt(e,n,a);case 10:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},yt=function(e){return function(t,a,n){var r=e.updateWebRtc,c=D.getState().webRtc;r("peerConnections",Object(g.a)({},c.peerConnections,Object(v.a)({},n,Object(g.a)({},c.peerConnections[n],{iceCandidateStatus:a.iceConnectionState}))))}},Et=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){var c,s,o,i,l;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=D.getState(),s=c.account,o=c.webRtc,(0,e.updateWebRtc)("streams",Object(g.a)({},o.streams,Object(v.a)({},r,Object(g.a)({},o.streams[r],{callEnd:!1,stream:[]})))),i="user"===o.localCallHistory.chatHistory.type?"UserConnection":"Board",l="user"===o.localCallHistory.chatHistory.type?s.user.id:o.showCommunication,t.apis.createOffer({offerDetail:{isLive:o.isCallUpgraded,offer:n,uid:s.user.id,broadCastId:l,broadCastType:i,connectionId:o.localCallHistory.chatHistory.connectionId,callType:o.localCallHistory.mediaType},userList:[{userId:r}]});case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()},Ct=function(e){return function(t,a){console.log("local stream handler",t,a);var n=e.updateWebRtc;D.getState().webRtc.streams?n("streams",Object(g.a)({},D.getState().webRtc.streams,Object(v.a)({},a,{stream:[]}))):n("streams",Object(v.a)({},a,{stream:[]}))}},Ot=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n,r,c,s){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("communicationContainer","list");case 2:return e.next=4,t("showCommunication",a);case 4:return e.next=6,t("localCallHistory",Object(g.a)({},c.localCallHistory,{chatHistory:{connectionId:s,type:r,user:{user:n.User.byId[a]},broadCastId:a}}));case 6:t("showIncommingCall",!0);case 7:case"end":return e.stop()}},e)}));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}(),jt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l,u,d,m,p,f,b,h;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.uid,c=n.offer,s=t.updateWebRtc,o=t.database,i=D.getState(),l=i.webRtc,u=i.account,d=a.apis,e.prev=4,m=l.peerConnections[n.uid],p=m.pc,f=m.iceCandidateStatus,b=null,"connected"!==f){e.next=13;break}return e.next=10,p.createAnswer(c,null);case 10:b=e.sent,e.next=22;break;case 13:return p.pc.close(),delete l.peerConnections[r],e.next=17,mt(ft(t,a),r,gt(t),yt(t),Et(t,a),Ct(t));case 17:return h=e.sent,e.next=20,h.createAnswer(c,l.streams[u.user.id].stream[0]);case 20:b=e.sent,s("peerConnections",Object(g.a)({},l.peerConnections,Object(v.a)({},r,{pc:h,user:o.User.byId[r]})));case 22:d.createAnswer({answerDetail:{answer:b,uid:u.user.id,broadCastId:"user"===l.localCallHistory.chatHistory.type?u.user.id:l.showCommunication,broadCastType:"user"===l.localCallHistory.chatHistory.type?"UserConnection":"Board",callType:l.localCallHistory.mediaType},userList:[{userId:r}]}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(4),console.error("erro in onlive offer handler",e.t0);case 28:case"end":return e.stop()}},e,null,[[4,25]])}));return function(t,a,n){return e.apply(this,arguments)}}(),wt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.updateWebRtc,c=t.database,s=n.broadCastId,o=n.broadCastType,i=n.connectionId,l="UserConnection"===o?"user":"board",u=D.getState(),d=u.webRtc,r("currentOffer",n),r("pendingOffers",[].concat(Object(h.a)(d.pendingOffers),[n])),d.isLive){e.next=11;break}return e.next=9,Ot(r,s,c,l,d,i);case 9:e.next=13;break;case 11:return e.next=13,jt(t,a,n);case 13:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),It=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.updateWebRtc,c=t.database,s=n.broadCastId,o=n.broadCastType,i=n.connectionId,l="UserConnection"===o?"user":"board",u=D.getState(),d=u.webRtc,e.next=7,r("localCallHistory",Object(g.a)({},d.localCallHistory,{chatHistory:{connectionId:i,type:l,user:{user:c.User.byId[s]},broadCastId:s}}));case 7:return e.next=9,r("chatHistory",{connectionId:i,type:l,user:{user:c.User.byId[s]},broadCastId:s});case 9:return e.next=11,r("showCommunication",s);case 11:r("showIncommingCall",!0),r("currentOffer",n),r("pendingOffers",[].concat(Object(h.a)(d.pendingOffers),[n])),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Offer On open Communication Open error",e.t0);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t,a,n){return e.apply(this,arguments)}}(),kt=function(e,t,a){return function(){var t=Object(T.a)(M.a.mark(function t(n){var r,c,s,o,i;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.updateWebRtc,c=e.account,s=D.getState(),o=s.webRtc,i=Object.values(o.peerConnections),t.next=5,r("chatHistory",o.localCallHistory.chatHistory);case 5:if(o.localCallHistory.stream&&o.localCallHistory.stream.active&&o.localCallHistory.stream.getTracks().forEach(function(e){return e.stop()}),!o.showCommunication){t.next=35;break}if(o.mediaRecording&&(o.mediaRecording.stopRecording(),r("mediaRecording",null)),0!==i.length){t.next=15;break}if(o.localCallHistory.callEnd){t.next=13;break}return t.next=12,r("localCallHistory",Object(g.a)({},o.localCallHistory,{callEnd:!0}));case 12:n&&"board"!==o.localCallHistory.chatHistory.type||a.callClose({callCloseDetail:{uid:c.user.id,broadCastId:"user"===o.localCallHistory.chatHistory.type?c.user.id:o.localCallHistory.chatHistory.connectionId,broadCastType:"user"===o.localCallHistory.chatHistory.type?"UserConnection":"Board",callType:o.localCallHistory.callType||"Misscall",callDuration:0,type:o.localCallHistory.chatHistory.type,connectionId:o.localCallHistory.chatHistory.connectionId,callEndReply:n},userList:[{userId:o.localCallHistory.chatHistory.user.user.id}]});case 13:t.next=20;break;case 15:if(o.localCallHistory.callEnd){t.next=20;break}return t.next=18,r("localCallHistory",Object(g.a)({},o.localCallHistory,{callEnd:!0}));case 18:i.forEach(function(){var e=Object(T.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t.pc.pc.close()}catch(a){console.error("errror in call close handler",a)}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n&&"board"!==o.localCallHistory.chatHistory.type||a.callClose({callCloseDetail:{uid:c.user.id,broadCastId:"user"===o.localCallHistory.chatHistory.type?c.user.id:o.localCallHistory.chatHistory.connectionId,broadCastType:"user"===o.localCallHistory.chatHistory.type?"UserConnection":"Board",callType:o.localCallHistory.callType||"Misscall",callDuration:o.localCallHistory.startTime?Date.now()-o.localCallHistory.startTime:0,type:o.localCallHistory.chatHistory.type,connectionId:o.localCallHistory.chatHistory.connectionId,callEndReply:n},userList:[{userId:"user"===o.localCallHistory.chatHistory.type?o.localCallHistory.chatHistory.user.user.id:o.localCallHistory.chatHistory.connectionId}]});case 20:r("communicationContainer","history"),r("outGoingCallType",null),r("showOutgoingCall",!1),r("peerConnections",{}),r("pendingOffers",[]),r("remoteStream",{}),r("currentOffer",null),r("iceCandidates",{}),r("liveIncomingCall",!1),r("isLive",!1),r("localCallHistory",{callEnd:!0}),r("mainStreamId",null),r("streams",{}),t.next=36;break;case 35:r("showIncommingCall",!1);case 36:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Nt=function(e,t,a){var n=e.updateWebRtc;setTimeout(Object(T.a)(M.a.mark(function a(){var r,c;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=D.getState(),(c=r.webRtc).isLive||c.localCallHistory.callEnd||(kt(e,0,t.apis)(),n("showIncommingCall",!1),n("communicationContainer","history"));case 2:case"end":return a.stop()}},a)})),a||2e4)},xt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n,r){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(t,a,n);case 2:if(!r.showCommunication){e.next=7;break}return e.next=5,wt(t,a,n);case 5:e.next=9;break;case 7:return e.next=9,It(t,a,n);case 9:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),St=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n,r,c){var s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=a.account,o=r.uid,i=r.broadCastId,l=r.broadCastType,u=r.connectionId,d=n.apis;try{d.callStatusChange({callStatusDetails:{broadCastType:l,broadCastId:i,uid:s.user.id,connectionId:u,type:"busy"},userList:[{userId:o}]})}catch(t){console.error("Call Stautus change error when live",t)}case 4:case"end":return e.stop()}},e)}));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),At=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l,u,d,m;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=D.getState(),c=r.webRtc,s=n.uid,o=n.connectionId,i=n.broadCastType,l=n.broadCastId,u="Board"===i?"board":"user",d=t.account,t.updateWebRtc,m=a.apis,!c.showIncommingCall&&!c.isConnecting){e.next=9;break}St("Call is busy",t,a,n,c),e.next=34;break;case 9:if(c.isLive||(Nt(t,a),m.callStatusChange({callStatusDetails:{broadCastType:i,broadCastId:l,uid:d.user.id,connectionId:o,type:"ringing"},userList:[{userId:s}]})),"board"!==u){e.next=22;break}if(!c.isLive){e.next=20;break}if(c.localCallHistory.chatHistory.connectionId!==l){e.next=17;break}return e.next=15,xt(t,a,n,c);case 15:e.next=18;break;case 17:St("Call is busy",t,a,n,c);case 18:e.next=22;break;case 20:return e.next=22,xt(t,a,n,c);case 22:if("user"!==u){e.next=34;break}if(!c.isLive){e.next=32;break}if(c.localCallHistory.chatHistory.connectionId!==o||"board"===c.localCallHistory.chatHistory.type){e.next=29;break}return e.next=27,xt(t,a,n,c);case 27:e.next=30;break;case 29:St("Call is busy",t,a,n,c);case 30:e.next=34;break;case 32:return e.next=34,xt(t,a,n,c);case 34:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l,u,d,m;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.apis,c=t.updateWebRtc,s=D.getState(),o=s.webRtc,i=s.account,s.database,l=n.uid,u=n.answer,n.boardId,d=o.peerConnections[l].pc,console.log("ONANSWER",l,o),m=o.iceCandidates[l],n&&(d.setRemoteDescription(u),m.candidates.forEach(function(e){r.addIceCandidate({iceCandidateDetail:{iceCandidate:JSON.stringify(e.candidate),uid:i.user.id,broadCastId:"user"===o.localCallHistory.chatHistory.type?i.user.id:o.showCommunication,broadCastType:"user"===o.localCallHistory.chatHistory.type?"UserConnection":"Board"},userList:[{userId:l}]})}),c("iceCandidates",Object(g.a)({},o.iceCandidates,Object(v.a)({},l,Object(g.a)({},o.iceCandidates[l],{sendStatus:!0})))),c("isLive",!0),c("isConnecting",!1));case 8:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),Bt=function(e,t,a){var n=t.apis,r=a.uid,c=a.iceCandidate,s=e.updateWebRtc,o=D.getState(),i=o.webRtc,l=o.account,u=i.peerConnections[r].pc,d=i.iceCandidates[r];c&&(u.addCandidate(c),d?!d.sendStatus&&d.candidates&&d.candidates.length>0&&(d.candidates.forEach(function(e){n.addIceCandidate({iceCandidateDetail:{iceCandidate:JSON.stringify(e.candidate),uid:l.user.id,broadCastId:"user"===i.localCallHistory.chatHistory.type?l.user.id:i.showCommunication,broadCastType:"user"===i.localCallHistory.chatHistory.type?"UserConnection":"Board"},userList:[{userId:r}]})}),s("iceCandidates",Object(g.a)({},i.iceCandidates,Object(v.a)({},r,Object(g.a)({},i.iceCandidates[r],{sendStatus:!0}))))):s("iceCandidates",Object(g.a)({},i.iceCandidates,Object(v.a)({},r,{preFetch:!0}))))},Rt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.updateWebRtc,e.next=3,kt(t,0,a.apis)(n);case 3:r("showIncommingCall",!1),r("communicationContainer","history");case 5:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n,r){var c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=D.getState(),s=c.webRtc,o=n.uid,i=n.broadCastId,n.broadCastType,l=n.type,u=n.connectionId,"user"===l&&(s.isLive||s.peerConnections[o]||s.showIncommingCall)&&l===s.localCallHistory.chatHistory.type&&s.localCallHistory.chatHistory.connectionId===u&&(r(!0),Rt(t,a,n)),"board"===l&&s.isLive&&s.showCommunication===i&&(r(!0),Rt(t,a,n));case 4:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),Pt=function(e,t,a){var n=a.uid,r=a.type,c=e.updateWebRtc,s=D.getState().webRtc;c("peerConnections",Object(g.a)({},s.peerConnections,Object(v.a)({},n,Object(g.a)({},s.peerConnections[n],{iceCandidateStatus:r}))))},Mt=function(e,t,a){se.on("offer",function(){var a=Object(T.a)(M.a.mark(function a(n){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,At(e,t,n);case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()),se.on("answer",function(){var a=Object(T.a)(M.a.mark(function a(n){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Dt(e,t,n);case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()),se.on("icecandidate",function(){var a=Object(T.a)(M.a.mark(function a(n){return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:Bt(e,t,n);case 1:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()),se.on("callStatus",function(){var t=Object(T.a)(M.a.mark(function t(a){return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("call Status",a),Pt(e,0,a);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),se.on("callEnd",function(){var n=Object(T.a)(M.a.mark(function n(r){return M.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("callend event called",r),Ht(e,t,r,a);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())},Tt=function(){var e=Object(T.a)(M.a.mark(function e(t,a,n){var r,c,s,o,i,l,u,d,m,p,f;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=a.database,c=a.updateWebRtc,s=a.account,o=D.getState(),i=o.webRtc,l=null,"user"===i.localCallHistory.chatHistory.type?l=[i.localCallHistory.chatHistory.user.user]:(u=Object.values(r.BoardMember.byId).filter(function(e){return e.boardId===t}),d=u.map(function(e){return r.User.byId[e.tuserId]}),l=d.filter(function(e){return e.id!==s.user.id})),m=l.map(function(e){return mt(ft(a,n),e.id,gt(a),yt(a),Et(a,n),Ct(a))}),e.next=8,Promise.all(m);case 8:return p=e.sent,f=l.reduce(function(e,t,a){return e[t.id]={pc:p[a],user:t,iceCandidateStatus:"Connecting..."},e},{}),c("peerConnections",f),e.abrupt("return",l);case 14:e.prev=14,e.t0=e.catch(0),console.error("Error in creating pc",e.t0);case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t,a,n){return e.apply(this,arguments)}}(),Ut=function(e,t){return function(){var a=Object(T.a)(M.a.mark(function a(n,r){var c,s,o,i,l;return M.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,c=D.getState(),s=c.webRtc,o=e.updateWebRtc,e.account,s.isLive){a.next=6;break}return a.next=6,Tt(s.showCommunication,e,t);case 6:return s=D.getState().webRtc,o("communicationContainer","connecting"),o("showOutgoingCall",!0),i=Object.values(s.peerConnections),Object.keys(s.peerConnections),l=i.map(function(e){return e.pc.createOffer(r)}),a.next=14,Promise.all(l);case 14:a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),console.error("error in CallHandler",a.t0);case 19:case"end":return a.stop()}},a,null,[[0,16]])}));return function(e,t){return a.apply(this,arguments)}}()};function Lt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(T.a)(M.a.mark(function e(t){var a,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=t.apis,r=t.webRtc,c=t.message,e.prev=1,e.next=4,n.addUserMessage({tuserId:r.chatHistory.user.user.id,fuserId:a.user.id,timeStamp:Date.now(),message:c,url:null,readStatus:0,connectionId:r.chatHistory.connectionId,broadCastId:"UserConnection-".concat(a.user.id),broadCastUserList:[{userId:r.chatHistory.user.user.id}]});case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(1),console.error("Error in sending message",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function zt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(T.a)(M.a.mark(function e(t){var a,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=t.apis,r=t.webRtc,c=t.message,e.prev=1,e.next=4,n.addBoardMessage({boardId:r.chatHistory.connectionId,message:c,userId:a.user.id,timeStamp:Date.now(),url:null,remarks:null,broadCastId:"Board-".concat(r.chatHistory.connectionId),readStatus:0});case 4:return s=e.sent,e.abrupt("return",s);case 8:return e.prev=8,e.t0=e.catch(1),console.error("Error in sending board message",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var Gt=function(e,t,a,n,r){var c=e.webRtc,s=e.addDatabaseSchema,o=e.message,i=e.account,l=e.deleteDatabaseSchema;"board"===c.chatHistory.type?"add"===a?s("BoardMessage",{id:t,boardId:c.chatHistory.connectionId,message:o,userId:i.user.id,timeStamp:Date.now(),url:null,remarks:null,readStatus:0,status:"loading"}):(l("BoardMessage",{id:n}),s("BoardMessage",{id:t,boardId:c.chatHistory.connectionId,message:o,userId:i.user.id,timeStamp:Date.now(),url:null,remarks:null,readStatus:0,status:r})):"add"===a?s("UserMessage",{id:t,tuserId:c.chatHistory.user.user.id,fuserId:i.user.id,timeStamp:Date.now(),connectionId:c.chatHistory.connectionId,message:o,url:null,readStatus:0,status:"loading"}):(l("UserMessage",{id:n}),s("UserMessage",{id:t,tuserId:c.chatHistory.user.user.id,fuserId:i.user.id,timeStamp:Date.now(),connectionId:c.chatHistory.connectionId,message:o,url:null,readStatus:0,status:r}))};function qt(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(T.a)(M.a.mark(function e(t){var a,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.resend,n=t.deleteDatabaseSchema,a&&n("UserMessage",{id:a}),r=Date.now(),"board"!==t.webRtc.chatHistory.type){e.next=12;break}return Gt(t,r,"add"),e.next=8,zt(t);case 8:(c=e.sent)?Gt(t,c,"deleteAdd",r):Gt(t,c,"deleteAdd",r,"error"),e.next=17;break;case 12:return Gt(t,r,"add"),e.next=15,Lt(t);case 15:(s=e.sent)?Gt(t,s,"deleteAdd",r):Gt(t,s,"deleteAdd",r,"error");case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Qt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},a.onMessageType=function(e){a.setState({message:e.target.value})},a.handleKeyPress=function(){var e=Object(T.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=7;break}if(0!==(n=a.state.message).replace(/\s/g,"").length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,qt(Object(g.a)({},a.props,{message:n}));case 6:a.setState({message:""});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.sendMessage=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=a.state.message).replace(/\s/g,"").length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,qt(Object(g.a)({},a.props,{message:t}));case 5:a.setState({message:""});case 6:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.message;return c.a.createElement("div",{className:"chat-box",style:{marginTop:10}},c.a.createElement(Se.a,{placeholder:"Type here something...",onChange:this.onMessageType,value:e,onKeyPress:this.handleKeyPress}),c.a.createElement(de.b,{style:{background:"#154155",color:"white",width:"10%"},rightIcon:c.a.createElement(Z.a,{icon:"direction-right",color:"white",iconSize:25}),onClick:this.sendMessage}))}}]),t}(c.a.Component);Qt.defaultProps={peerId:0};var Vt=Qt,Kt=a(231),Jt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("audio",{autoPlay:!0,src:Kt,loop:!0,type:"audio/mpeg"})}}]),t}(c.a.Component),Zt=function(e){var t=e.own,a=e.obj,n=e.props,r=e.type;return c.a.createElement("div",{className:t.isOwn?"i-chat right":"i-chat left",key:a.id,style:{marginTop:a.showImage&&15}},(a.showImage&&!t.isOwn||r&&!t.isOwn)&&c.a.createElement("div",{className:"img-wrap"},t.user.userDetails&&t.user.userDetails.image?c.a.createElement("img",{alt:"profile-img",src:"".concat(te,"/user/").concat(1e7+parseInt(t.user.id,10),"/profile/").concat(t.user.userDetails.image),style:{height:30,width:30,borderRadius:"50%"}}):c.a.createElement("div",{style:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",background:"#154155",height:30,width:30,borderRadius:"50%"}},"".concat(t.user.firstName.charAt(0).toUpperCase()).concat(t.user.lastName.charAt(0).toUpperCase()))),c.a.createElement("div",{className:"text-contain"},a.showImage&&!t.isOwn&&c.a.createElement("span",{style:{fontSize:10,color:"#757575",marginLeft:5}},t.user.firstName),c.a.createElement("div",{className:"text",style:{background:t.isOwn?"error"===a.status?"#ff7470":"#A9DBEF":"white",border:"".concat(t.isOwn?"error"===a.status?"1px solid red":"1px solid #A9DBEF":"1px solid white"),padding:2,paddingBottom:0,margin:0,marginRight:5,marginLeft:a.showImage||t.isOwn?3:r?3:33,marginBottom:!a.showImage&&0,borderBottomRightRadius:t.isOwn&&0,borderBottomLeftRadius:!t.isOwn&&0}},a.message,c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}},c.a.createElement(Ve.a,{style:{color:"#757575"},format:"h:mm:a"},a.timeStamp))),c.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:0}},"loading"===a.status&&c.a.createElement(ge.a,{size:"15",intent:"primary"}),"error"===a.status&&c.a.createElement(Z.a,{icon:"repeat",iconSize:"15",style:{cursor:"pointer"},onClick:function(){return qt(Object(g.a)({},n,{message:a.message,resend:a.id}))}}),c.a.createElement("div",{style:{marginTop:2,display:"flex",width:"100%",justifyContent:"center"}},function(e,t){var a=e.database,n=e.account,r=Le.a.uniq(t.filter(function(e){return e.userId!==n.user.id}).map(function(e){return e.userId})),s=[];return r.forEach(function(e){var t=Object.values(a.UserDetail.byId).find(function(t){return t.userId===e});t&&t.image?s.push(c.a.createElement("img",{alt:"profile-img",src:"".concat(te,"/user/").concat(1e7+parseInt(t.userId,10),"/profile/").concat(t.image),style:{marginRight:2,height:15,width:15,borderRadius:"50%"}})):s.push(c.a.createElement("div",{style:{marginRight:2,color:"white",display:"flex",justifyContent:"center",alignItems:"center",background:"#154155",height:15,width:15,borderRadius:"50%"}},c.a.createElement("span",{style:{fontSize:7}},"".concat(a.User.byId[e].firstName.charAt(0).toUpperCase()).concat(a.User.byId[e].lastName.charAt(0).toUpperCase()))))}),s}(n,a.seenStatus)))))},Xt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).scrollToBottom=function(){a.scrollToEnd.current.scrollIntoView({behavior:"auto"})},a.goBack=function(){(0,a.props.change)("list")},a.toCallScreen=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.props,r=n._callHandler,c=n.apis,s=n.change,o=n.updateWebRtc,i=n.webRtc,l=n.account,u=n.database,e.next=4,ot(t);case 4:d=e.sent,o("isCallUpgraded",!1),o("isConnecting",!0),o("streams",Object(v.a)({},l.user.id,{stream:[d]})),o("localCallHistory",{chatHistory:i.chatHistory,stream:d,mediaType:t,callType:"Outgoing",callEnd:!1}),Nt(a.props,{apis:c},22e3),"user"===i.chatHistory.type&&(o("mainStreamId",i.chatHistory.user.user.id),o("streams",Object(g.a)({},i.streams,Object(v.a)({},i.chatHistory.user.user.id,{stream:[]})))),"board"===i.chatHistory.type&&(u.Board.byId[i.chatHistory.connectionId].activeStatus?o("mainStreamId",u.Board.byId[i.chatHistory.connectionId].activeStatus):o("mainStreamId",l.user.id)),r(c,d),s("connecting"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error in calling",e.t0);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),a.containerHandler=function(e,t,n){var r=a.props.webRtc;switch(e.type){case"date":return c.a.createElement("div",{style:{width:"95%",display:"flex",justifyContent:"center",alignItems:"center",margin:10}},c.a.createElement(Ve.a,{style:{color:"#757575",padding:5,border:"1px solid #757575",borderRadius:10,fontSize:10},format:"YYYY MMM DD"},e.timeStamp));case"Incoming":return Ze(e,t,r.chatHistory.type);case"Outgoing":return _e(e,t,r.chatHistory.type);default:return c.a.createElement(Zt,{own:Fe(e,a.props),obj:e,props:a.props,type:n})}},a.state={messages:[],lastMessageId:null,unSeenNo:null},a.scrollToEnd=c.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=qe(this.props);this.setState(Object(g.a)({},e)),this.scrollToBottom()}},{key:"componentWillReceiveProps",value:function(e){var t=qe(e);this.setState(Object(g.a)({},t))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this,t=this.props,a=t.style,n=t.webRtc,r=t.database,s=t.account,o=t.fromLive,i=n.chatHistory.user,l=this.state.messages;return n.showCommunication?c.a.createElement("div",{style:Object(g.a)({},a,{background:"#DDE1E2"}),className:"chat-history",onClick:function(){return function(e,t){var a=e.apis,n=e.webRtc,r=e.account,c=e.addDatabaseSchema,s=t.unSeenNo,o=t.lastMessageId;s>0&&("user"===n.chatHistory.type&&(a.addUserMessageSeenStatus({userId:r.user.id,umId:o,timeStamp:Date.now(),status:!0,broadCastId:"UserConnection-".concat(r.user.id),broadCastUserList:[{userId:n.chatHistory.user.user.id}]}),c("UserMessageSeenStatus",{id:Date.now(),userId:r.user.id,umId:o,timeStamp:Date.now(),status:!0})),"board"===n.chatHistory.type&&(a.addBoardMessageSeenStatus({userId:r.user.id,bmId:o,timeStamp:Date.now(),status:!0,broadCastId:"Board-".concat(n.chatHistory.connectionId)}),c("BoardMessageSeenStatus",{id:Date.now(),userId:r.user.id,bmId:o,timeStamp:Date.now(),status:!0})))}(e.props,e.state)}},!o&&c.a.createElement("div",{className:"top",style:{background:"white"}},c.a.createElement("div",null,c.a.createElement(de.b,{minimal:!0,intent:"default",icon:"double-chevron-left",onClick:this.goBack})),c.a.createElement("div",{className:"op-name"},"user"===n.chatHistory.type?"".concat(i.user.firstName," ").concat(i.user.lastName):r.Board.byId[n.chatHistory.connectionId].name),c.a.createElement("div",{className:"call-control"},"board"===n.chatHistory.type?!r.Board.byId[n.chatHistory.connectionId].activeStatus&&c.a.createElement(de.b,{icon:"phone",intent:"success",onClick:function(){return e.toCallScreen("audio")}}):c.a.createElement(de.b,{icon:"phone",intent:"success",onClick:function(){return e.toCallScreen("audio")}}),"board"===n.chatHistory.type?!r.Board.byId[n.chatHistory.connectionId].activeStatus&&c.a.createElement(de.b,{icon:"mobile-video",intent:"success",onClick:function(){return e.toCallScreen("video")}}):c.a.createElement(de.b,{icon:"mobile-video",intent:"success",onClick:function(){return e.toCallScreen("video")}}),"board"===n.chatHistory.type&&r.Board.byId[n.chatHistory.connectionId].activeStatus&&c.a.createElement(de.b,{intent:"success",onClick:function(){return e.toCallScreen("audio")},text:"Join"}))),c.a.createElement("div",{className:"chats",id:"pcChats"},l.sort(nt).map(function(t,a,n){return e.containerHandler(t,s,0!==a&&n[a-1].type)}),c.a.createElement("div",{className:"i-chat left",ref:this.scrollToEnd})),c.a.createElement(Vt,this.props)):c.a.createElement("div",null)}}]),t}(c.a.Component),_t=a(197),$t=a(54),ea=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).checkOrientation=function(){var e=a.props.imgUrl,t=new Image;t.onload=function(){t.height>t.width&&a.setState({portrait:!0})},t.src=e},a.state={portrait:!1},a.checkOrientation(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.imgUrl,t=this.state.portrait;return c.a.createElement("img",{className:t?"portrait":"landscape",src:e,alt:"Round representation"})}}]),t}(c.a.Component),ta=a(172),aa=function(e){var t=e.isUser,a=e.database,n=e.webRtc,r=t?a.UserDetail.byId[n.localCallHistory.chatHistory.user.user.id]:null;return t&&r&&r.image?c.a.createElement("div",{className:"img-container"},c.a.createElement(ea,{imgUrl:"".concat(te,"/user/").concat(1e7+parseInt(r.userId,10),"/profile/").concat(r.image)})):t?c.a.createElement("div",{className:"img-container"},c.a.createElement(ea,{imgUrl:ta})):c.a.createElement("div",{className:"icon-container"},c.a.createElement(Z.a,{icon:"application",iconSize:130,style:{color:"#757575"}}))},na=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={autoClose:null,callStatus:"connecting..."},a.callReject=Object(T.a)(M.a.mark(function e(){var t,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.closeHandler,r=t.change,e.next=3,n();case 3:r("history");case 4:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n,r,c,s=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props.webRtc,n=this.state.autoClose,a!==t.webRtc&&("user"===t.webRtc.localCallHistory.chatHistory.type&&(r=t.webRtc.peerConnections[a.localCallHistory.chatHistory.user.user.id],this.setState({callStatus:r.iceCandidateStatus}),"busy"===r.iceCandidateStatus&&(this.setState({callStatus:r.iceCandidateStatus}),n||(c=setTimeout(this.callReject,2e3),this.setState({autoClose:c})))),"board"===t.webRtc.chatHistory.type&&Object.values(t.webRtc.peerConnections).forEach(function(e){"ringing"===e.iceCandidateStatus&&s.setState({callStatus:"ringing"})}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.callStatus,t=this.props,a=t.webRtc,n=t.database,r="user"===a.localCallHistory.chatHistory.type;return c.a.createElement("div",{className:"outgoing-call-screen"},c.a.createElement("div",{className:"person-icon-container"},c.a.createElement("div",{className:"person-name-status"},c.a.createElement("span",{className:"name"},"user"===a.chatHistory.type?"".concat(n.User.byId[a.localCallHistory.chatHistory.user.user.id].firstName," ").concat(n.User.byId[a.localCallHistory.chatHistory.user.user.id].lastName):n.Board.byId[a.showCommunication].name),c.a.createElement("span",{className:"status",style:{textTransform:"capitalize",color:"Declined"===e?"red":"white"}},e," ","...")),c.a.createElement(aa,{isUser:r,webRtc:a,database:n}),c.a.createElement("div",{className:"controllers"},"declined"===e||"disconnected"===e||"busy"===e?c.a.createElement(de.b,{large:!0,intent:"danger"},c.a.createElement($t.d,{size:20})):c.a.createElement(de.b,{onClick:this.callReject,large:!0,intent:"danger"},c.a.createElement(_t.a,{size:20})))))}}]),t}(c.a.Component),ra=a(92),ca=function(e){var t=e.onClose,a=e.onClickItem;return c.a.createElement("div",{className:"sc-chat-list"},c.a.createElement("div",{className:"sc-cl-header"},c.a.createElement("div",null),c.a.createElement("div",{className:"sc-cl-title"},"CHATS"),c.a.createElement("div",{style:{cursor:"pointer"}},c.a.createElement(Z.a,{onClick:t,icon:"double-chevron-left"}))),c.a.createElement("div",{className:"sc-cl-content"},c.a.createElement(st,Object.assign({},e,{fromLive:!0,showChatHistory:a}))),c.a.createElement("div",{className:"sc-cl-footer"}))},sa=function(e){var t=e.onClose,a=e.webRtc,n=e.database,r=a.chatHistory.user;return c.a.createElement("div",{className:"sc-chat-history"},c.a.createElement("div",{className:"sc-ch-header"},c.a.createElement("div",{style:{cursor:"pointer"}},c.a.createElement(Z.a,{onClick:function(){return t(null)},icon:"double-chevron-right"})),c.a.createElement("div",{className:"sc-ch-title"},"user"===a.chatHistory.type?"".concat(r.user.firstName," ").concat(r.user.lastName):n.Board.byId[a.chatHistory.connectionId].name),c.a.createElement("div",null)),c.a.createElement("div",{className:"sc-ch-content"},c.a.createElement(Xt,Object.assign({},e,{fromLive:!0}))),c.a.createElement("div",{className:"sc-ch-footer"}))},oa=a(47),ia=function(){var e=Object(T.a)(M.a.mark(function e(t,a){var n,r,c,s,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a._callHandler,r=a.apis,c=a.updateWebRtc,s=a.webRtc,o=a.account,i=a.updateDatabaseSchema,e.next=3,ot(t);case 3:l=e.sent,c("isCallUpgraded",!0),s.localCallHistory.stream&&s.localCallHistory.stream.active&&s.localCallHistory.stream.getTracks().forEach(function(e){return e.stop()}),c("streams",Object(v.a)({},o.user.id,{stream:[l]})),"user"===s.chatHistory.type&&(c("mainStreamId",s.chatHistory.user.user.id),c("streams",Object(g.a)({},s.streams,Object(v.a)({},s.chatHistory.user.user.id,{stream:[]})))),"board"===s.chatHistory.type&&i("Board",{id:s.localCallHistory.chatHistory.connectionId,activeStatus:o.user.id}),c("localCallHistory",Object(g.a)({},s.localCallHistory,{stream:l,mediaType:t,callEnd:!1})),n(r,l);case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),la=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).recordingHandler=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.startRecording,n=a.props,r=n.updateWebRtc,c=n.webRtc,t){e.next=10;break}return e.next=5,bt(1,a.props);case 5:s=e.sent,r("mediaRecording",s),a.setState({startRecording:!0}),e.next=13;break;case 10:c.mediaRecording.stopRecording(),r("mediaRecording",null),a.setState({startRecording:!1});case 13:case"end":return e.stop()}},e)})),a.callReject=function(){console.log("PROPS IN CALL REJECT",a.props);var e=a.props,t=e.closeHandler,n=e.change;e.toggleMaximize;(0,e.remoteCallEndMinimizer)(),t(),n("history")},a.callUpGradeController=function(){var e=Object(T.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.props.webRtc.localCallHistory.mediaType!==t){e.next=5;break}ia("audio",a.props),e.next=12;break;case 5:if("whiteBoard"!==t){e.next=11;break}return e.next=8,a.setState({showWhiteBoard:!0});case 8:ia(t,a.props),e.next=12;break;case 11:ia(t,a.props);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.muteToggle=function(){},a.state={showWhiteBoard:!1,startRecording:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.webRtc,n=t.account,r=this.state,s=r.showWhiteBoard,o=r.startRecording;return c.a.createElement("div",{className:"controllers"},s&&c.a.createElement(F.a,{to:"/".concat(n.user.slug,"/drawing-board")}),c.a.createElement(de.b,{className:"pc-control-btn bg-red",onClick:this.callReject},c.a.createElement(oa.d,{size:20})),c.a.createElement(de.b,{className:"video"===a.localCallHistory.mediaType?"pc-control-btn active":"pc-control-btn",onClick:function(){return e.callUpGradeController("video")}},c.a.createElement(oa.g,{size:20})),c.a.createElement(de.b,{className:"screenshare"===a.localCallHistory.mediaType?"pc-control-btn active":"pc-control-btn",onClick:function(){return e.callUpGradeController("screenshare")}},c.a.createElement(oa.a,{size:20})),c.a.createElement(de.b,{onClick:function(){return e.recordingHandler()},className:o?"pc-control-btn active record":"pc-control-btn"},c.a.createElement(ra.b,{size:20})),c.a.createElement(de.b,{className:"whiteBoard"===a.localCallHistory.mediaType?"pc-control-btn active":"pc-control-btn",onClick:function(){return e.callUpGradeController("whiteBoard")}},c.a.createElement(oa.b,{size:20})),c.a.createElement(de.b,{className:"pc-control-btn",onClick:this.muteToggle},c.a.createElement(oa.c,{size:20})))}}]),t}(c.a.Component),ua=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.database,a=e.webRtc,n=a.localCallHistory.chatHistory,r=n.type,s=n.connectionId,o="user"===r?a.mainStreamId:t.Board.byId[s].activeStatus,i=Object.values(t.UserDetail.byId).find(function(e){return e.userId===o});return c.a.createElement("div",{className:"pc-main-screen"},c.a.createElement("video",{id:"video-mentor",playsInline:!0,controlsList:"noremoteplayback",autoPlay:!0,className:"pc-main-video",poster:i&&"".concat(te,"/user/").concat(1e7+parseInt(o,10),"/profile/").concat(Object.values(t.UserDetail.byId).find(function(e){return e.userId===o}).image)}))}}]),t}(c.a.Component),da=function(e){var t=e.pc,a=e.database,n=e.mute;console.log("pc in USerView",t);var r=Object.values(a.UserDetail.byId).find(function(e){return e.userId===t.user.id});return t.user?c.a.createElement("div",{className:"pc-each-screen"},c.a.createElement("video",{muted:n,id:"video-".concat(t.user.id),playsInline:!0,poster:r?"".concat(te,"/user/").concat(1e7+parseInt(t.user.id,10),"/profile/").concat(r.image):null,autoPlay:!0,style:{height:90,width:90,background:"black",borderRadius:20}}),c.a.createElement("div",{style:{position:"absolute",marginTop:20,marginLeft:20,width:100,height:100}},c.a.createElement("div",null,c.a.createElement("span",{style:{color:"white"}},t.online?"You":"".concat(t.user.firstName[0].toUpperCase()).concat(t.user.lastName[0].toUpperCase()))),c.a.createElement("div",null,c.a.createElement("span",{style:{color:"yellow"}},t.iceCandidateStatus)))):null},ma=function(e){var t=e.webRtc,a=e.account,n=e.database,r=t.localCallHistory.chatHistory,s=r.type,o=r.connectionId,i="user"===s?t.mainStreamId:n.Board.byId[o].activeStatus,l=Object.values(t.peerConnections).filter(function(e){return"disconnected"!==e.iceCandidateStatus}).map(function(e){return c.a.createElement(da,{pc:e,key:e.user.id,database:n,mute:i===e.user.id})});return"user"===t.localCallHistory.chatHistory.type?[c.a.createElement(da,{pc:a,mute:!0,key:a.user.id,database:n})]:[].concat(Object(h.a)(l),[c.a.createElement(da,{mute:!0,pc:a,key:a.user.id,database:n})])},pa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"pc-user-screens"},c.a.createElement(ma,this.props))}}]),t}(c.a.Component),fa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickChatBox=function(e,t){var n=a.props,r=n.updateWebRtc,c=n.webRtc;t&&(r("connectionId",c.localCallHistory.chatHistory.connectionId),r("chatHistory",c.localCallHistory.chatHistory)),a.setState({showChatBox:e,showChatList:!1})},a.handleClickChatList=function(){var e=a.state.showChatList;a.setState({showChatList:!e})},a.callReject=function(){var e=a.props,t=e.closeHandler,n=e.change;t(),n("history")},a.state={showChatList:!1,showChatBox:null,unMessageCount:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.webRtc,t=ct(this.props).find(function(t){return t.connectionId===e.localCallHistory.chatHistory.connectionId});this.setState({unMessageCount:t})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.webRtc,a=e.database,n=e.account;if("board"===t.chatHistory.type&&t.localCallHistory.chatHistory&&a.Board.byId[t.localCallHistory.chatHistory.connectionId].activeStatus===n.user.id){var r=document.getElementById("video-mentor");r&&(r.srcObject=t.streams[n.user.id].stream[0])}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.webRtc,a=ct(e).find(function(e){return e.connectionId===t.localCallHistory.chatHistory.connectionId});this.setState({unMessageCount:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.style,n=t.webRtc,r=t.database,s=t.toggleMaximize,o=t.minimize,i=(t.remoteCallEndMinimizer,n.localCallHistory.chatHistory),l=i.user,u=i.type,d=this.state,m=d.showChatBox,p=d.showChatList,f=d.unMessageCount;return c.a.createElement("div",{className:"call-screen",style:a},p&&c.a.createElement(ca,Object.assign({onClose:this.handleClickChatList,onClickItem:this.handleClickChatBox},this.props)),m&&c.a.createElement(sa,Object.assign({onClose:this.handleClickChatBox},this.props)),c.a.createElement("div",{className:"top"},c.a.createElement(de.b,{minimal:!0,intent:"default",icon:"menu",onClick:this.handleClickChatList}),c.a.createElement("div",{className:"op-name"},"user"===u?"".concat(l.user.firstName," ").concat(l.user.lastName):r.Board.byId[n.localCallHistory.chatHistory.connectionId].name),c.a.createElement(de.b,{minimal:!0,onClick:function(){return e.handleClickChatBox(n.showCommunication,!0)}},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement($t.e,{size:18}),0!==f.unSeenNo&&c.a.createElement(Da,{number:f.unSeenNo,size:10,top:-5})))),c.a.createElement("div",{className:"video-container"},c.a.createElement("div",{className:"pc-maxmin-btn"},c.a.createElement(de.b,{onClick:s,className:"pc-control-btn"},c.a.createElement(ra.a,{size:25}))),c.a.createElement(pa,this.props),c.a.createElement(ua,this.props)),!o&&c.a.createElement(la,Object.assign({toggleMaximize:s},this.props)),c.a.createElement("div",{className:"pc-record-container"},n.recordedBlobs.map(function(e){return Object.values(e)[0]})))}}]),t}(c.a.Component),ba=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.webRtc.isLive?c.a.createElement(fa,this.props):c.a.createElement(na,this.props)}}]),t}(c.a.Component),ha=a(172),va=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.callAccept=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.answerHandler,c=n.apis,s=n.updateWebRtc,o=n.webRtc,e.next=3,ot(t);case 3:return i=e.sent,s("isCallUpgraded",!1),s("isLive",!0),e.next=8,s("localCallHistory",Object(g.a)({},o.localCallHistory,{stream:i,mediaType:t,callType:"Incoming"}));case 8:return e.next=10,r(c,i);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.callReject=Object(T.a)(M.a.mark(function e(){var t,n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.change,r=t.updateWebRtc,(0,t.closeHandler)(),r("showIncommingCall",!1),n("history");case 4:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.style,n=t.webRtc,r=t.database,s="user"===n.localCallHistory.chatHistory.type;return c.a.createElement("div",{style:a,className:"incoming-call-screen"},n.showIncommingCall&&c.a.createElement(Jt,null),c.a.createElement("div",{className:"person-icon-container",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignSelf:"center",flexDirection:"column"}},c.a.createElement("div",{style:{width:"100%",display:"flex",alignSelf:"center",justifyContent:"center",margin:5}},c.a.createElement("span",{style:{fontSize:20,fontWeight:"bold",color:"white"}},"user"===n.localCallHistory.chatHistory.type?"".concat(r.User.byId[n.showCommunication].firstName," ").concat(r.User.byId[n.showCommunication].lastName):r.Board.byId[n.showCommunication].name)),c.a.createElement("div",{className:"img-container"},(s?r.UserDetail.byId[n.localCallHistory.chatHistory.broadCastId]&&r.UserDetail.byId[n.localCallHistory.chatHistory.broadCastId].image:[r.Board.byId[n.localCallHistory.chatHistory.broadCastId]].image)?c.a.createElement(ea,{imgUrl:"".concat(te,"/user/").concat(1e7+parseInt(n.localCallHistory.chatHistory.broadCastId,10),"/profile/").concat(Object.values(r.UserDetail.byId).find(function(e){return e.userId===n.localCallHistory.chatHistory.broadCastId}).image)}):c.a.createElement(ea,{imgUrl:ha})),c.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center",margin:5}},c.a.createElement("span",{style:{fontSize:15,fontWeight:"bold",color:"#757575"}},n.currentOffer?"Incoming ".concat(n.currentOffer.callType," call..."):null)),c.a.createElement("div",{className:"controllers"},c.a.createElement(de.b,{icon:"phone",onClick:function(){return e.callAccept("audio")},large:!0,intent:"success"}),c.a.createElement(de.b,{icon:"mobile-video",onClick:function(){return e.callAccept("video")},large:!0,intent:"success"}),c.a.createElement(de.b,{icon:"cross",onClick:this.callReject,large:!0,intent:"danger"})))))}}]),t}(c.a.Component),ga=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={minimize:!1,apis:null,maximize:!1},a.remoteCallEndMinimizer=function(){a.setState({maximize:!1})},a.toggleMinMax=function(){a.setState({minimize:!1})},a.cutWindow=function(){var e=a.props.updateWebRtc;a.setState({maximize:!1}),e("showCommunication",!1),e("showIncommingCall",!1)},a.switchScreen=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.updateWebRtc,n.webRtc.isLive,r("communicationContainer",t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.minimizeCommunication=function(){a.setState({minimize:!0,maximize:!1})},a.maximize=function(){var e=a.state.maximize;a.setState({maximize:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,se.scope("Mentee");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("error in fetching apis in communication");case 10:return e.next=12,this.setState({apis:t});case 12:Mt(this.props,this.state,this.remoteCallEndMinimizer);case 13:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.minimize,a=e.apis,n=e.maximize,r="75%";n&&(r="100%"),t&&(r="31px");var s,o,i=this.props,l=i.webRtc,u=i.updateWebRtc;return(l.showIncommingCall||l.showCommunication)&&c.a.createElement("div",{className:n?"communicate pc-com-maximum":"communicate",style:{height:r,animationName:t?"slideDown":"slideUp",animationDuration:"0.3s"}},c.a.createElement("div",{className:"header",style:{background:"#154155",cursor:"pointer"}},c.a.createElement("div",{className:"win-title"},"Messaging"),c.a.createElement("div",{className:"control-icons"},c.a.createElement("div",null,t?c.a.createElement(Z.a,{iconSize:20,icon:"expand-all",style:{cursor:"pointer"},onClick:this.toggleMinMax}):c.a.createElement(Z.a,{iconSize:20,icon:"minus",style:{cursor:"pointer"},onClick:this.minimizeCommunication}),c.a.createElement(Z.a,{iconSize:20,icon:"small-cross",style:{cursor:"pointer"},onClick:this.cutWindow})))),c.a.createElement("div",{className:"content"},!l.showIncommingCall&&l.showCommunication&&"list"===l.communicationContainer&&c.a.createElement(st,Object.assign({change:this.switchScreen,apis:a},this.props)),!l.showIncommingCall&&"history"===l.communicationContainer&&a&&c.a.createElement(Xt,Object.assign({change:this.switchScreen,_callHandler:Ut(this.props,this.state),apis:a},this.props)),!l.showIncommingCall&&"connecting"===l.communicationContainer&&l.localCallHistory.chatHistory&&c.a.createElement(ba,Object.assign({toggleMaximize:this.maximize,minimize:t,remoteCallEndMinimizer:this.remoteCallEndMinimizer,change:this.switchScreen,updateWebRtc:u,closeHandler:kt(this.props,this.state,a),_callHandler:Ut(this.props,this.state),apis:a},this.props)),l.showIncommingCall&&l.localCallHistory.chatHistory&&c.a.createElement(va,Object.assign({change:this.switchScreen,webRtc:l,answerHandler:(s=this.props,o=this.state,function(){var e=Object(T.a)(M.a.mark(function e(t,a){var n,r,c,i,l,u,d,m,p,f,b,h,g,y,E,C;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=D.getState(),r=n.webRtc,c=s.account,i=s.updateWebRtc,s.database,l=r.currentOffer,u=l.broadCastId,d=l.broadCastType,m=l.connectionId,i("liveIncomingCall",!1),e.next=8,Tt(u,s,o);case 8:return r=D.getState().webRtc,i("streams",Object(v.a)({},c.user.id,{stream:[a]})),i("outGoingCallType",a),i("showIncommingCall",!1),i("showCommunication",u),i("connectionId",m),i("communicationContainer","connecting"),i("showOutgoingCall",!0),p=r.pendingOffers,f=Object.values(r.peerConnections),b=f.filter(function(e){return p.find(function(t){return t.uid===e.user.id})}),h=b.map(function(e){return e.pc.createAnswer(p.find(function(t){return t.uid===e.user.id}).offer,a)}),e.next=22,Promise.all(h);case 22:return e.sent.forEach(function(e,a){return t.createAnswer({answerDetail:{answer:e,uid:c.user.id,broadCastId:u,broadCastType:d,callType:r.localCallHistory.mediaType},userList:[{userId:b[a].user.id}]})}),g=r.pendingOffers,y=Object.values(r.peerConnections),E=y.filter(function(e){return!g.find(function(t){return t.uid===e.user.id})}),C=E.map(function(e){return e.pc.createOffer(a)}),e.next=30,Promise.all(C);case 30:e.sent,i("isLive",!0),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(0),console.error("error in create answer",e.t0);case 37:case"end":return e.stop()}},e,null,[[0,34]])}));return function(t,a){return e.apply(this,arguments)}}()),apis:a,updateWebRtc:u,closeHandler:kt(this.props,this.state,a)},this.props))))}}]),t}(c.a.Component),ya=Object(p.b)(function(e){return e},Object(g.a)({},n))(ga),Ea=a(198),Ca={left:"50%",top:"50%",position:"absolute"},Oa=function(){return c.a.createElement(Ea.ScaleLoader,{css:Ca,sizeUnit:"10px",size:1,color:"#36D7B7",loading:!0})},ja=a(331),wa=function(e){var t=e.data;if(!t.fieldtype)return null;switch(t.fieldtype){case"input":return c.a.createElement(ve,e);case"button":return c.a.createElement(ye,e);case"tagInput":return c.a.createElement(Oe,e);case"select":return c.a.createElement(Ie,e);case"date":return c.a.createElement(xe,e);case"textarea":return c.a.createElement(De,e);case"image":return c.a.createElement(He,e);default:return null}},Ia=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={error:null,loading:!1,message:null,fields:{},data:[]},a.componentWillMount=function(){var e=a.props.data,t=e.filter(function(e){if("input"===e.fieldtype||"select"===e.fieldtype||"tagInput"===e.fieldtype||"textarea"===e.fieldtype||"date"===e.fieldtype)return e}).map(function(e){return"tagInput"===e.fieldtype?Object(v.a)({},e.id,e.val?e.val:[]):"date"===e.fieldtype?Object(v.a)({},e.id,e.val?e.val:new Date):"image"===e.fieldtype?Object(v.a)({},e.id,e.val?e.val:{}):Object(v.a)({},e.id,e.val?e.val:"")}).reduce(function(e,t){return e[Object.keys(t)[0]]=Object.values(t)[0],e},{});a.setState({fields:t,data:e})},a.onChange=function(e,t){var n=a.state.fields;a.setState({fields:Object(g.a)({},n,Object(v.a)({},e,t))})},a.onSubmit=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.props.callback,r=a.state,c=r.fields,s=r.data,o=!1,s.map(function(e){return e.required&&0===c[e.id].replace(/\s/g,"").length&&(o=!0,a.setState({error:"Fill the required field(*)"})),e}),!o){e.next=7;break}return e.abrupt("return");case 7:return a.setState({loading:!0}),e.next=10,n(c);case 10:200===(i=e.sent).response?a.setState({loading:!1,error:null,message:i.message}):a.setState({loading:!1,error:i.error});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.fields;return c.a.createElement("form",{onSubmit:this.onSubmit},c.a.createElement(ja.a,{fill:!0},a.map(function(t,a){return c.a.createElement(wa,{key:a,data:t,onChange:e.onChange,onSubmit:e.onSubmit,value:n[t.id],state:e.state})})))}}]),t}(c.a.Component),ka=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={deletePopover:!1},a.toggleDeletePopup=function(e){var t=a.state.deletePopover,n=a.props.onDelete;a.setState({deletePopover:!t}),"confirm"===e&&n()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.onClose,n=e.structure,r=e.callback,s=e.del,o=this.state.deletePopover;return c.a.createElement(ue.a,{isOpen:t,onClose:a},c.a.createElement("div",{className:"popover-form"},c.a.createElement("div",{className:"top"},"Enter the Credentials"),c.a.createElement(Me,{data:n,callback:r}),s&&c.a.createElement("div",{className:"pc-pop-delete-button"},c.a.createElement(Te,{action:this.toggleDeletePopup,isOpen:o,name:" "}),c.a.createElement(de.b,{onClick:this.toggleDeletePopup,minimal:!0,text:"Delete",icon:"delete",large:!0,fill:!0}))))}}]),t}(c.a.Component);ka.defaultProps={onDelete:null,del:null};var Na=ka,xa=a(97),Sa=function(e,t){return c.a.createElement(V.a,null,c.a.createElement(K.a,{icon:"edit",text:"Edit",onClick:function(){return e("edit",t)}}),c.a.createElement(V.a.Divider,null),c.a.createElement(K.a,{icon:"delete",intent:"danger",text:"Delete",onClick:function(){return e("delete",t)}}))},Aa=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onMore,a=e.id;return c.a.createElement(xa.a,{content:Sa(t,a),position:"right",className:"more-button"},c.a.createElement(de.b,{icon:"more",minimal:!0}))}}]),t}(c.a.Component),Da=function(e){var t=e.number,a=e.size,n=e.top,r=t;return t>9&&(r="9+"),c.a.createElement("span",{style:{position:"absolute",left:a,top:n||4,textAlign:"center",padding:"2px",borderRadius:"50%",backgroundColor:"#e92821",color:"white",fontSize:"10px",width:"15px",height:"15px"}},r)},Ba=a(62),Ra=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.getNotification=function(e){var t,n,r=a.props,s=r.database,o=r.account;switch(e.type){case"user":t="user/".concat(s.User.byId[e.typeId].slug);var i=Object.values(s.UserDetail.byId).find(function(t){return e.typeId===t.userId}),l=i&&i.image?"".concat(te,"/user/").concat(1e7+parseInt(e.typeId,10),"/profile/").concat(i.image):Ba;n=c.a.createElement("div",{className:"pc-noti-img"},c.a.createElement(ea,{imgUrl:l}));break;case"board":t="class-work/".concat(s.User.byId[o.user.id].slug,"/").concat(e.boardId),n=c.a.createElement("div",{className:"pc-noti-icon"},c.a.createElement(Z.a,{icon:"application",iconSize:40}));break;default:t=""}return c.a.createElement(Q.a,{to:"/".concat(t),className:"pc-noti-wrapper",key:e.id},n,c.a.createElement("div",{className:"pc-noti-body"},c.a.createElement("p",{className:"pc-noti-desc"},e.body),c.a.createElement("p",{className:"pc-ago-date"},le()(e.timeStamp).fromNow())))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.database,a=Object.values(t.Notification.byId).sort(at);return c.a.createElement("div",{className:"notification-list"},0===a.length&&c.a.createElement("div",{className:"pc-no-notis"},c.a.createElement("p",null,"You do not have any notifications at the moment.")),a.map(function(t){return e.getNotification(t)}))}}]),t}(c.a.Component),Ha=Object(p.b)(function(e){return e})(Ra),Pa=function(e,t){var a=t.database,n=[];return Object.values(a.NotificationReadStatus.byId).forEach(function(t){t.notifId===e&&n.push(t)}),n},Ma=function(e){var t=e.database,a=e.account;if(t.Notification.allIds.length>0){var n,r=Object.values(t.Notification.byId).map(function(t){return Object(g.a)({},t,{seenStatus:Pa(t.id,e)})}),c=r.slice().reverse(),s=c.findIndex(function(e){return e.seenStatus.find(function(e){return e.userId===a.user.id})});return n=-1===s?r.length:s,{lastNotifId:c[0].id,unSeenNo:n}}return{}},Ta=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={drawerOpen:!1,notiNo:null,lastNotifId:null},a.onDrawerToggle=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.drawerOpen,r=t.lastNotifId,c=t.notiNo,s=a.props,o=s.apis,i=s.account,l=s.addDatabaseSchema,a.setState({drawerOpen:!n}),!(c>0)){e.next=14;break}return e.prev=4,e.next=7,o.addNotificationReadStatus({notifId:r,userId:i.user.id,status:1,timeStamp:Date.now()});case 7:u=e.sent,l("NotificationReadStatus",{id:u,notifId:r,userId:i.user.id,status:1,timeStamp:Date.now()}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("error in mark noti read",e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Ma(this.props);this.setState({notiNo:e.unSeenNo,lastNotifId:e.lastNotifId})}},{key:"componentWillReceiveProps",value:function(e){var t=Ma(e);this.setState({notiNo:t.unSeenNo,lastNotifId:t.lastNotifId})}},{key:"render",value:function(){var e=this.state,t=e.drawerOpen,a=e.notiNo,n=this.props,r=n.apis,s=n.account;return c.a.createElement(Q.a,{to:"#",onClick:this.onDrawerToggle},c.a.createElement("div",{className:"navbar-item"},c.a.createElement(Z.a,{icon:"notifications",iconSize:Z.a.SIZE_LARGE}),a>0&&c.a.createElement(Da,{number:a,size:20}),c.a.createElement(oe.a,{isOpen:t,onClose:this.onDrawerToggle,size:oe.a.SIZE_SMALL,title:"Notifications",transitionDuration:200,hasBackdrop:!1},c.a.createElement(Ha,{account:s,apis:r}))))}}]),t}(c.a.Component),Ua=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={unReadMessage:0},a.showMessage=function(){(0,a.props.updateWebRtc)("showCommunication",1)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=ct(this.props).reduce(function(e,t){return e+=t.unSeenNo},0);this.setState({unReadMessage:e})}},{key:"componentWillReceiveProps",value:function(e){var t=ct(e).reduce(function(e,t){return e+=t.unSeenNo},0);this.setState({unReadMessage:t})}},{key:"render",value:function(){var e=this.state.unReadMessage;return c.a.createElement(Q.a,{to:"#",onClick:this.showMessage},c.a.createElement("div",{className:"navbar-item"},c.a.createElement(Z.a,{icon:"chat",iconSize:Z.a.SIZE_LARGE}),0!==e&&c.a.createElement(Da,{number:e,size:25})))}}]),t}(c.a.Component),La=function(e){var t=e.account,a=e.apis;return c.a.createElement("div",{className:"pc-drop-menu"},c.a.createElement(Q.a,{to:"/",className:"pc-drop-menu-link"},"Home"),t.user&&c.a.createElement(Q.a,{to:"/".concat(t.user.slug,"/profile"),className:"pc-drop-menu-link"},"Profile"),c.a.createElement(Q.a,{to:"/archive",className:"pc-drop-menu-link"},"Archive"),c.a.createElement(Q.a,{to:"#",className:"pc-drop-menu-link"},"Get Help"),c.a.createElement(Q.a,{to:"/take-a-tour",className:"pc-drop-menu-link"},"Take a Tour"),t.sessionId?c.a.createElement(Q.a,{to:"#",onClick:Object(T.a)(M.a.mark(function e(){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.logout();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),className:"pc-drop-menu-link"},"Logout"):c.a.createElement(Q.a,{to:"/login",className:"pc-drop-menu-link"},"Login"))},Wa=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.smallScreenToggle,n=e.account,r=e.pcLogo,s=e.apis;return c.a.createElement(oe.a,{className:"pc-dropdown-drawer",usePortal:!0,isOpen:t,onClose:a,size:"60%",position:"left",lazy:!0,title:c.a.createElement("img",{alt:"Proper Class Logo",style:{objectFit:"contain",width:"100%"},src:r}),transitionDuration:200},c.a.createElement(La,{account:n,apis:s}))}}]),t}(c.a.Component),za=a(62),Ya=function(e){var t=e.content,a=e.profilePic,n=e.navigate;return c.a.createElement(Q.a,{to:"#",className:"profileIcon"===n.mainNav.name?"active":null},c.a.createElement(xa.a,{content:t,minimal:!0,position:pe.a.BOTTOM},c.a.createElement("div",{className:"navbar-item pc-dashboard-icon"},c.a.createElement("div",{className:"pc-dot"}),c.a.createElement("div",{className:"pc-dashboard"},"dashboard"),c.a.createElement("div",{className:"profile-icon"},c.a.createElement(ea,{imgUrl:a||za})))))},Ga=a(173),qa=function(e,t){return c.a.createElement(V.a,null,c.a.createElement(K.a,{icon:"dashboard",active:!0,intent:J.a.PRIMARY,text:"Goto Dashboard",onClick:e}),c.a.createElement(K.a,{icon:"log-out",intent:J.a.DANGER,text:"Logout",onClick:function(){return t.logout()}}))},Fa=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={apis:{},redirectDashboard:!1,smallScreen:!1},a.screenResize=function(e){},a.onClickHandler=function(){a.setState({redirectDashboard:!0})},a.toggleSmallScreen=function(){var e=a.state.smallScreen;a.setState({smallScreen:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.scope("Mentee");case 2:t=e.sent,this.setState({apis:t}),window.addEventListener("resize",this.screenResize);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props,a=t.account,n=t.database,r=t.navigate,s=t.className,o=t.updateWebRtc;Object.values(n.UserDetail.byId).map(function(t){a.user&&a.user.id===t.userId&&(e=t.image?"".concat(te,"/user/").concat(1e7+parseInt(a.user.id,10),"/profile/").concat(t.image):null)});var i=this.state,l=i.apis,u=i.redirectDashboard,d=i.smallScreen;return c.a.createElement("div",{className:"navbar ".concat(s)},u&&c.a.createElement(F.a,{exact:!0,push:!0,to:"/".concat(a.user.slug,"/profile")}),c.a.createElement("div",{className:"navbar-left"},c.a.createElement(Q.a,{to:"/",className:"properClass"===r.mainNav.name?"active":null},c.a.createElement("div",{className:"navbar-item",style:{padding:"0px 5px"}},c.a.createElement("img",{width:200,alt:"Proper Class Logo",src:Ga}))),c.a.createElement(Q.a,{to:"/archive",className:"archive"===r.mainNav.name?"active":null},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("span",null,"Archive"))),c.a.createElement(Q.a,{to:"#",className:"help"===r.mainNav?"active":null},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("span",null,"Get Help"))),c.a.createElement(Q.a,{to:"/take-a-tour",className:"tour"===r.mainNav.name?"active":null},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("span",null,"Take a Tour")))),c.a.createElement("div",{className:"navbar-more-container"},c.a.createElement(Z.a,{icon:"menu",className:"more-icon",onClick:this.toggleSmallScreen,iconSize:25,color:"#666"}),c.a.createElement(Wa,{smallScreenToggle:this.toggleSmallScreen,open:d,account:a,apis:l,pcLogo:Ga})),c.a.createElement("div",{className:"navbar-right"},a.user&&c.a.createElement(Ua,{account:a,database:n,updateWebRtc:o}),a.user&&c.a.createElement(Ta,Object.assign({},this.props,{apis:l})),a.user?c.a.createElement(Ya,{navigate:r,profilePic:e,content:qa(this.onClickHandler,l)}):c.a.createElement(Q.a,{to:"/login",className:"login"===r.mainNav.name?"active":null},c.a.createElement("div",{className:"navbar-item"},c.a.createElement("span",null,"Login")))))}}]),t}(r.Component);Fa.defaultProps={className:""};var Qa=Object(p.b)(function(e){return e},Object(g.a)({},n))(Fa),Va=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"pc-logo"},c.a.createElement("span",null,"Proper Class")),c.a.createElement("div",{className:"left-right-container"},c.a.createElement("div",{className:"footer-left"},c.a.createElement("div",{className:"foot-left-one"},c.a.createElement("div",{className:"one-content"},c.a.createElement(Q.a,{to:"/about",className:"pc-foot-link"},c.a.createElement("span",null,"About Us")),c.a.createElement(Q.a,{to:"/career",className:"pc-foot-link"},c.a.createElement("span",null,"Careers")),c.a.createElement(Q.a,{to:"/support",className:"pc-foot-link"},c.a.createElement("span",null,"Support")))),c.a.createElement("div",{className:"foot-left-one"},c.a.createElement("div",{className:"one-content"},c.a.createElement(Q.a,{to:"/business",className:"pc-foot-link"},c.a.createElement("span",null,"Business Enquiry")),c.a.createElement(Q.a,{to:"/services",className:"pc-foot-link"},c.a.createElement("span",null,"Software Services")),c.a.createElement(Q.a,{to:"/privacy-policy",className:"pc-foot-link"},c.a.createElement("span",null,"Privacy Policy"))))),c.a.createElement("div",{className:"footer-right"},c.a.createElement("div",{className:"right-content"},c.a.createElement(Q.a,{to:"/terms-and-conditions",className:"pc-foot-link"},c.a.createElement("span",null,"Terms and Conditions")),c.a.createElement(Q.a,{to:"/report",className:"pc-foot-link"},c.a.createElement("span",null,"Report"))))),c.a.createElement("div",{className:"pc-cr-container"},c.a.createElement("p",null,"\xa9 2015 - 2019 Proper Class Inc.")))}}]),t}(c.a.Component),Ka=function(e){var t=e.sendMessage,a=e.connectMentor;switch(e.type){case"connected":return c.a.createElement("div",{className:"con-option"},c.a.createElement(de.b,{text:"Connected",large:!0,fill:!0,intent:"primary"}),c.a.createElement(de.b,{text:"Message",large:!0,fill:!0,onClick:t}));case"pending":return c.a.createElement(de.b,{text:"Pending",large:!0,fill:!0,icon:"follower"});case"incoming":return c.a.createElement(de.b,{text:"Accept",large:!0,fill:!0,onClick:function(){return a("accept")},intent:"success",icon:"following"});default:return c.a.createElement(de.b,{onClick:function(){return a("request")},text:"Connect",large:!0,fill:!0,intent:"primary",icon:"new-person"})}},Ja=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={type:""},a.sendMessage=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.updateWebRtc,r=t.details,c=t.database,s=t.account,o=Object.values(c.UserConnection.byId).find(function(e){return e.mId===r.id||e.userId===r.id}),n("showCommunication",r.id),n("connectionId",o.id),n("peerType","user"),n("communicationContainer","history"),i=o.userId===s.user.id?c.User.byId[o.mId]:c.User.byId[o.userId],n("chatHistory",{type:"user",user:{user:i},connectionId:o.id});case 8:case"end":return e.stop()}},e)})),a.connectMentor=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d,m,p,f;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.apis,c=n.account,s=n.details,o=n.database,i=n.addDatabaseSchema,l=n.updateDatabaseSchema,u=c.user.id,d=s.id,m=null,o.UserConnection.allIds.map(function(e){var t=o.UserConnection.byId[e];u!==t.userId&&u!==t.mId||d!==t.userId&&d!==t.mId||(m=t)}),e.t0=t,e.next="request"===e.t0?8:"accept"===e.t0?21:32;break;case 8:return p={userId:c.user.id,mId:s.id,timeStamp:Date.now(),status:"pending"},e.prev=9,e.next=12,r.connectUser(p);case 12:f=e.sent,i("UserConnection",Object(g.a)({id:f},p)),a.setState({type:"pending"}),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(9),console.log("Error =>",e.t1);case 20:return e.abrupt("break",32);case 21:return e.prev=21,e.next=24,r.updateUserConnection([{status:"connected",mId:m.mId,userId:m.userId},{id:m.id}]);case 24:l("UserConnection",{id:m.id,status:"connected"}),a.setState({type:"connected"}),e.next=31;break;case 28:e.prev=28,e.t2=e.catch(21),console.log("Error =>",e.t2);case 31:return e.abrupt("break",32);case 32:case"end":return e.stop()}},e,null,[[9,17],[21,28]])}));return function(t){return e.apply(this,arguments)}}(),a.checkConnection=function(e){var t=e.database,n=e.details,r=e.account.user.id,c=n.id,s="";t.UserConnection.allIds.map(function(e){var a=t.UserConnection.byId[e];if((r===a.userId||r===a.mId)&&(c===a.userId||c===a.mId)){if("connected"===a.status)return void(s="connected");s=r===a.userId?"pending":"incoming"}}),a.setState({type:s})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkConnection(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.checkConnection(e)}},{key:"render",value:function(){var e=this.state.type;return c.a.createElement("div",{className:"con"},Ka({sendMessage:this.sendMessage,connectMentor:this.connectMentor,type:e}))}}]),t}(c.a.Component),Za=a(334),Xa=function(e){var t=e.data;return c.a.createElement("a",{href:t.link?t.link:"#",style:{color:"black",textDecoration:"none"},rel:"noopener noreferrer",target:"_blank"},c.a.createElement(Za.a,{elevation:2,interactive:!0,style:{marginRight:10,marginBottom:10,display:"flex",flexDirection:"row",padding:"2px",position:"relative"}},t.attachment&&c.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},c.a.createElement("img",{height:50,alt:"portal identity",src:"".concat(te,"/user/").concat(1e7+parseInt(t.userId,10),"/profile/").concat(t.attachment)})),c.a.createElement("div",{style:{padding:"3px"}},c.a.createElement("span",null,c.a.createElement("strong",null,t.title)),c.a.createElement("br",null),c.a.createElement("span",null,t.description),c.a.createElement("br",null))))},_a=a(102),$a=a(174),en=a(175),tn=a(176),an=function(e){function t(e){var a;return Object(i.a)(this,t),(0,(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).props.updateNav)({schema:"mainNav",data:{name:""}}),a.state={apis:{},loading:!0,data:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.match,n=t.account,r={},e.prev=2,!n.user){e.next=7;break}return e.next=6,se.scope("Mentee");case 6:r=e.sent;case 7:return e.next=9,L.a.get("".concat(te,"/web/get-user?userId=").concat(a.params.userId));case 9:c=e.sent,this.setState({data:c.data,apis:r,loading:!1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log("Error",e.t0);case 16:case"end":return e.stop()}},e,this,[[2,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.props.match,t.match.params.userId===a.params.userId){e.next=13;break}return this.setState({loading:!0}),e.prev=3,e.next=6,L.a.get("".concat(te,"/web/get-user?userId=").concat(t.match.params.userId));case 6:n=e.sent,this.setState({data:n.data,loading:!1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("Error",e.t0);case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.account,a=e.database,n=e.updateWebRtc,r=e.addDatabaseSchema,s=e.updateDatabaseSchema,o=this.state,i=o.loading,l=o.data;if(i)return c.a.createElement(Oa,null);var u={};Object.values(a.UserDetail.byId).map(function(e){t.user&&t.user.id===e.userId&&(u=e)});var d=l.userDetail,m=l.user,p=this.state.apis,f=l.userEducation,b=l.userWorkExperience,h=l.userPortal,v=l.userDetail.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(l.user.id,10),"/profile/").concat(l.userDetail.coverImage):tn,g=l.userDetail.coverEdit&&"".concat(te,"/user/").concat(1e7+parseInt(l.user.id,10),"/profile/").concat(l.userDetail.coverEdit);return c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"public-profile"},c.a.createElement("div",{className:"cover-pic"},g?c.a.createElement("img",{alt:"cover profile of the user",src:g}):c.a.createElement("img",{alt:"cover profile of the user",src:v})),c.a.createElement("div",{className:"profilePic"},c.a.createElement(ea,{imgUrl:d.image?"".concat(te,"/user/").concat(1e7+parseInt(m.id,10),"/profile/").concat(d.image):_a})),c.a.createElement("div",{className:"top-details"},c.a.createElement("div",{className:"desc"},c.a.createElement("span",{className:"name"},m.middleName?"".concat(m.firstName," ").concat(m.middleName," ").concat(m.lastName):"".concat(m.firstName," ").concat(m.lastName)),c.a.createElement("br",null),c.a.createElement(Z.a,{icon:"locate"}),c.a.createElement("span",{className:"country"}," ",d.address?d.address:"---")),t.user&&c.a.createElement("div",{className:"connect-btns"},t.user.id!==m.id&&("mentee"!==u.type||"mentee"!==d.type)&&c.a.createElement(Ja,{apis:p,updateWebRtc:n,addDatabaseSchema:r,updateDatabaseSchema:s,database:a,details:m,moreDetails:d,account:t}))),c.a.createElement("div",{className:"bio"},c.a.createElement("div",null,d.bio?c.a.createElement("p",null,d.bio):c.a.createElement("p",{style:{color:"#696969"}},"No bio added")),c.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",padding:"5px"}},h.map(function(e){return c.a.createElement(Xa,{key:e.id,data:e})}))),c.a.createElement("div",{className:"education"},c.a.createElement("p",{className:"p-top"},c.a.createElement("span",null,"Education")),c.a.createElement("div",{className:"p-edu-list"},0!==f.length?c.a.createElement("div",{className:"p-edu-list"},f.map(function(e){return c.a.createElement("div",{className:"p-edu-list-i"},c.a.createElement("img",{src:$a,alt:"school icon"}),c.a.createElement("p",null,c.a.createElement("span",{className:"p-name-i"},e.degree),c.a.createElement("br",null),c.a.createElement("span",null,e.address),c.a.createElement("br",null),c.a.createElement("span",{className:"p-timeline"},"".concat(e.startTime," - ").concat(e.endTime)),c.a.createElement("br",null)))})):c.a.createElement("div",null,c.a.createElement("span",{style:{color:"#696969"}},"No School Added")))),c.a.createElement("div",{className:"experience"},c.a.createElement("p",{className:"p-top"},c.a.createElement("span",null,"Experience")),c.a.createElement("div",{className:"p-exp-list"},0!==b.length?c.a.createElement("div",{className:"p-edu-list"},b.map(function(e){return c.a.createElement("div",{className:"p-exp-list-i"},c.a.createElement("img",{src:en,alt:"school icon"}),c.a.createElement("p",null,c.a.createElement("span",{className:"p-title-i"},e.title),c.a.createElement("br",null),c.a.createElement("span",{className:"p-company-i"},e.company),c.a.createElement("br",null),c.a.createElement("span",{className:"p-timeline"},"".concat(e.startTime," - ").concat(e.endTime)),c.a.createElement("br",null),c.a.createElement("span",null,e.summary)))})):c.a.createElement("div",null,c.a.createElement("span",{style:{color:"#696969"}},"No experience added")))),c.a.createElement("div",{className:"skills"},c.a.createElement("p",{className:"p-top"},c.a.createElement("span",null,"Skills")),c.a.createElement("div",{className:"skills-container"},0===l.userSkill.length?"No Skills Added":JSON.parse(l.userSkill[0].skill).map(function(e,t){return c.a.createElement("span",{key:t},e)})))),c.a.createElement(Va,null))}}]),t}(c.a.Component),nn=Object(p.b)(function(e){return e},Object(g.a)({},n))(an),rn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={search:"",gotKey:!1},a.searchChange=function(e){a.setState({search:e.target.value})},a.submitSearch=function(e){e.preventDefault(),0!==a.state.search.replace(/\s/g,"").length&&a.setState({gotKey:!0})},a.findMentor=function(){a.setState({search:"no-key",gotKey:!0})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.search,a=e.gotKey,n=this.props.account;return c.a.createElement("div",{className:"search-box-container"},a&&c.a.createElement(F.a,{push:!0,to:"/search/key=".concat(t)}),c.a.createElement("div",{className:"search-form"},c.a.createElement("form",null,c.a.createElement("input",{value:t,onChange:this.searchChange,placeholder:"Keyword ..."}),c.a.createElement("button",{type:"submit",onClick:this.submitSearch},"Search"))),c.a.createElement("div",{className:"pc-jumbo"},c.a.createElement("span",{className:"pc-jumbo-text"},"Start Connecting"),n.user?c.a.createElement("button",{type:"button",onClick:this.findMentor},"Find Mentor"):c.a.createElement(Q.a,{to:"/login"},c.a.createElement("button",{type:"button"},"Login"))))}}]),t}(c.a.Component),cn=Object(p.b)(function(e){return e})(rn),sn=[{id:"location",fieldtype:"select",options:[{label:"Nepal",value:"Nepal"}]},{id:"title",fieldtype:"input",placeholder:"Ex, CEO, Professor"},{id:"industry",fieldtype:"select",options:[{label:"Engineering",value:"engineering"}]},{id:"apply",text:"Apply",fieldtype:"button",type:"submit"}],on=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.apply=function(e){console.log(e)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"filter-toolbar"},c.a.createElement("div",{className:"left set"},c.a.createElement("span",{className:"filter-label"},"Filters")),c.a.createElement("div",{className:"center set"},c.a.createElement(Ia,{data:sn,callback:this.apply})),c.a.createElement("div",{className:"right set"}))}}]),t}(c.a.Component),ln=a(62),un=function(e){var t=e.item,a=t.user,n=t.userDetail,r=a.middleName?"".concat(a.firstName," ").concat(a.middleName," ").concat(a.lastName):"".concat(a.firstName," ").concat(a.lastName),s=n.image?"".concat(te,"/user/").concat(1e7+parseInt(a.id,10),"/profile/").concat(n.image):ln;return c.a.createElement("div",{className:"i-result"},c.a.createElement("div",{className:"img-con"},c.a.createElement(ea,{imgUrl:s})),c.a.createElement("div",{className:"desc-con"},c.a.createElement("p",{className:"name"},c.a.createElement(Q.a,{to:"/user/".concat(a.slug,"/")},r)),c.a.createElement("p",{className:"location"},n.address)))},dn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data;return c.a.createElement("div",{className:"result-list"},c.a.createElement("p",{className:"label"},"Showing"," ",e.length," ","results"),e.map(function(e,t){return c.a.createElement(un,{key:t,item:e})}))}}]),t}(c.a.Component),mn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,data:{},changeStyle:!1},a.fireScroll=function(e){var t=a.state.changeStyle;window.scrollY>65&&!t&&a.setState({changeStyle:!0}),window.scrollY<65&&t&&a.setState({changeStyle:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.addEventListener("scroll",this.fireScroll,{passive:!0}),t=this.props.match,e.prev=2,"no-key"===t.params.searchKey){e.next=9;break}return e.next=6,L.a.get("".concat(te,"/web/do-search?keyword=").concat(t.params.searchKey));case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,L.a.get("".concat(te,"/web/get-mentor"));case 11:a=e.sent;case 12:this.setState({data:a.data.users,loading:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),console.log("Error",e.t0);case 18:case"end":return e.stop()}},e,this,[[2,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.data,n=e.changeStyle;return t?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,{className:n?"":"pcm-nav"}),c.a.createElement("div",{className:"search-result"},c.a.createElement(on,null),c.a.createElement(dn,{data:a})),c.a.createElement(Va,null))}}]),t}(c.a.Component),pn=a(200),fn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},a.searchChange=function(e,t){a.setState(Object(v.a)({},e,t))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.data,t=[];e.map(function(e){t.push("".concat(te,"/images/slider/").concat(e))}),this.setState({data:t})}},{key:"componentDidUpdate",value:function(e){var t=this.props.data;if(t!==e.data){var a=[];t.map(function(e){a.push("".concat(te,"/images/slider/").concat(e))}),this.setState({data:t})}}},{key:"render",value:function(){var e=this.state.data;return e?c.a.createElement("div",{className:"slider-container"},c.a.createElement(pn.Carousel,{interval:5e3,showIndicators:!1,showThumbs:!1,stopOnHover:!1,transitionTime:500,showStatus:!1,infiniteLoop:!0,autoPlay:!0},e.map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("img",{src:e,alt:"slide prospectus"}))})),c.a.createElement(cn,null)):c.a.createElement("div",null)}}]),t}(r.Component),bn=a(60),hn=a(260),vn=a(261),gn=a(262),yn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.account;return c.a.createElement("div",{className:"banner-container"},c.a.createElement("div",{className:"banner-head"},c.a.createElement("p",null,"How it works")),c.a.createElement("div",{className:"banners"},c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"banner-image"},c.a.createElement("img",{src:hn,alt:"banner here"})),c.a.createElement("div",{className:"banner-content"},c.a.createElement("div",{className:"banner-title"},c.a.createElement("p",null,"Connect with the Mentors")),c.a.createElement("div",{className:"banner-description"},c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement(Q.a,{to:e.user?"#":"/register"},c.a.createElement(bn.b,{color:"#1d4354",size:22}))," ","Sign up to create your profile and own a dashboard."),c.a.createElement("p",null,c.a.createElement(bn.e,{color:"#1d4354",size:22})," ","Find mentors using the search feature as your interest."),c.a.createElement("p",null,c.a.createElement(bn.d,{color:"#1d4354",size:22})," ","Send Connection request to the mentors."))))),c.a.createElement("div",{className:"banner middle"},c.a.createElement("div",{className:"banner-content"},c.a.createElement("div",{className:"banner-title"},c.a.createElement("p",null,"Manage your profile and start project")),c.a.createElement("div",{className:"banner-description"},c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement(bn.f,{color:"#1d4354",size:22})," ","Update your profile, fill out your education and experience"),c.a.createElement("p",null,c.a.createElement(bn.a,{color:"#1d4354",size:22})," ","Create classrooms and organize the projects with tasks"),c.a.createElement("p",null,c.a.createElement($t.b,{color:"#1d4354",size:22})," ","Create content, write blogs and use drawing board as well.")))),c.a.createElement("div",{className:"banner-image"},c.a.createElement("img",{src:vn,alt:"banner here"}))),c.a.createElement("div",{className:"banner"},c.a.createElement("div",{className:"banner-image"},c.a.createElement("img",{src:gn,alt:"banner here"})),c.a.createElement("div",{className:"banner-content"},c.a.createElement("div",{className:"banner-title"},c.a.createElement("p",null,"Mentorship")),c.a.createElement("div",{className:"banner-description"},c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement($t.c,{color:"#1d4354",size:22})," ","Strengthen mentor-mentee relationship"),c.a.createElement("p",null,c.a.createElement($t.a,{color:"#1d4354",size:22})," ","Track your progress, communicate, generate report"),c.a.createElement("p",null,c.a.createElement($t.f,{color:"#1d4354",size:22})," ","Read, learn and contribute")))))))}}]),t}(r.Component),En=a(102),Cn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={portrait:!1},a.checkPortrait=function(){var e=a.props.candidate,t=e.user,n=e.userDetail,r=n.image?"".concat(te,"/user/").concat(1e7+parseInt(t.id,10),"/profile/").concat(n.image):En,c=new Image;c.onload=function(){c.height>c.width&&a.setState({portrait:!0})},c.src=r},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkPortrait()}},{key:"render",value:function(){var e=this.props.candidate,t=e.user,a=e.userDetail,n=this.state.portrait,r=a.image?"".concat(te,"/user/").concat(1e7+parseInt(t.id,10),"/profile/").concat(a.image):En;return c.a.createElement("div",{className:"popular"},c.a.createElement("div",{className:"popularImage"},c.a.createElement("img",{className:n?"portrait":"landscape",src:r,alt:"candidate ".concat(a.id)})),c.a.createElement("div",{className:"popularDesc"},c.a.createElement(Q.a,{to:"user/".concat(t.slug),className:"popularName"},"".concat(t.firstName," ").concat(t.middleName?"".concat(t.middleName," "):"").concat(t.lastName)),c.a.createElement("p",{className:"popularExpertize"},e.expertize)))}}]),t}(c.a.Component),On=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.data;return c.a.createElement("div",{className:"popularContainer"},c.a.createElement("div",{className:"popularHeader"},c.a.createElement("p",null,"Connect with the best Mentors in the Planet")),c.a.createElement("div",{className:"popularCover"},e.map(function(e){return c.a.createElement(Cn,{key:e.user.id,candidate:e})})))}}]),t}(r.Component),jn=function(e){var t=e.post;return c.a.createElement(Za.a,{className:"post-box"},c.a.createElement("div",{className:"post-header"},c.a.createElement("p",null,t.title)),c.a.createElement("div",{className:"desc-image"},c.a.createElement("div",{className:"post-desc"},c.a.createElement("p",null,t.description)),c.a.createElement("div",{className:"post-image"},c.a.createElement("img",{src:t.image,alt:t.id}))))},wn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={posts:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.posts;return c.a.createElement("div",{className:"post-container"},c.a.createElement("div",{className:"posts"},e.map(function(e){return c.a.createElement(jn,{key:e.id,post:e})})))}}]),t}(r.Component),In=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={data:{},loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,this.props.updateNav)({schema:"mainNav",data:{name:"properClass"}}),e.prev=2,e.next=5,L.a.get("".concat(te,"/web/get-index"));case 5:t=e.sent,this.setState({data:t.data,loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Eror: ",e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.data,a=e.loading,n=this.props.account;return a?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement(fn,{data:t.sliderImages}),c.a.createElement(yn,{account:n}),c.a.createElement(wn,null),c.a.createElement(On,{data:t.indexUsers}),c.a.createElement(Va,null))}}]),t}(r.Component),kn=Object(p.b)(function(e){return e},Object(g.a)({},n))(In),Nn=[{id:"email",fieldtype:"input",name:"Email",required:!0,placeholder:"Eg, alex@gmail.com"},{id:"password",fieldtype:"input",hidden:!0,required:!0,name:"Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"}},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"primary",large:"large"}],xn=function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("".concat(te,"/auth/login"),t);case 3:if(a=e.sent,n=a.data,200!==a.status||!n.token){e.next=8;break}return w("pc-session",(r=n).token),D.dispatch({type:"VERIFIED",payload:r.token}),se.reconnect(ae()),e.abrupt("return",{response:200});case 8:if(201!==a.status){e.next=10;break}return e.abrupt("return",{error:a.data});case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.message});case 15:case"end":return e.stop()}var r},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),Sn=function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.get("".concat(te,"/auth/forgot?email=").concat(t.email));case 3:if(a=e.sent,n=a.data,200!==a.status||!n.token){e.next=7;break}return e.abrupt("return",{response:200});case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.message});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),An=function(){var e=Object(T.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("".concat(te,"/auth/user-registration"),{firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,email:t.email,password:t.password});case 3:if(200!==(a=e.sent).status){e.next=6;break}return e.abrupt("return",{response:200});case 6:if(201!==a.status){e.next=8;break}return e.abrupt("return",{error:a.data});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log("error in resgistration",e.t0.response.body),e.abrupt("return",{error:e.t0.message});case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),Dn=function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("".concat(te,"/auth/change-password"),t);case 3:if(a=e.sent,n=a.data,200!==a.status||!n.token){e.next=7;break}return e.abrupt("return",{response:200});case 7:e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",{error:e.t0.message});case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),Bn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(Me,{data:Nn,callback:xn})}}]),t}(r.Component),Rn=a(201),Hn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.responseGoogle=function(){var e=Object(T.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Response from google ==>",t),e.prev=1,e.next=4,xn({loginType:"google",record:t.profileObj});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(Rn.GoogleLogin,{clientId:"326098273643-s03gfvahj2tvlkb3fvr487o5nep2fp0f.apps.googleusercontent.com",buttonText:"Sign in with google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin",className:"google-default"})}}]),t}(c.a.Component),Pn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.account;return c.a.createElement("div",{className:"o-log-or-reg"},c.a.createElement("div",{className:"log-or-reg"},c.a.createElement("div",{className:"reg-box-header"},c.a.createElement("p",null,"Login to Proper Class"),c.a.createElement(Q.a,{to:"/register"},c.a.createElement("u",null,"or create an account"))),e.user?c.a.createElement(F.a,{push:!0,to:"/".concat(e.user.slug,"/profile")}):c.a.createElement(Bn,null),c.a.createElement("div",{className:"auth-with-others"},c.a.createElement(Hn,null)),c.a.createElement("div",{className:"auth-footer"},c.a.createElement("p",null,c.a.createElement("br",null),c.a.createElement(Q.a,{to:"/forgot-password"},c.a.createElement("u",null,"Forgot your password?"))))))}}]),t}(r.Component),Mn=Object(p.b)(function(e,t){return Object(g.a)({},e,t)})(Pn),Tn=a(335),Un=a(321),Ln=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={dismiss:!1},a.onDismiss=function(){var e=a.props.onClose;a.setState({dismiss:!0}),e()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.dismiss,t=this.props,a=t.message,n=t.intent;return c.a.createElement(Tn.a,{position:pe.a.TOP},!e&&c.a.createElement(Un.a,{message:a,intent:n,onDismiss:this.onDismiss,timeout:5e5}))}}]),t}(c.a.Component),Wn=[{id:"firstName",fieldtype:"input",name:"First Name",placeholder:"",required:!0},{id:"middleName",fieldtype:"input",name:"Middle Name",placeholder:""},{id:"lastName",fieldtype:"input",name:"Last Name",placeholder:"",required:!0},{id:"email",fieldtype:"input",name:"Email",placeholder:"Eg, alex@gmail.com",required:!0},{id:"password",fieldtype:"input",hidden:!0,name:"Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"},required:!0},{id:"confirmPassword",fieldtype:"input",hidden:!0,name:"Confirm Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"},required:!0},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"primary",large:"large"}],zn=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),Yn=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})"),Gn=function(e){return zn.test(e)?"strong":Yn.test(e)?"medium":"weak"},qn=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Fn=function(e){return!!qn.test(e)},Qn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleRegistration=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props.notify,Fn(t.email)){e.next=3;break}return e.abrupt("return",{error:"Please enter a valid email"});case 3:if("weak"!==Gn(t.password)){e.next=5;break}return e.abrupt("return",{error:"Please enter a stronger password"});case 5:if(t.password===t.confirmPassword){e.next=7;break}return e.abrupt("return",{error:"Passwords don't match"});case 7:return e.next=9,An(t);case 9:return 200===(r=e.sent).response&&n(),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(Me,{data:Wn,callback:this.handleRegistration})}}]),t}(r.Component),Vn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={notify:!1},a.notify=function(){a.setState({notify:!0})},a.closeNotify=function(){a.setState({notify:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.notify;return c.a.createElement("div",{className:"o-log-or-reg"},e&&c.a.createElement(Ln,{onClose:this.closeNotify,message:"Please verify your email",intent:"success"}),c.a.createElement("div",{className:"log-or-reg"},c.a.createElement("div",{className:"reg-box-header"},c.a.createElement("p",null," Create a Proper Class Account "),c.a.createElement(Q.a,{to:"/login"},c.a.createElement("u",null,"or login to your account"))),c.a.createElement(Qn,{notify:this.notify})))}}]),t}(r.Component),Kn=a(336),Jn=function(e){var t=e.name,a=e.active,n=e.match,r=e.url;return c.a.createElement(Q.a,{to:"".concat(n.url,"/").concat(r),className:a?"sideNavElement active":"sideNavElement"},c.a.createElement("span",null,"\xa0\xa0",t))};Jn.defaultProps={active:!1};var Zn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.toggleMenu=function(){var e=a.state.open;a.setState({open:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.open,t=this.props,a=t.navigate,n=t.match;return c.a.createElement("div",{className:"pc-small-screen-sidenav"},c.a.createElement("div",null,c.a.createElement(de.b,{onClick:this.toggleMenu,className:"nav-button",text:a.sideNav.name,fill:!0,large:!0,rightIcon:e?"chevron-up":"chevron-down",alignText:"left"})),c.a.createElement(Kn.a,{isOpen:e,keepChildrenMounted:!0},c.a.createElement("div",{className:"pc-collapse-menu"},[{name:"Profile",url:"profile"},{name:"Classes",url:"classes"},{name:"Blog",url:"blog"},{name:"Settings",url:"settings"},{name:"Drawing Board",url:"drawing-board"},{name:"Connections",url:"connection"}].map(function(e){return c.a.createElement(Jn,{match:n,url:e.url,name:e.name,key:e.name,iconName:e.iconName,active:a.sideNav.name===e.name})}))))}}]),t}(c.a.Component),Xn=Object(p.b)(function(e){return e})(Zn),_n=a(67),$n=function(e){var t=e.iconName,a=e.name,n=e.active,r=e.match,s=e.url;return c.a.createElement(Q.a,{to:"".concat(r.url,"/").concat(s),className:n?"sideNavElement active":"sideNavElement"},c.a.createElement(Z.a,{icon:_n.a[t],iconSize:"15",color:"rgba(78, 185, 255, 1)",style:{verticalAlign:"baseline"}}),c.a.createElement("span",null,"\xa0\xa0",a))};$n.defaultProps={active:!1};var er=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:"profileIcon"}})}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.navigate;return c.a.createElement("div",{className:"sideNav"},[{iconName:"PERSON",name:"Profile",url:"profile"},{iconName:"PROJECTS",name:"Classes",url:"classes"},{iconName:"PARAGRAPH",name:"Blog",url:"blog"},{iconName:"COG",name:"Settings",url:"settings"},{iconName:"DRAW",name:"Drawing Board",url:"drawing-board"},{iconName:"PEOPLE",name:"Connections",url:"connection"}].map(function(e){return c.a.createElement($n,{match:t,url:e.url,name:e.name,key:e.name,iconName:e.iconName,active:a.sideNav.name===e.name})}))}}]),t}(r.Component),tr=Object(p.b)(function(e){return{navigate:e.navigate}},Object(g.a)({},n))(er),ar=[{id:"bio",fieldtype:"textarea",name:"Bio",placeholder:"Tell world about you...",required:!0},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"primary",large:"large"}],nr=[{id:"degree",fieldtype:"input",name:"Name of the degree",placeholder:"Ex, Bachelors in IT",required:!0},{id:"address",fieldtype:"input",name:"Address",required:!0,placeholder:"Address of your institute"},{id:"startTime",fieldtype:"date",name:"Start Date"},{id:"endTime",fieldtype:"date",name:"End Date"},{id:"submit",fieldtype:"button",text:"Submit",type:"submit",fill:"fill",intent:"primary",large:"large"}],rr=[{id:"title",fieldtype:"input",name:"Title",required:!0,placeholder:"Ex, Software Developer"},{id:"company",fieldtype:"input",name:"Organization",required:!0,placeholder:"Ex, Tesla"},{id:"startTime",fieldtype:"date",name:"Start Date"},{id:"endTime",fieldtype:"date",name:"End Date"},{id:"summary",fieldtype:"textarea",name:"Summary",placeholder:"Write here about what your role was..."},{id:"submit",fieldtype:"button",text:"Submit",type:"submit",fill:"fill",intent:"primary",large:"large"}],cr=[{id:"title",fieldtype:"input",name:"Title",placeholder:"Your product name",required:!0},{id:"attachment",fieldtype:"image",name:"Attachment"},{id:"description",fieldtype:"textarea",name:"Description",placeholder:"Tell about your product"},{id:"link",fieldtype:"input",name:"Link",placeholder:"https://www.google.com"},{id:"submit",fieldtype:"button",text:"Submit",type:"submit",fill:"fill",intent:"primary",large:"large"}],sr=a(174),or=function(e){var t=e.data,a=e.editPopover;return c.a.createElement("div",{className:"p-edu-list-i"},c.a.createElement("img",{src:sr,alt:"school icon"}),c.a.createElement("p",null,c.a.createElement("span",{className:"p-name-i"},t.degree),c.a.createElement("br",null),c.a.createElement("span",null,t.address),c.a.createElement("br",null),c.a.createElement("span",{className:"p-timeline"},"".concat(t.startTime," - ").concat(t.endTime))),c.a.createElement("p",null,c.a.createElement(Z.a,{icon:"edit",onClick:function(){return a(t)}})))},ir=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={educationEditPopover:!1,editObj:null},a.editPopover=function(e){nr.map(function(t){switch(t.id){case"degree":return t.val=e.degree,t;case"address":return t.val=e.address,t;case"startTime":return t.val=new Date(le()(e.startTime,"DD/MM/YYYY").valueOf()),t;case"endTime":return t.val=new Date(le()(e.endTime,"DD/MM/YYYY").valueOf()),t;default:return t}}),a.togglePopover(e)},a.addEducation=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.editObj,r=a.props,c=r.apis,s=r.account,o=r.addDatabaseSchema,i=r.updateDatabaseSchema,l=Object(g.a)({},t,{startTime:t.startTime.toLocaleString("en-IN").split(",")[0],endTime:t.endTime.toLocaleString("en-IN").split(",")[0],userId:s.user.id}),!n){e.next=8;break}return e.next=6,c.updateUserEducation([Object(g.a)({},l),{id:n.id}]);case 6:return i("UserEducation",Object(g.a)({},l,{id:n.id})),e.abrupt("return",{response:200,message:"Successfully Edited!"});case 8:return e.next=10,c.addUserEducation(l);case 10:return u=e.sent,o("UserEducation",Object(g.a)({},l,{id:u})),e.abrupt("return",{response:200,message:"Successfully Added!"});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.togglePopover=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=a.state.educationEditPopover;a.setState({editObj:e&&e.id?e:null,educationEditPopover:!t})},a.onDelete=Object(T.a)(M.a.mark(function e(){var t,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.editObj,n=a.props,r=n.apis,c=n.deleteDatabaseSchema,e.next=4,r.deleteUserEducation({id:t.id});case 4:c("UserEducation",{id:t.id}),a.togglePopover(t);case 6:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.educationEditPopover,n=t.editObj,r=this.props,s=r.database,o=r.account,i=[];return Object.values(s.UserEducation.byId).map(function(e){o.user.id===e.userId&&i.push(e)}),c.a.createElement("div",{className:"education"},c.a.createElement(Na,{del:n,onDelete:this.onDelete,isOpen:a,structure:nr,callback:this.addEducation,onClose:function(){return e.togglePopover()}}),c.a.createElement("p",{className:"p-top"},c.a.createElement("span",null,"Education"),c.a.createElement(Z.a,{icon:"plus",onClick:function(){return e.editPopover({startTime:"02/02/2018",endTime:"02/02/2018"})}})),0!==i.length?c.a.createElement("div",{className:"p-edu-list"},i.map(function(t){return c.a.createElement(or,{editPopover:e.editPopover,data:t,key:t.id})})):c.a.createElement("div",null,c.a.createElement("span",{style:{color:"#696969"}},"No School Added")))}}]),t}(c.a.Component),lr=a(175),ur=function(e){var t=e.data,a=e.editPopover;return c.a.createElement("div",{className:"p-exp-list-i"},c.a.createElement("img",{src:lr,alt:"school icon"}),c.a.createElement("p",null,c.a.createElement("span",{className:"p-title-i"},t.title),c.a.createElement("br",null),c.a.createElement("span",{className:"p-company-i"},t.company),c.a.createElement("br",null),c.a.createElement("span",{className:"p-timeline"},"".concat(t.startTime," - ").concat(t.endTime)),c.a.createElement("br",null),c.a.createElement("span",null,t.summary)),c.a.createElement("p",null,c.a.createElement(Z.a,{icon:"edit",onClick:function(){return a(t)}})))},dr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={experienceEditPopover:!1,editObj:null},a.editPopover=function(e){rr.map(function(t){switch(t.id){case"title":return t.val=e.title,t;case"company":return t.val=e.company,t;case"summary":return t.val=e.summary,t;case"startTime":return t.val=new Date(le()(e.startTime,"DD/MM/YYYY").valueOf()),t;case"endTime":return t.val=new Date(le()(e.endTime,"DD/MM/YYYY").valueOf()),t;default:return t}}),a.togglePopover(e)},a.addExperience=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.apis,c=n.account,s=n.addDatabaseSchema,o=n.updateDatabaseSchema,i=a.state.editObj,l=Object(g.a)({},t,{startTime:t.startTime.toLocaleString("en-IN").split(",")[0],endTime:t.endTime.toLocaleString("en-IN").split(",")[0],userId:c.user.id}),!i){e.next=8;break}return e.next=6,r.updateUserWorkExperience([Object(g.a)({},l),{id:i.id}]);case 6:return o("UserWorkExperience",Object(g.a)({},l,{id:i.id})),e.abrupt("return",{response:200,message:"Successfully Edited!"});case 8:return e.next=10,r.addUserWorkExperience(l);case 10:return u=e.sent,s("UserWorkExperience",Object(g.a)({},l,{id:u})),e.abrupt("return",{response:200,message:"Successfully Added!"});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.togglePopover=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=a.state.experienceEditPopover;a.setState({editObj:e&&e.id?e:null,experienceEditPopover:!t})},a.onDelete=Object(T.a)(M.a.mark(function e(){var t,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.editObj,n=a.props,r=n.apis,c=n.deleteDatabaseSchema,e.next=4,r.deleteUserWorkExperience({id:t.id});case 4:c("UserWorkExperience",{id:t.id}),a.togglePopover(t);case 6:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.experienceEditPopover,n=t.editObj,r=this.props,s=r.database,o=r.account,i=[];return Object.values(s.UserWorkExperience.byId).map(function(e){o.user.id===e.userId&&i.push(e)}),c.a.createElement("div",{className:"experience"},c.a.createElement(Na,{del:n,onDelete:this.onDelete,isOpen:a,structure:rr,callback:this.addExperience,onClose:function(){return e.togglePopover()}}),c.a.createElement("p",{className:"p-top"},c.a.createElement("span",null,"Experience"),c.a.createElement(Z.a,{icon:"plus",onClick:function(){return e.editPopover({startTime:"02/02/2018",endTime:"02/02/2018"})}})),c.a.createElement("div",{className:"p-exp-list"},0!==i.length?c.a.createElement("div",{className:"p-edu-list"},i.map(function(t){return c.a.createElement(ur,{data:t,editPopover:e.editPopover,key:t.id})})):c.a.createElement("div",null,c.a.createElement("span",{style:{color:"#696969"}},"No Experience Added"))))}}]),t}(c.a.Component),mr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={portal:!1},a.addPortal=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d,m,p;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.apis,c=n.account,s=n.database,o=n.addDatabaseSchema,i=n.updateDatabaseSchema,l=a.state.portal,u=s.UserPortal.byId[l],e.prev=3,!t.attachment.size){e.next=11;break}return(m=new FormData).append("data",JSON.stringify({token:c.sessionId,fileType:"image",content:"profile"})),m.append("file",t.attachment),e.next=10,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:m});case 10:d=e.sent;case 11:if(d&&200!==d.status){e.next=23;break}if("number"!==typeof l){e.next=17;break}return e.next=15,r.updateUserPortal([Object(g.a)({},t,{attachment:d?d.data:u.attachment,userId:c.user.id}),{id:l}]);case 15:return i("UserPortal",Object(g.a)({},t,{attachment:d?d.data:u.attachment,userId:c.user.id,id:l})),e.abrupt("return",{response:200,message:"Successfully updated"});case 17:return e.next=19,r.addUserPortal(Object(g.a)({},t,{attachment:d?d.data:"",userId:c.user.id}));case 19:return p=e.sent,o("UserPortal",Object(g.a)({},t,{attachment:d?d.data:"",userId:c.user.id,id:p})),a.setState({portal:p}),e.abrupt("return",{response:200,message:"Successfully added"});case 23:return e.abrupt("return",{response:400,error:d.data});case 26:return e.prev=26,e.t0=e.catch(3),e.abrupt("return",{response:400,error:"Something went wrong"});case 29:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),a.togglePortal=function(){var e=a.state.portal;cr[0].val="",cr[1].val=null,cr[2].val="",cr[3].val="",a.setState({portal:!e})},a.deletePortal=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.portal,n=a.props,r=n.apis,c=n.deleteDatabaseSchema,s=n.onClose,e.prev=2,e.next=5,r.deleteUserPortal({id:t});case 5:c("UserPortal",{id:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("Some Error",e.t0);case 11:s();case 12:case"end":return e.stop()}},e,null,[[2,8]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.database,a=e.account;Object.values(t.UserDetail.byId).map(function(e){a.user.id===e.userId&&(ar[0].val=e.bio)})}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.portal,a=e.database,n=e.portalOpen;if(e.portalOpen!==t){if(e.portalOpen){var r=a.UserPortal.byId[n];cr[0].val=r.title,cr[1].val={name:r.attachment},cr[2].val=r.description,cr[3].val=r.link}this.setState({portal:n})}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.onClose,n=e.callback,r=this.state.portal;return c.a.createElement(ue.a,{isOpen:t,onClose:a},c.a.createElement("div",{className:"popover-form bio"},c.a.createElement("div",{className:"top"},r?"Fill Portal Details":"Fill Bio Details"),r?c.a.createElement("div",null,c.a.createElement(Me,{data:cr,callback:this.addPortal})):c.a.createElement(Me,{data:ar,callback:n})),c.a.createElement("div",{style:{width:"100%",padding:"0px 5px"}},r?c.a.createElement(de.b,{large:!0,text:"Cancle",fill:!0,onClick:this.togglePortal}):c.a.createElement(de.b,{large:!0,text:"Add your portals",fill:!0,onClick:this.togglePortal})),c.a.createElement("div",{style:{width:"100%",padding:"2px 5px"}},"number"===typeof r&&c.a.createElement(de.b,{onClick:this.deletePortal,minimal:!0,large:!0,text:"Delete",fill:!0,intent:"danger"})))}}]),t}(c.a.Component);mr.defaultProps={portalOpen:null};var pr=mr,fr=function(e){var t=e.data,a=e.account,n=e.onClick;return c.a.createElement(Za.a,{elevation:2,interactive:!0,onClick:function(){return n(t.id)},style:{marginRight:10,marginBottom:10,display:"flex",flexDirection:"row",padding:"2px",position:"relative"}},t.attachment&&c.a.createElement("div",{style:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"}},c.a.createElement("img",{height:50,alt:"portal identity",src:"".concat(te,"/user/").concat(1e7+parseInt(a.user.id,10),"/profile/").concat(t.attachment)})),c.a.createElement("div",{style:{padding:"3px"}},c.a.createElement("span",null,c.a.createElement("strong",null,t.title)),c.a.createElement("br",null),c.a.createElement("span",null,t.description),c.a.createElement("br",null)))},br=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={bioEditPopover:!1,portalOpen:null},a.editBio=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.apis,c=n.account,s=n.updateDatabaseSchema,o=n.addDatabaseSchema,i=n.database,e.next=3,r.updateUserDetails(Object(g.a)({userId:c.user.id},t));case 3:return l=e.sent,(u=Object.values(i.UserDetail.byId).find(function(e){return e.userId===c.user.id}))?s("UserDetail",Object(g.a)({id:u.id},t)):o("UserDetail",Object(g.a)({id:l},t)),e.abrupt("return",{response:200,message:l});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.togglePopover=function(){var e=a.state.bioEditPopover;a.setState({bioEditPopover:!e,portalOpen:null})},a.togglePortal=function(e){a.setState({portalOpen:e,bioEditPopover:!0})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.bioEditPopover,n=t.portalOpen,r=this.props,s=r.database,o=r.account,i=r.apis,l=r.deleteDatabaseSchema,u=r.updateDatabaseSchema,d=r.addDatabaseSchema,m=Object.values(s.UserDetail.byId).find(function(e){return o.user.id===e.userId}),p=Object.values(s.UserPortal.byId).filter(function(e){return e.userId===o.user.id});return c.a.createElement("div",{className:"bio"},c.a.createElement("p",{className:"bio-content"},"About"),c.a.createElement("div",{className:"bio-info"},m?c.a.createElement("p",null,m.bio):c.a.createElement("p",{style:{color:"#696969"}},"No bio added"),c.a.createElement("p",{className:"edit"},c.a.createElement(Z.a,{icon:"edit",onClick:this.togglePopover}))),c.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:"5px"}},p.map(function(t){return c.a.createElement(fr,{onClick:e.togglePortal,account:o,key:t.id,data:t})})),c.a.createElement(pr,{deleteDatabaseSchema:l,updateDatabaseSchema:u,addDatabaseSchema:d,portalOpen:n,database:s,account:o,apis:i,isOpen:a,structure:ar,callback:this.editBio,onClose:function(){return e.togglePopover()}}))}}]),t}(c.a.Component),hr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){(0,a.props.onChange)(e.target.files[0])},a.onClick=function(){a.fileInputRef.current.click()},a.changeStyle=function(e){e.target.style.cursor="pointer"},a.state={},a.fileInputRef=c.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{onClick:this.onClick,onKeyDown:this.onClick,role:"button",onMouseOver:this.changeStyle,onFocus:this.changeStyle,className:"image-upload-icon"},c.a.createElement(Z.a,{icon:_n.a.PLUS,intent:J.a.PRIMARY,iconSize:20,color:"white"}),c.a.createElement("input",{ref:this.fileInputRef,type:"file",style:{display:"none"},onChange:this.onChange}))}}]),t}(c.a.Component),vr=a(341),gr=a(181),yr=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).centerBackgroundImage=function(e,t){var n=t.width,r=t.height;if(e.left>e.getScaledWidth()/2||e.top>(e.getScaledHeight()/2||e.left<e.getScaledWidth()/2+n-e.getScaledWidth())||e.top<e.getScaledHeight()/2+r-e.getScaledHeight())return e.scaleX+=.01,e.scaleY+=.01,a.centerBackgroundImage(e,t);e.scaleX+=.2,e.scaleY+=.2,t.renderAll(),a.setState({minScale:e.scaleX-.2,zoomValue:e.scaleX})},a.onZoom=function(e){var t=a.state.canvas;t._objects[0].scaleX=e,t._objects[0].scaleY=e,t.renderAll(),a.setState({canvas:t,zoomValue:e})},a.saveImage=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u,d,m,p,f,b,h,v;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.state.canvas,n=a.props,r=n.clickEditCover,c=n.account,s=n.userDetail,o=n.apis,i=n.updateDatabaseSchema,l=t.toDataURL({format:"jpeg",quality:1}),u=l.split(","),d=u[0].match(/:(.*?);/)[1],m=window.atob(u[1]),p=m.length,f=new Uint8Array(p);p;)f[p-=1]=m.charCodeAt(p);return b=new File([f],"cover-edit.jpeg",{type:d}),e.prev=10,(h=new FormData).append("data",JSON.stringify({token:c.sessionId,fileType:"image",content:"profile"})),h.append("file",b),e.next=16,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:h});case 16:if(200!==(v=e.sent).status){e.next=21;break}return e.next=20,o.updateUserDetails({userId:c.user.id,coverEdit:v.data});case 20:i("UserDetail",{id:s.id,coverEdit:v.data});case 21:r("reposition"),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),alert("Sorry your task could not be performed.");case 27:case"end":return e.stop()}},e,null,[[10,24]])}));var n=a.props,r=n.userDetail,c=n.account;return a.state={minScale:1,canvas:{},zoomValue:0,imageUrl:"".concat(te,"/user/").concat(1e7+parseInt(c.user.id,10),"/profile/").concat(r.coverImage)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.imageUrl,a=new gr.fabric.Canvas("mainCanvas",{selection:!1,backgroundColor:"white"});gr.fabric.Image.fromURL(t,function(t){t.set("originX","center").set("originY","center").set("cacheKey","Background"),a.add(t),a.renderAll(),e.centerBackgroundImage(t,a)},{hasBorders:!1,crossOrigin:"Anonymous",top:a.height/2,left:a.width/2,hasControls:!1}),this.setState({canvas:a})}},{key:"render",value:function(){var e=this.state,t=e.minScale,a=e.zoomValue;return c.a.createElement("div",{className:"cover-pic-edit-mode"},c.a.createElement("canvas",{id:"mainCanvas",height:400,width:1200}),c.a.createElement("div",{className:"edit-cover"},c.a.createElement("div",{role:"menu",tabIndex:"0",onKeyDown:function(){return!1},onClick:this.saveImage},c.a.createElement("span",{style:{padding:"3px",border:"1px solid #137cbd"}},"Save "))),c.a.createElement("div",{className:"pc-zoom-slider"},c.a.createElement(vr.a,{id:"pcZoom",labelRenderer:!1,onChange:this.onZoom,max:t+3,min:t,stepSize:.1,value:a})))}}]),t}(c.a.Component),Er=(a(270),a(176)),Cr=function(e,t){return c.a.createElement(V.a,null,c.a.createElement(K.a,{text:"Upload New",onClick:function(){return e("upload")}}),c.a.createElement(V.a.Divider,null),c.a.createElement(K.a,{disabled:!t.coverImage,text:"Reposition",onClick:function(){return e("reposition")}}))},Or=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).clickEditCover=function(){var e=Object(T.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state.drag,"reposition"!==t){e.next=4;break}return a.setState({drag:!n}),e.abrupt("return");case 4:a.fileInputRef.current.click();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.coverChange=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.account,c=n.apis,s=n.userDetail,o=n.updateDatabaseSchema,i=n.addDatabaseSchema,(l=new FormData).append("data",JSON.stringify({token:r.sessionId,fileType:"image",content:"profile"})),l.append("file",t.target.files[0]),e.prev=4,e.next=7,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:l});case 7:if(200!==(u=e.sent).status){e.next=12;break}return e.next=11,c.updateUserDetails({userId:r.user.id,coverImage:u.data,coverEdit:null});case 11:s.id?o("UserDetail",{id:s.id,coverImage:u.data,coverEdit:null}):i("UserDetail",{id:Date.now(),type:"mentee",coverImage:u.data,coverEdit:null});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}(),a.state={drag:!1},a.fileInputRef=c.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userDetail,a=e.account,n=e.updateDatabaseSchema,r=e.apis,s=this.state.drag,o=t.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(a.user.id,10),"/profile/").concat(t.coverImage):Er,i=t.coverEdit&&"".concat(te,"/user/").concat(1e7+parseInt(a.user.id,10),"/profile/").concat(t.coverEdit);return s?c.a.createElement(yr,{clickEditCover:this.clickEditCover,apis:r,updateDatabaseSchema:n,userDetail:t,account:a}):c.a.createElement("div",{className:"cover-pic"},i?c.a.createElement("img",{alt:"cover profile of the user",src:i}):c.a.createElement("img",{alt:"cover profile of the user",src:o}),c.a.createElement("div",{className:"edit-cover"},c.a.createElement(xa.a,{content:Cr(this.clickEditCover,t)},c.a.createElement("div",null,c.a.createElement("span",null,"Edit "),c.a.createElement(Z.a,{icon:"edit",color:"white",className:"edit-icon"}),c.a.createElement("input",{ref:this.fileInputRef,type:"file",style:{display:"none"},onChange:this.coverChange})))))}}]),t}(c.a.Component),jr=a(102),wr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.uploadImage=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.account,c=n.apis,s=n.userDetail,o=n.updateDatabaseSchema,i=n.addDatabaseSchema,(l=new FormData).append("data",JSON.stringify({token:r.sessionId,fileType:"image",content:"profile"})),l.append("file",t),e.prev=4,e.next=7,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:l});case 7:if(200!==(u=e.sent).status){e.next=12;break}return e.next=11,c.updateUserDetails({userId:r.user.id,image:u.data});case 11:s.id?o("UserDetail",{id:s.id,image:u.data}):i("UserDetail",{id:Date.now(),type:"mentee",image:u.data});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userDetail,a=e.account,n=t.image?"".concat(te,"/user/").concat(1e7+parseInt(a.user.id,10),"/profile/").concat(t.image):jr;return c.a.createElement("div",{className:"profilePic"},c.a.createElement(ea,{imgUrl:n}),c.a.createElement(hr,{onChange:this.uploadImage}))}}]),t}(c.a.Component),Ir=function(e){var t=e.data,a=e.value,n=e.onChange,r=e.callback;return c.a.createElement("div",{style:{padding:"10px 10px 0 10px"}},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",fontSize:18,fontWeight:600,paddingBottom:10}},c.a.createElement("span",null,"Add Skills")),c.a.createElement(Oe,{data:t,onChange:n,value:a}),c.a.createElement(de.b,{onClick:r,fill:!0,intent:"primary",large:!0,text:"Add Skills"}))},kr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={openPopover:!1,value:[]},a.setSkills=function(){var e=a.props,t=e.skills,n=e.account,r=[];Object.values(t.byId).map(function(e){e.userId===n.user.id&&(r=JSON.parse(e.skill))}),a.setState({value:r})},a.togglePopover=function(){var e=a.state.openPopover;a.setState({openPopover:!e})},a.onChageSkill=function(e,t){a.setState({value:t})},a.submitSkills=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.apis,r=t.account,c=t.skills,s=t.updateDatabaseSchema,o=t.addDatabaseSchema,i=a.state.value,Object.values(c.byId).map(function(e){e.userId===r.user.id&&(l=e)}),e.prev=3,l){e.next=10;break}return e.next=7,n.addUserSkill({userId:r.user.id,skill:JSON.stringify(i)});case 7:o("UserSkill",{id:Date.now(),userId:r.user.id,skill:JSON.stringify(i)}),e.next=13;break;case 10:return e.next=12,n.updateUserSkill([{userId:r.user.id,skill:JSON.stringify(i)},{id:l.id}]);case 12:s("UserSkill",{id:l.id,skill:JSON.stringify(i)});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log("Error- ",e.t0);case 18:a.togglePopover();case 19:case"end":return e.stop()}},e,null,[[3,15]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setSkills()}},{key:"componentDidUpdate",value:function(e){this.props.skills.allIds!==e.skills.allIds&&this.setSkills()}},{key:"render",value:function(){var e,t=this.state,a=t.openPopover,n=t.value,r=this.props,s=r.skills,o=r.account;Object.values(s.byId).map(function(t){t.userId===o.user.id&&(e=JSON.parse(t.skill))});return c.a.createElement("div",{className:"skills"},c.a.createElement(ue.a,{onClose:this.togglePopover,isOpen:a},c.a.createElement(Ir,{onChange:this.onChageSkill,value:n,data:{id:"skills",name:"Skills",placeholder:"Type and press enter"},callback:this.submitSkills})),c.a.createElement("p",{className:"p-top"},c.a.createElement("span",null,"Skills"),c.a.createElement(Z.a,{icon:"plus",onClick:this.togglePopover})),e?c.a.createElement("div",{className:"skills-container"},e.map(function(e,t){return c.a.createElement("span",{key:t},e)})):c.a.createElement("div",{style:{color:"#696969"}},"No skills added"))}}]),t}(c.a.Component),Nr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={apis:{}},a.togglePopovers=function(e){var t=a.state.skillsEditPopover;"skills"===e&&a.setState({skillsEditPopover:!t})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.updateNav,e.next=3,se.scope("Mentee");case 3:a=e.sent,this.setState({apis:a}),t({schema:"sideNav",data:{name:"Profile"}});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.account,a=e.database,n=e.deleteDatabaseSchema,r=e.updateDatabaseSchema,s=e.addDatabaseSchema,o=this.state.apis;if(!t.user)return c.a.createElement("div",null);var i=t.user,l={};return Object.values(a.UserDetail.byId).map(function(e){i&&i.id===e.userId&&(l=e)}),c.a.createElement("div",{className:"profile bro-right"},c.a.createElement(Or,{account:t,userDetail:l,apis:o,updateDatabaseSchema:r,addDatabaseSchema:s}),c.a.createElement(wr,{account:t,apis:o,userDetail:l,updateDatabaseSchema:r,addDatabaseSchema:s}),c.a.createElement("div",{className:"top-details"},c.a.createElement("span",{className:"name"},i.middleName?"".concat(i.firstName," ").concat(i.middleName," ").concat(i.lastName):"".concat(i.firstName," ").concat(i.lastName)),c.a.createElement("br",null),c.a.createElement(Z.a,{icon:"locate"}),c.a.createElement("span",{className:"country"}," ",l.address?l.address:"---")),c.a.createElement(br,{account:t,apis:o,database:a,updateDatabaseSchema:r,addDatabaseSchema:s,deleteDatabaseSchema:n}),c.a.createElement(ir,{apis:o,database:a,account:t,updateDatabaseSchema:r,addDatabaseSchema:s,deleteDatabaseSchema:n}),c.a.createElement(dr,{apis:o,database:a,account:t,updateDatabaseSchema:r,addDatabaseSchema:s,deleteDatabaseSchema:n}),c.a.createElement(kr,{account:t,apis:o,skills:a.UserSkill,updateDatabaseSchema:r,addDatabaseSchema:s}))}}]),t}(r.Component),xr=Object(p.b)(function(e){return e},Object(g.a)({},n))(Nr),Sr=[{id:"firstName",fieldtype:"input",name:"First Name",placeholder:"",required:!0},{id:"middleName",fieldtype:"input",name:"Middle Name",placeholder:""},{id:"lastName",fieldtype:"input",name:"Last Name",placeholder:"",required:!0},{id:"submit",fieldtype:"button",text:"Submit",type:"submit",fill:"fill",intent:"primary",large:"large"}],Ar=[{id:"address",fieldtype:"input",name:"Address",placeholder:"",required:!0},{id:"submit",fieldtype:"button",text:"Submit",type:"submit",fill:"fill",intent:"primary",large:"large"}],Dr=[{id:"gender",fieldtype:"select",name:"Gender",required:!0,options:[{label:"---",value:""},{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Others",value:"others"}]},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"primary",large:"large"}],Br=function(e){var t=e.data,a=e.value,n=e.onChange,r=e.callback;return c.a.createElement("div",{style:{padding:"10px 10px 0 10px"}},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",fontSize:18,fontWeight:600,paddingBottom:10}},c.a.createElement("span",null,"Add Skills")),c.a.createElement(Oe,{data:t,onChange:n,value:a}),c.a.createElement(de.b,{onClick:r,fill:!0,intent:"primary",large:!0,text:"Add Skills"}))},Rr=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).togglePopover=function(){var e=a.state.open;a.setState({open:!e})},a.onChangeInterest=function(e,t){a.setState({value:t})},a.editInterest=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.value,n=a.props,r=n.apis,c=n.userDetail,s=n.updateDatabaseSchema,e.next=4,r.updateUserDetails({field:JSON.stringify(t),userId:c.userId});case 4:return s("UserDetail",{id:c.id,field:JSON.stringify(t)}),e.abrupt("return",{response:200,message:"Changed successfully"});case 6:case"end":return e.stop()}},e)}));var n=a.props.userDetail;return a.state={open:!1,value:n.field?JSON.parse(n.field):[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.value,r=this.props.userDetail;return c.a.createElement("div",{className:"basic"},c.a.createElement(ue.a,{onClose:this.togglePopover,isOpen:a},c.a.createElement(Br,{onChange:this.onChangeInterest,value:n,data:{id:"interest",name:"Carrier Interests",placeholder:"Type and press enter"},callback:this.editInterest})),c.a.createElement("span",{className:"label"},"Carrier Interests"),c.a.createElement(Z.a,{icon:"edit",color:"rgba(167, 182, 194, 1)",className:"edit-icon",onClick:function(){return e.togglePopover("career")}}),r.field&&0!==JSON.parse(r.field).length?c.a.createElement("ul",null,JSON.parse(r.field).map(function(e,t){return c.a.createElement("li",{key:t},e)})):c.a.createElement("ul",null,"---"))}}]),t}(c.a.Component),Hr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={namePopover:!1,genderPopover:!1,addressPopover:!1},a.editName=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.apis,c=n.account,e.next=3,r.updateUser([Object(g.a)({},t),{id:c.user.id}]);case 3:return e.abrupt("return",{response:200,message:"Changed successfully"});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.editAddress=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.apis,c=n.account,e.prev=1,e.next=4,r.updateUserDetails(Object(g.a)({},t,{userId:c.user.id}));case 4:return e.abrupt("return",{response:200,message:"Changed successfully"});case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{response:400,error:"Internal server error"});case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.editGender=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.apis,c=n.account,e.prev=1,e.next=4,r.updateUserDetails(Object(g.a)({},t,{userId:c.user.id}));case 4:return e.abrupt("return",{response:200,message:"Changed successfully"});case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{response:400,error:"Internal server error"});case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.togglePopover=function(e){var t=a.state,n=t.namePopover,r=t.genderPopover,c=t.addressPopover,s=a.props,o=s.account,i=s.database;switch(e){case"name":Sr.map(function(e){"firstName"===e.id&&(e.val=o.user.firstName),"lastName"===e.id&&(e.val=o.user.lastName),"middleName"===e.id&&(e.val=o.user.middleName)}),a.setState({namePopover:!n});break;case"gender":Dr.map(function(e){if("gender"===e.id){var t="";Object.values(i.UserDetail.byId).map(function(e){e.userId===o.user.id&&(t=e.gender)}),e.val=t}}),a.setState({genderPopover:!r});break;case"address":Ar.map(function(e){if("address"===e.id){var t="";Object.values(i.UserDetail.byId).map(function(e){e.userId===o.user.id&&(t=e.address)}),e.val=t}}),a.setState({addressPopover:!c})}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.database,r=t.updateDatabaseSchema,s=t.apis,o=this.state,i=o.namePopover,l=o.addressPopover,u=o.genderPopover,d="---",m="---",p={};return Object.values(n.UserDetail.byId).map(function(e){e.userId===a.user.id&&(d=e.gender?e.gender:"---",m=e.address?e.address:"---",p=e)}),c.a.createElement("div",{className:"container-settings"},c.a.createElement(Na,{isOpen:i,structure:Sr,callback:this.editName,onClose:function(){return e.togglePopover("name")}}),c.a.createElement(Na,{isOpen:l,structure:Ar,callback:this.editAddress,onClose:function(){return e.togglePopover("address")}}),c.a.createElement(Na,{isOpen:u,structure:Dr,callback:this.editGender,onClose:function(){return e.togglePopover("gender")}}),c.a.createElement("p",{className:"basic"},c.a.createElement("span",{className:"label"},"Full Name"),a.user&&c.a.createElement("span",{className:"value"},a.user.middleName?"".concat(a.user.firstName," ").concat(a.user.middleName," ").concat(a.user.lastName):"".concat(a.user.firstName," ").concat(a.user.lastName)),c.a.createElement(Z.a,{icon:"edit",color:"rgba(167, 182, 194, 1)",className:"edit-icon",onClick:function(){return e.togglePopover("name")}})),c.a.createElement("p",{className:"basic"},c.a.createElement("span",{className:"label"},"Gender"),c.a.createElement("span",{className:"value"},d.charAt(0).toUpperCase()+d.slice(1)),c.a.createElement(Z.a,{icon:"edit",color:"rgba(167, 182, 194, 1)",className:"edit-icon",onClick:function(){return e.togglePopover("gender")}})),c.a.createElement("p",{className:"basic"},c.a.createElement("span",{className:"label"},"Address"),c.a.createElement("span",{className:"value"},m),c.a.createElement(Z.a,{icon:"edit",color:"rgba(167, 182, 194, 1)",className:"edit-icon",onClick:function(){return e.togglePopover("address")}})),c.a.createElement(Rr,{updateDatabaseSchema:r,userDetail:p,apis:s}))}}]),t}(c.a.Component),Pr=Object(p.b)(function(e){return e},Object(g.a)({},n))(Hr),Mr=a(272),Tr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={mentor:!1},a.switchUser=Object(T.a)(M.a.mark(function e(){var t,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.apis,r=t.account,c=a.state.mentor,e.prev=2,e.next=5,n.updateUserDetails({userId:r.user.id,type:c?"mentee":"mentor"});case 5:a.setState({mentor:!c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.account,n=t.database;Object.values(n.UserDetail.byId).map(function(t){a.user.id===t.userId&&"mentor"===t.type&&e.setState({mentor:!0})})}},{key:"render",value:function(){var e=this.state.mentor;return c.a.createElement("div",{className:"container-settings"},c.a.createElement("div",{className:"switch-adv-con"},e?c.a.createElement("p",null,"You are a Mentor",c.a.createElement("br",null),"Help people learn with your knowledge base.",c.a.createElement("br",null),"Be a part to educate the world."):c.a.createElement("p",null,"Change your profile to Mentor",c.a.createElement("br",null),"and help people learn with your knowledge base.",c.a.createElement("br",null),"Be a part to educate the world."),c.a.createElement(Mr.b,{onChange:this.switchUser,className:"switch-button",checked:e,large:!0,innerLabel:"Mentor"})))}}]),t}(c.a.Component),Ur=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeTab:"basic",apis:{}},a.handleClick=function(e){a.setState({activeTab:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.updateNav,e.next=3,se.scope("Mentee");case 3:a=e.sent,this.setState({apis:a}),t({schema:"sideNav",data:{name:"Settings"}});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.activeTab,n=t.apis,r=this.props,s=r.database,o=r.account;return c.a.createElement("div",{className:"settings bro-right"},c.a.createElement("div",{className:"setting-types"},c.a.createElement("div",{onClick:function(){return e.handleClick("basic")},tabIndex:0,onKeyDown:function(){return e.handleClick("basic")},role:"menuitem",className:"basic"===a?"active":"i-setting"},"General"),c.a.createElement("div",{onClick:function(){return e.handleClick("advanced")},tabIndex:0,onKeyDown:function(){return e.handleClick("advanced")},role:"menuitem",className:"advanced"===a?"active":"i-setting"},"Advanced")),"basic"===a&&c.a.createElement(Pr,{apis:n,account:o,database:s}),"advanced"===a&&c.a.createElement(Tr,{apis:n,database:s,account:o}))}}]),t}(r.Component),Lr=Object(p.b)(function(e){return e},Object(g.a)({},n))(Ur),Wr=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClassChange=function(e){var t=a.props.database,n=[];Object.values(t.BoardColumnCard.byId).map(function(a){Object.values(t.BoardColumn.byId).map(function(t){t.boardId===parseInt(e.target.value,10)&&t.id===a.boardColumnId&&n.push(a)})}),a.setState({classVal:e.target.value,taskOptions:n.map(function(e){return{label:e.name.substring(0,50),value:e.id}}),taskVal:n[0]&&n[0].id})},a.onTaskChange=function(e){a.setState({taskVal:e.target.value})},a.submitForm=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.callback,n=a.state,r=n.taskVal,c=n.classVal,a.setState({loading:!0}),e.next=5,t({task:r,class:c});case 5:200===(s=e.sent).response?a.setState({loading:!1,message:s.message}):a.setState({loading:!1,error:s.error});case 7:case"end":return e.stop()}},e)}));var n=a.props.database,r=Object.values(n.Board.byId),c=[];return Object.values(n.BoardColumnCard.byId).map(function(e){Object.values(n.BoardColumn.byId).map(function(t){t.boardId===r[0].id&&t.id===e.boardColumnId&&c.push(e)})}),a.state={error:null,message:null,loading:!1,classVal:r[0].id,classeOptions:r.map(function(e){return{label:e.name.substring(0,50),value:e.id}}),taskOptions:c.map(function(e){return{label:e.name.substring(0,50),value:e.id}}),taskVal:c[0]&&c[0].id},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.classeOptions,a=e.taskOptions,n=e.taskVal,r=e.classVal,s=e.error,o=e.loading,i=e.message;return c.a.createElement("div",{style:{padding:"10px"}},c.a.createElement("div",{style:{padding:"5px"}},c.a.createElement("span",{style:{fontSize:"18px",fontWeight:"bold"}},"Choose a Target Card")),c.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.a.createElement("div",{style:{padding:"10px"}},c.a.createElement("p",{style:{fontSize:"16px"}},"Class"),c.a.createElement(je.a,{options:t,onChange:this.onClassChange,value:r})),c.a.createElement("div",{style:{padding:"10px",marginBottom:"10px"}},c.a.createElement("p",{style:{fontSize:"16px"}},"Task"),c.a.createElement(je.a,{options:a,onChange:this.onTaskChange,value:n})),c.a.createElement("div",{className:"btn-group"},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",alignItems:"center"}},o&&c.a.createElement(ge.a,{intent:"primary",size:40}),s&&c.a.createElement(fe.c,{style:{fontSize:16,color:"red"}},s),i&&c.a.createElement(fe.c,{style:{fontSize:16,color:"green"}},i)),c.a.createElement(de.b,{text:"Submit",onClick:this.submitForm,intent:"primary",large:!0,fill:!0}))))}}]),t}(c.a.Component),zr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).uploadImage=function(){a.fileInputRef.current.click()},a.saveImage=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d,m,p,f,b,h,v,y;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.props,r=n.canvas,c=n.account,s=n.addDatabaseSchema,o=n.apis,i=r.toDataURL({format:"jpeg",quality:1}),l=i.split(","),u=l[0].match(/:(.*?);/)[1],d=window.atob(l[1]),m=d.length,p=new Uint8Array(m);m;)p[m-=1]=d.charCodeAt(m);return f=new File([p],"canvas-shot.jpeg",{type:u}),e.prev=9,(b=new FormData).append("data",JSON.stringify({token:c.sessionId,fileType:"image",content:"board"})),b.append("file",f),e.next=15,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:b});case 15:if(200!==(h=e.sent).status){e.next=22;break}return v={userId:c.user.id,timeStamp:Date.now(),name:"Canvas Print",boardColumnCardId:parseInt(t.task,10),url:h.data},e.next=20,o.addBoardColumnCardAttachment(Object(g.a)({},v,{broadCastId:"Board-".concat(t.class)}));case 20:y=e.sent,s("BoardColumnCardAttachment",Object(g.a)({},v,{id:y}));case 22:return e.abrupt("return",{response:200,message:"Uploaded"});case 25:return e.prev=25,e.t0=e.catch(9),e.abrupt("return",{response:400,error:"Network issues"});case 28:case"end":return e.stop()}},e,null,[[9,25]])}));return function(t){return e.apply(this,arguments)}}(),a.state={},a.fileInputRef=c.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.draw,a=e.drawActive,n=e.clear,r=e.addText,s=e.anyObjectActive,o=e.onDelete,i=e.color,l=e.colorChange,u=e.fileUpload,d=e.database;return c.a.createElement("div",{className:"draw-tools"},c.a.createElement("div",{className:"tool-label"},c.a.createElement("span",null,"Tools")),c.a.createElement("div",{className:"tool-container"},c.a.createElement(de.b,{intent:"default",onClick:this.uploadImage,icon:"media",className:"i-tool"}),c.a.createElement("input",{ref:this.fileInputRef,type:"file",style:{display:"none"},onChange:u}),c.a.createElement(de.b,{intent:"default",onClick:r,icon:"new-text-box",className:"i-tool"}),c.a.createElement(de.b,{icon:"draw",onClick:t,className:"i-tool",intent:!0===a?"primary":"default"}),c.a.createElement(je.a,{className:"i-tool",value:i,options:[{label:"Black",value:"black"},{label:"Red",value:"red"},{label:"Blue",value:"blue"}],onChange:l}),c.a.createElement(de.b,{className:"i-tool",text:"clear",onClick:n}),c.a.createElement(de.b,{disabled:!s,onClick:o,intent:"danger",icon:"trash",className:"i-tool"})),c.a.createElement("div",{className:"save-wrapper"},c.a.createElement(xa.a,{content:c.a.createElement(Wr,{callback:this.saveImage,database:d})},c.a.createElement(de.b,{text:"save",large:!0,intent:"success"}))))}}]),t}(c.a.Component),Yr=a(181),Gr=a(173),qr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).drawPath=function(e,t){var n=a.state.color;e.beginPath(),e.moveTo(a.previousPoint.x,a.previousPoint.y),e.lineTo(t.pointer.x,t.pointer.y),e.strokeStyle=n,e.lineWidth=1,e.stroke(),e.closePath(),a.previousPoint=t.pointer},a.onMouseMove=function(e){var t=a.state,n=t.canvas,r=t.draw,c=t.mouseDown;r&&c&&a.drawPath(n.lowerCanvasEl.getContext("2d"),e)},a.addInitialAnimation=function(){var e=a.state.canvas;Yr.fabric.Image.fromURL(Gr,function(t){var a=t.set({cacheKey:"logo",left:875,top:0,scaleX:.2,scaleY:.2,selectable:!1,opacity:.6});e.add(a)})},a.draw=function(){var e=a.state,t=e.canvas,n=e.draw;t.isDrawingMode=!n,a.setState({canvas:t,draw:!n})},a.colorChange=function(e){var t=a.state.canvas;t.freeDrawingBrush.color=e.target.value,a.setState({canvas:t,color:e.target.value})},a.clearCanvas=function(){var e=a.state.canvas;e.clear(),a.addInitialAnimation(),a.setState({canvas:e})},a.onMouseUp=function(){a.setState({mouseDown:!1})},a.onMouseDown=function(e){var t=a.state,n=t.canvas,r=t.anyObjectActive;t.draw?(a.setState({mouseDown:!0}),a.previousPoint=e.pointer):!r&&n.getActiveObject()?a.setState({anyObjectActive:!0}):n.getActiveObject()||a.setState({anyObjectActive:!1})},a.deleteObject=function(){var e=a.state.canvas;e.remove(e.getActiveObject()),e.requestRenderAll(),a.setState({canvas:e,anyObjectActive:!1})},a.addText=function(){var e=a.state,t=e.canvas,n=e.color,r=new Yr.fabric.IText("Enter Text",{left:50,top:50,fontSize:18,cacheKey:"text",fill:n});t.add(r).setActiveObject(r),t.isDrawingMode=!1,a.setState({draw:!1,canvas:t,anyObjectActive:!0})},a.fileUpload=function(e){var t=a.state.canvas,n=e.target.files[0];e.target.value="";var r=new FileReader;r.onloadend=function(){var e=new Image;e.onload=function(){var n=1;n=e.height>e.width?t.height/2/e.height:t.width/2/e.width;var r=new Yr.fabric.Image(e,{top:t.height/2,left:t.width/2,scaleX:n,scaleY:n,originX:"center",originY:"center",cacheKey:"image"});t.add(r),t.requestRenderAll(),a.setState({canvas:t})},e.src=r.result},n&&r.readAsDataURL(n)},a.state={apis:{},canvas:{},anyObjectActive:!1,color:"black",draw:!1,mouseDown:!1},a.previousPoint={x:0,y:0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a,n,r=this;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.updateNav,e.next=3,se.scope("Mentee");case 3:a=e.sent,(n=new Yr.fabric.Canvas("mainCanvas",{preserveObjectStacking:!0,selection:!1,backgroundColor:"white"})).freeDrawingBrush.width=2,n.on("mouse:down",function(e){r.onMouseDown(e)}),n.on("mouse:move",function(e){r.onMouseMove(e)}),n.on("mouse:up",function(e){r.onMouseUp(e)}),this.setState({apis:a,canvas:n}),t({schema:"sideNav",data:{name:"Drawing Board"}}),this.addInitialAnimation();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUpdate",value:function(e){var t=this.state.canvas;if(e.webRtc.localCallHistory&&"whiteBoard"===e.webRtc.localCallHistory.mediaType){var a=t.getObjects().find(function(e){return"logo"===e.cacheKey&&e});t.remove(a),this.addInitialAnimation(),t.requestRenderAll()}}},{key:"render",value:function(){var e=this.state,t=e.draw,a=e.anyObjectActive,n=e.color,r=e.canvas,s=e.apis,o=this.props,i=o.database,l=o.account,u=o.addDatabaseSchema;return c.a.createElement("div",{className:"drawing-board bro-right"},c.a.createElement("div",{className:"draw-title"},c.a.createElement("span",null,"White Board")),c.a.createElement(zr,{draw:this.draw,drawActive:t,apis:s,colorChange:this.colorChange,clear:this.clearCanvas,anyObjectActive:a,onDelete:this.deleteObject,addText:this.addText,color:n,account:l,database:i,fileUpload:this.fileUpload,canvas:r,addDatabaseSchema:u}),c.a.createElement("div",{className:"draw-canvas"},c.a.createElement("canvas",{id:"mainCanvas",height:700,width:1e3})))}}]),t}(r.Component),Fr=Object(p.b)(function(e){return e},Object(g.a)({},n))(qr),Qr=a(62),Vr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.getImage=function(e,t){var a=e&&e.image?"".concat(te,"/user/").concat(1e7+parseInt(e.userId,10),"/profile/").concat(e.image):Qr;return c.a.createElement("div",{className:"img-con"},c.a.createElement(ea,{imgUrl:a}),t.activeStatus&&c.a.createElement("span",{className:"green-dot"}))},a.sendMessage=function(){var e=a.props,t=e.updateWebRtc,n=e.id,r=e.database,c=e.account,s=e.connection;t("showCommunication",n),t("peerType","user"),t("communicationContainer","history"),t("connectionId",s.id),t("chatHistory",{type:"user",user:{user:s.userId===c.user.id?r.User.byId[s.mId]:r.User.byId[s.userId]},connectionId:s.id})},a.deleteRequest=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.id,r=t.apis,c=t.deleteDatabaseSchema,s=t.connection,e.next=3,r.deleteUserConnection({id:n});case 3:c("UserConnection",{id:s.id});case 4:case"end":return e.stop()}},e)})),a.acceptRequest=Object(T.a)(M.a.mark(function e(){var t,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.apis,r=t.updateDatabaseSchema,c=t.connection,e.next=3,n.updateUserConnection([{status:"connected",mId:c.mId,userId:c.userId},{id:c.id}]);case 3:r("UserConnection",{id:c.id,status:"connected"});case 4:case"end":return e.stop()}},e)})),a.getConfigButtons=function(){var e=a.props,t=e.account,n=e.connection;return t.user.id===n.userId&&"pending"===n.status?c.a.createElement("div",{className:"con-buttons"},c.a.createElement(de.b,{text:"Requested",icon:"follower",onClick:a.deleteRequest})):"pending"===n.status?c.a.createElement("div",{className:"con-buttons"},c.a.createElement(de.b,{text:"Decline",icon:"delete",intent:"danger",onClick:a.deleteRequest}),c.a.createElement(de.b,{text:"Accept",icon:"following",className:"pc-accept",intent:"success",onClick:a.acceptRequest})):c.a.createElement("div",{className:"con-buttons"},c.a.createElement(de.b,{text:"Message",icon:"chat",onClick:a.sendMessage}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.database,n=a.User.byId[t],r=Object.values(a.UserDetail.byId).find(function(e){return t===e.userId});return c.a.createElement("div",{className:"i-result"},this.getImage(r,n),c.a.createElement("div",{className:"desc-con"},c.a.createElement("p",{className:"name"},c.a.createElement(Q.a,{to:"/user/".concat(n.slug,"/")},n.middleName?"".concat(n.firstName," ").concat(n.middleName," ").concat(n.lastName):"".concat(n.firstName," ").concat(n.lastName))),c.a.createElement("p",{className:"location"},r&&r.address?r.address:"---"),c.a.createElement("div",{className:"con-config"},this.getConfigButtons())))}}]),t}(c.a.Component),Kr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).getConnections=function(){var e=a.props,t=e.database,n=e.account.user.id,r=[];return Object.values(t.UserConnection.byId).map(function(e){r.push(e.userId===n?{userId:e.mId,connection:e}:{userId:e.userId,connection:e})}),r},(0,a.props.updateNav)({schema:"sideNav",data:{name:"Connections"}}),a.state={apis:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.scope("Mentee");case 2:t=e.sent,this.setState({apis:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.database,a=e.account,n=e.updateWebRtc,r=e.updateDatabaseSchema,s=e.deleteDatabaseSchema,o=this.state.apis;if(!a.user)return c.a.createElement("div",{className:"bro-right",style:{position:"relative"}},c.a.createElement(Oa,null));var i=this.getConnections();return c.a.createElement("div",{className:"connection bro-right"},c.a.createElement("div",{className:"header"},c.a.createElement("div",null,c.a.createElement("span",{className:"title"},"Connections "),c.a.createElement("small",null,"Mange your connections"))),c.a.createElement("div",{className:"con-list"},0===i.length&&c.a.createElement("div",{className:"pc-no-cons"},c.a.createElement("p",null,"You do not have any connections at the moment.")),i.map(function(e){return c.a.createElement(Vr,{updateWebRtc:n,deleteDatabaseSchema:s,updateDatabaseSchema:r,apis:o,key:e.userId,id:e.userId,connection:e.connection,account:a,database:t})})))}}]),t}(c.a.Component),Jr=Object(p.b)(function(e){return e},Object(g.a)({},n))(Kr),Zr=[{id:"name",fieldtype:"input",required:!0,name:"Name",placeholder:""},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"success",large:"large"}],Xr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"pc-class-template-container"},c.a.createElement("div",{className:"header"},c.a.createElement("span",{className:"title"},"Templates "),c.a.createElement("small",null,"Start with a template")),c.a.createElement("div",{className:"content-list"},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("div",{className:"template-icon"},c.a.createElement(oa.e,{size:30})),c.a.createElement(Q.a,{to:"/",className:"content-link"},c.a.createElement("div",{className:"class-repr"},c.a.createElement("span",null,"Software Development")),c.a.createElement("div",{className:"class-detail"},c.a.createElement("span",{className:"name"},"Properclass"),c.a.createElement("span",{className:"date"},(new Date).toDateString()))))))}}]),t}(c.a.Component),_r=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={createBool:!1,deleteClass:{id:0,name:"",deletePopOverBool:!1},updateClass:{id:0,updateClassBool:!1},api:{}},a.createNewBoard=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,r=a.props,c=r.account,s=r.addDatabaseSchema,o=a.state.api,n.userId=c.user.id,n.timeStamp=Date.now(),e.prev=5,e.next=8,o.addBoard(n);case 8:i=e.sent,s("Board",Object(g.a)({},n,{id:i})),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(5),console.log("Error: ",e.t0),e.abrupt("return",{response:404});case 16:return a.newClass(),e.abrupt("return",{response:200});case 18:case"end":return e.stop()}},e,null,[[5,12]])}));return function(t){return e.apply(this,arguments)}}(),a.newClass=function(){var e=a.state.createBool;Zr.map(function(e){"name"===e.id&&(e.val="")}),a.setState({createBool:!e})},a.onMore=function(){var e=Object(T.a)(M.a.mark(function e(t,n){var r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.state,c=r.deleteClass,s=r.updateClass,o=a.props.database,"delete"===t&&a.setState({deleteClass:{id:n,name:o.Board.byId[n].name,deletePopOverBool:!c.deletePopOverBool}}),"edit"===t&&(Zr.map(function(e){"name"===e.id&&(e.val=o.Board.byId[n].name)}),a.setState({updateClass:{id:n,updateClassBool:!s.updateClassBool}}));case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.deleteClass=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.deleteClass,c=n.api,s=a.props.deleteDatabaseSchema,"confirm"!==t){e.next=6;break}return e.next=5,c.deleteBoard({id:r.id,broadCastId:"Board-".concat(r.id)});case 5:s("Board",{id:r.id});case 6:a.setState({deleteClass:{id:0,name:"",deletePopOverBool:!r.deletePopOverBool}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.updateClass=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state,r=n.updateClass,c=n.api,s=a.props.updateDatabaseSchema,e.next=4,c.updateBoard([Object(g.a)({},t,{broadCastId:"Board-".concat(r.id)}),{id:r.id}]);case 4:return s("Board",Object(g.a)({id:r.id},t)),a.setState({updateClass:{id:0,updateClassBool:!1}}),e.abrupt("return",{response:200});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.cancleUpdate=function(){var e=a.state.updateClass;a.setState({updateClass:{id:0,updateClassBool:!e.updateClassBool}})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.updateNav,e.next=3,se.scope("Mentee");case 3:a=e.sent,this.setState({api:a}),t({schema:"sideNav",data:{name:"Classes"}});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.account,n=t.database,r=this.state,s=r.createBool,o=r.deleteClass,i=r.updateClass;return c.a.createElement("div",{className:"classes bro-right"},c.a.createElement(Te,{isOpen:o.deletePopOverBool,action:this.deleteClass,name:o.name}),c.a.createElement("div",{className:"header"},c.a.createElement("span",{className:"title"},"Classrooms "),c.a.createElement("small",null,"Your classrooms")),c.a.createElement("div",{className:"content-list"},Object.values(n.Board.byId).map(function(t,r){var s=n.User.byId[t.userId],o=t.name.length>30?t.name.substring(0,29):t.name;return c.a.createElement("div",{style:{position:"relative"},key:r},c.a.createElement(Aa,{onMore:e.onMore,id:t.id}),c.a.createElement(Q.a,{to:"/class-work/".concat(a.user.slug,"/").concat(t.id),className:"content-link"},c.a.createElement("div",{className:"class-repr"},c.a.createElement("span",null,o)),c.a.createElement("div",{className:"class-detail"},c.a.createElement("span",{className:"name"},s.middleName?"".concat(s.firstName," ").concat(s.middleName," ").concat(s.lastName):"".concat(s.firstName," ").concat(s.lastName)),c.a.createElement("span",{className:"date"},new Date(t.timeStamp).toDateString()))))}),c.a.createElement("div",{className:"content-link add-new"},c.a.createElement(de.b,{intent:"primary",icon:"plus",onClick:this.newClass,text:"Add New"}))),c.a.createElement(Xr,null),c.a.createElement(Na,{isOpen:s,onClose:this.newClass,callback:this.createNewBoard,structure:Zr}),c.a.createElement(Na,{isOpen:i.updateClassBool,onClose:this.cancleUpdate,callback:this.updateClass,structure:Zr}))}}]),t}(r.Component),$r=Object(p.b)(function(e){return e},Object(g.a)({},n))(_r),ec=function(){var e=Object(T.a)(M.a.mark(function e(t,a){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.title.replace(/\s/g,"").length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t(a);case 5:return n=e.sent,e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,a){return e.apply(this,arguments)}}(),tc=function(){var e=Object(T.a)(M.a.mark(function e(t,a){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a[0].title.replace(/\s/g,"").length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t(a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])}));return function(t,a){return e.apply(this,arguments)}}(),ac=function(e){var t=e.imgName,a=e.callback;return c.a.createElement("div",{style:{padding:"5px"}},c.a.createElement(Be.a,{text:t,onInputChange:a,large:!0}))},nc=function(e){var t=e.bold,a=e.italic,n=e.underline,r=e.imageSource,s=e.publish,o=e.onClick,i=e.onPublish,l=e.saveBlog,u=e.uploadImg;return c.a.createElement("div",{className:"toolbar"},c.a.createElement("div",{className:"left"},c.a.createElement(Mr.b,{innerLabel:"Draft",innerLabelChecked:"Public",alignIndicator:"right",large:!0,checked:"publish"===s,className:"switch",onChange:i})),c.a.createElement("div",{className:"center"},c.a.createElement(je.a,{options:[{label:"Normal",value:"p"},{value:"h1",label:"Heading 1"},{value:"h2",label:"Heading 2"},{value:"h3",label:"Heading 3"},{label:"Code",value:"pre"}],onChange:function(e){return o("formatBlock",e.target.value)}}),c.a.createElement(de.b,{type:"button",icon:"bold",intent:t?"primary":null,onClick:function(){return o("bold","")}}),c.a.createElement(de.b,{type:"button",icon:"italic",intent:a?"primary":null,onClick:function(){return o("italic","")}}),c.a.createElement(de.b,{type:"button",icon:"underline",intent:n?"primary":null,onClick:function(){return o("underline","")}}),c.a.createElement(de.b,{type:"button",icon:"align-left",onClick:function(){return o("justifyLeft","")}}),c.a.createElement(de.b,{type:"button",icon:"align-center",onClick:function(){return o("justifyCenter","")}}),c.a.createElement(de.b,{type:"button",icon:"align-right",onClick:function(){return o("justifyRight","")}}),c.a.createElement(xa.a,{content:c.a.createElement(ac,{imgName:r,callback:u})},c.a.createElement(de.b,{type:"button",icon:"media"}))),c.a.createElement("div",{className:"right"},c.a.createElement(de.b,{type:"button",intent:"success",text:"save",onClick:l})))},rc=a(103),cc=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){(0,a.props.coverChange)(e.target.files[0])},a.onClick=function(){a.fileInputRef.current.click()},a.state={},a.fileInputRef=c.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.coverImage;return c.a.createElement("div",{className:"img-upload-container"},c.a.createElement("div",{className:"blog-cover-img"},c.a.createElement("img",{alt:"default blog icon",src:e||rc})),c.a.createElement("div",{className:"img-upload",onClick:this.onClick,role:"button"},c.a.createElement(oa.f,{size:30,color:"#1d4354"}),c.a.createElement("span",{style:{marginLeft:10,display:"inline-grid",fontSize:18,color:"#1d4354",alignItems:"center"}},"Add Cover Image"),c.a.createElement("input",{ref:this.fileInputRef,type:"file",style:{display:"none"},onChange:this.onChange})))}}]),t}(c.a.Component),sc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={bold:!1,italic:!1,underline:!1,publish:"draft",apis:{},title:"",description:"",blogId:"",imageSource:"Choose a picture...",coverImage:{actualFile:null,url:null,serverImageName:null}},a.observeMutation=function(e){for(var t=[],n=0;n<e.length;n+=1)for(var r=e[n].removedNodes,c=0;c<r.length;c+=1)if("img"===r[c].localName){var s=r[c].src.split("/");t.push(s[s.length-1])}0!==t.length&&a.deleteFileHandler(t)},a.onChangeDesc=function(e){a.setState({description:e.target.innerHTML})},a.onChangeTitle=function(e){a.setState({title:e.target.value})},a.onEditorFocus=function(){var e,t=!1,n=!1,r=!1;if(window.getSelection){if(!(e=window.getSelection()).focusNode)return;var c=e.focusNode.parentElement;if(e.rangeCount)for(;"div"!==c.localName;){switch(c.localName){case"u":r=!0;break;case"b":t=!0;break;case"i":n=!0;break;default:return}c=c.parentElement}}a.setState({bold:t,italic:n,underline:r})},a.onClick=function(e,t){document.execCommand(e,!1,t),document.getElementById("editor").focus()},a.toggleButtons=function(e){var t=a.state,n=t.bold,r=t.italic,c=t.underline,s=t.h2;switch(e){case"bold":n=!n;break;case"italic":r=!r;break;case"underline":c=!c;break;case"h2":s=!s;break;default:return}a.setState({bold:n,italic:r,underline:c,h2:s})},a.contentChange=function(e){if((!0===e.ctrlKey||!0===e.metaKey)&&83===e.keyCode)return e.preventDefault(),void a.saveBlog();if(46===e.keyCode&&8===e.keyCode){var t=e.target.innerText;"\n"!==t&&""!==t||(e.target.innerHTML="")}},a.onkeyUp=function(e){a.contentChange(e),a.onEditorFocus()},a.createMarkup=function(e){return{__html:e}},a.saveBlog=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u,d,m,p,f,b,h;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.apis,r=t.title,c=t.description,s=t.blogId,o=t.publish,i=t.coverImage,l=null,u=a.props,d=u.account,m=u.addDatabaseSchema,p=u.updateDatabaseSchema,!i.actualFile){e.next=17;break}return(f=new FormData).append("data",JSON.stringify({token:d.sessionId,fileType:"image",content:"blog"})),f.append("file",i.actualFile),e.prev=7,e.next=10,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:f});case 10:200===(b=e.sent).status&&(l=b.data,a.setState({coverImage:Object(g.a)({},i,{actualFile:null,serverImageName:l})})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("Error",e.t0);case 17:if(""!==s){e.next=24;break}return e.next=20,ec(n.addBlog,{userId:d.user.id,timeStamp:Date.now(),saveStatus:o,title:r,coverImage:l,content:c});case 20:return h=e.sent,a.setState({blogId:h,publish:"draft"}),m("Blog",{id:h,userId:d.user.id,timeStamp:Date.now(),saveStatus:o,coverImage:l,title:r,content:c}),e.abrupt("return");case 24:return e.next=26,tc(n.updateBlog,[{title:r,content:c,saveStatus:o,coverImage:i.url||l?l||i.serverImageName:null},{id:s}]);case 26:p("Blog",{id:s,saveStatus:o,title:r,content:c,coverImage:i.url||l?l||i.serverImageName:null});case 27:case"end":return e.stop()}},e,null,[[7,14]])})),a.publish=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.blogId,c=n.apis,s=n.title,o=n.description,i=a.props.updateDatabaseSchema,l=t.target.checked?"publish":"draft",""===r){e.next=8;break}return a.setState({publish:l}),e.next=7,tc(c.updateBlog,[{title:s,content:o,saveStatus:l},{id:r}]);case 7:i("Blog",{id:r,saveStatus:l,title:s,content:o});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.uploadImg=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.account,a.setState({imageSource:t.target.files[0].name}),e.prev=2,(r=new FormData).append("data",JSON.stringify({token:n.sessionId,fileType:"image",content:"blog"})),r.append("image",t.target.files[0]),e.next=8,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:r});case 8:200===(c=e.sent).status&&(document.getElementById("editor").focus(),document.execCommand("insertImage",!1,"".concat(te,"/user/").concat(1e7+parseInt(n.user.id,10),"/blog/").concat(c.data)),a.saveBlog()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("update profile error",e.t0);case 15:case"end":return e.stop()}},e,null,[[2,12]])}));return function(t){return e.apply(this,arguments)}}(),a.deleteFileHandler=function(){var e=Object(T.a)(M.a.mark(function e(t){var n;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.account,e.prev=1,e.next=4,L.a.post("".concat(te,"/web/delete-file"),{token:n.sessionId,content:"blog",fileName:t});case 4:a.saveBlog(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Internal Error",e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.coverChange=function(e){a.setState({coverImage:{url:URL.createObjectURL(e),actualFile:e}})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a,n,r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.match,n=t.database,e.next=3,se.scope("Mentor");case 3:r=e.sent,this.setState({apis:r}),c={attributes:!0,childList:!0,subtree:!0},s=document.getElementById("editor"),new MutationObserver(this.observeMutation).observe(s,c),a.params.blogId&&n.Blog.allIds.length>0&&(o=n.Blog.byId[parseInt(a.params.blogId,10)],document.getElementById("editor").innerHTML=o.content,this.setState({blogId:o.id,publish:o.saveStatus,title:o.title,coverImage:{actualFile:null,serverImageName:o.coverImage,url:o.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(o.userId,10),"/blog/").concat(o.coverImage):null},description:o.content}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUpdate",value:function(e){var t=this.props,a=t.database,n=t.match;if(n.params.blogId&&e.database.Blog.byId!==a.Blog.byId){var r=e.database.Blog.byId[parseInt(n.params.blogId,10)];document.getElementById("editor").innerHTML=e.database.Blog.byId[parseInt(n.params.blogId,10)].content,this.setState({blogId:r.id,coverImage:{actualFile:null,serverImageName:r.coverImage,url:r.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(r.userId,10),"/blog/").concat(r.coverImage):null},publish:r.saveStatus,title:r.title,description:r.content})}}},{key:"render",value:function(){var e=this.state,t=e.bold,a=e.italic,n=e.underline,r=e.imageSource,s=e.publish,o=e.title,i=e.coverImage;return c.a.createElement("div",null,c.a.createElement(Qa,{className:"pcm-nav"}),c.a.createElement("div",{className:"create-blog"},c.a.createElement(nc,{onClick:this.onClick,onPublish:this.publish,uploadImg:this.uploadImg,saveBlog:this.saveBlog,bold:t,italic:a,underline:n,imageSource:r,publish:s}),c.a.createElement(cc,{coverImage:i.url,coverChange:this.coverChange}),c.a.createElement("div",{className:"title"},c.a.createElement(Se.a,{fill:!0,placeholder:"Header...*",maxLength:"150",rows:"1",onChange:this.onChangeTitle,value:o,intent:0===o.replace(/\s/g,"").length?"danger":"none",style:{resize:"none",overflowX:"hidden",overflowWrap:"break-word",maxHeight:"97px"}})),c.a.createElement("div",{className:"editor-container"},c.a.createElement("div",{id:"editor",role:"textbox",tabIndex:0,contentEditable:!0,datatext:"Start Writing ...",style:{content:"attr(placeholder)"},onKeyUp:this.onkeyUp,onKeyDown:this.contentChange,onFocus:this.onEditorFocus,onClick:this.onEditorFocus,onInput:this.onChangeDesc}))))}}]),t}(r.Component),oc=Object(p.b)(function(e){return{account:e.account,database:e.database}},Object(g.a)({},n))(sc),ic=a(103),lc=function(e){var t=e.onMore,a=e.users,n=e.obj,r=n.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(n.userId,10),"/blog/").concat(n.coverImage):ic;return c.a.createElement("div",{className:"blog-container"},c.a.createElement("div",{className:"img-container"},c.a.createElement(Aa,{onMore:t,id:n.id}),c.a.createElement("img",{alt:"test",src:r})),c.a.createElement("div",{className:"detail-container"},c.a.createElement("div",{className:"blog-author"},c.a.createElement(Q.a,{to:"/user/".concat(a.byId[n.userId].slug)},a.byId[n.userId].middleName?"".concat(a.byId[n.userId].firstName," ").concat(a.byId[n.userId].middleName," ").concat(a.byId[n.userId].lastName):"".concat(a.byId[n.userId].firstName," ").concat(a.byId[n.userId].lastName))),c.a.createElement("div",{className:"blog-title"},c.a.createElement("p",{className:"title"},n.title),c.a.createElement("p",{style:{textAlign:"right",width:"100%"}},c.a.createElement("span",{className:"pc-date"},new Date(n.timeStamp).toDateString())))))},uc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={createBlog:!1,editBlog:!1,deletePopOverIsOpen:!1,blogId:null,apis:{}},a.deleteBlog=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.state,r=n.apis,c=n.blogId,s=a.props.deleteDatabaseSchema,"confirm"!==t){e.next=8;break}return e.next=5,r.deleteBlog({id:c});case 5:return a.setState({deletePopOverIsOpen:!1,blogId:""}),s("Blog",{id:c}),e.abrupt("return");case 8:a.setState({deletePopOverIsOpen:!1});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onMore=function(e,t){"delete"===e?a.setState({deletePopOverIsOpen:!0,blogId:t}):"edit"===e&&a.setState({editBlog:!0,blogId:t})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.updateNav,e.next=3,se.scope("Mentor");case 3:a=e.sent,this.setState({apis:a}),t({schema:"sideNav",data:{name:"Blog"}});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.createBlog,n=t.deletePopOverIsOpen,r=t.blogId,s=t.editBlog,o=this.props.account,i=this.props.database;return c.a.createElement("div",{className:"blogs bro-right"},a&&c.a.createElement(F.a,{push:!0,to:"/create-blog/".concat(o.sessionId)}),r&&s&&c.a.createElement(F.a,{push:!0,to:"/edit-blog/".concat(o.sessionId,"/").concat(r)}),c.a.createElement(Te,{isOpen:n,action:this.deleteBlog,name:r?i.Blog.byId[r].title:""}),c.a.createElement("div",{className:"header"},c.a.createElement("div",null,c.a.createElement("span",{className:"title"},"Blogs "),c.a.createElement("small",null,"Manage your blogs here")),c.a.createElement("div",null,c.a.createElement(de.b,{className:"create-btn",text:"Create Blog",intent:"success",onClick:function(){return e.setState({createBlog:!a})}}))),c.a.createElement("div",{className:"blog-list"},0===i.Blog.allIds.length&&c.a.createElement("div",{className:"pc-no-blogs"},c.a.createElement("p",null,"You have not created any blogs at the moment.")),Object.values(i.Blog.byId).map(function(t,a){return c.a.createElement(lc,{onMore:e.onMore,users:i.User,obj:t,key:a})})))}}]),t}(r.Component),dc=Object(p.b)(function(e){return e},Object(g.a)({},n))(uc),mc=a(62),pc=function(e){var t=e.comment,a=e.user,n=a.userDetail.image?"".concat(te,"/user/").concat(1e7+parseInt(a.user.id,10),"/profile/").concat(a.userDetail.image):mc;return c.a.createElement("div",{className:"i-response"},c.a.createElement("div",{className:"pc-profile-icon"},c.a.createElement(ea,{imgUrl:n})),c.a.createElement("div",{className:"comment-content"},c.a.createElement("div",null,a.user.middleName?c.a.createElement(Q.a,{to:"/user/".concat(a.user.slug,"/"),key:"user-".concat(a.user.id)},"".concat(a.user.firstName," ").concat(a.user.middleName," ").concat(a.user.lastName," ")):c.a.createElement(Q.a,{to:"/user/".concat(a.user.slug,"/"),key:"user-".concat(a.user.id)},"".concat(a.user.firstName," ").concat(a.user.lastName," ")),c.a.createElement("small",null,c.a.createElement(Ve.a,{style:{fontSize:12,color:"#757575"},format:"YYYY-MM-DD hh:mm"},t.timeStamp))),c.a.createElement("p",null,t.comment)))},fc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={comment:"",liked:null,allComments:[],allLikes:[]},a.setComment=function(e){a.setState({comment:e.target.value})},a.submitComment=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.comment,r=t.allComments,c=a.props,s=c.apis,o=c.blogId,i=c.account,e.prev=2,l={userId:i.user.id,comment:n,timeStamp:Date.now(),blogId:o,broadCastId:"Blog-".concat(o)},e.next=6,s.addBlogComment(l);case 6:u=e.sent,a.setState({allComments:[].concat(Object(h.a)(r),[Object(g.a)({},l,{id:u})]),comment:""}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error",e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])})),a.likeBlog=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.liked,r=t.allLikes,c=a.props,s=c.apis,o=c.account,i=c.blogId,!n){e.next=8;break}return e.next=5,s.deleteBlogLike({id:n,broadCastId:"Blog-".concat(i)});case 5:a.setState({allLikes:r.filter(function(e){return e.id!==n}),liked:null}),e.next=13;break;case 8:return l={blogId:i,userId:o.user.id,timeStamp:Date.now(),likeType:"like"},e.next=11,s.addBlogLike(Object(g.a)({},l,{broadCastId:"Blog-".concat(i)}));case 11:u=e.sent,a.setState({liked:u,allLikes:[].concat(Object(h.a)(r),[Object(g.a)({},l,{id:u})])});case 13:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.likes,n=t.account,r=t.comments;this.setState({allComments:r,allLikes:a}),n.user&&a.filter(function(t){t.userId===n.user.id&&e.setState({liked:t.id})})}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.account,r=a.likes;n.user!==e.account.user&&r.filter(function(a){a.userId===e.account.user.id&&t.setState({liked:a.id})})}},{key:"render",value:function(){var e=this.state,t=e.comment,a=e.liked,n=e.allComments,r=e.allLikes,s=this.props,o=s.users,i=s.account;return c.a.createElement("div",{className:"response"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"comment-section"},c.a.createElement("div",null,i.user&&c.a.createElement(de.b,{intent:a?"primary":"none",text:a?"Liked":"Like",icon:"thumbs-up",onClick:this.likeBlog}),c.a.createElement("span",null," ".concat(r.length," Likes"))),i.user&&c.a.createElement("div",{className:"top-label"},c.a.createElement("h1",null,"Comment here")),i.user&&c.a.createElement("div",{className:"comment-area"},c.a.createElement(Se.a,{placeholder:"put a comment in here",onChange:this.setComment,value:t}),c.a.createElement(de.b,{text:"Submit",intent:"success",fill:!0,onClick:this.submitComment})),c.a.createElement("div",{className:"responses"},c.a.createElement("div",{className:"res-label"},c.a.createElement("h3",null,"Responses")),n.sort(at).map(function(e){var t=o.find(function(t){return t.user.id===e.userId});return c.a.createElement(pc,{user:t,comment:e,key:e.id})}))),c.a.createElement("div",{className:"right"}))}}]),t}(c.a.Component),bc=function(e){var t=e.blog,a=t.blog.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(t.blog.userId,10),"/blog/").concat(t.blog.coverImage):null;return c.a.createElement("div",{className:"pc-blog-cover-image"},c.a.createElement("img",{alt:"blog cover",src:a}))},hc=a(62),vc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={blogId:null,apis:{},data:{},loading:!0},a.createMarkup=function(e){return{__html:e}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t,a,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.account,n=t.match,e.prev=1,r={},!a.user){e.next=7;break}return e.next=6,se.scope("Mentee");case 6:r=e.sent;case 7:return e.next=9,L.a.get("".concat(te,"/web/get-blog?blogId=").concat(n.params.blogSlug,"&userId=").concat(n.params.userSlug));case 9:c=e.sent,this.setState({data:c.data,apis:r,blogId:c.data.blog.id,loading:!1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("Error",e.t0);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(T.a)(M.a.mark(function e(t){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.account.user===t.account.user){e.next=12;break}return e.prev=2,e.next=5,se.scope("Mentee");case 5:a=e.sent,this.setState({apis:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Error",e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.blogId,a=e.apis,n=e.data;if(e.loading)return c.a.createElement(Oa,null);var r=this.props.account,s=n.userDetails.find(function(e){return e.user.id===n.blog.userId}),o=s.userDetail.image?"".concat(te,"/user/").concat(1e7+parseInt(s.user.id,10),"/profile/").concat(s.userDetail.image):hc,i=n.userDetails;return c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"public-blog"},c.a.createElement("div",{className:"public-blog-title"},c.a.createElement("p",null,n.blog.title),c.a.createElement("div",{className:"author-user"},c.a.createElement("div",{className:"auth-con"},c.a.createElement("div",{className:"profile-icon"},c.a.createElement(ea,{imgUrl:o})),c.a.createElement("div",{className:"author-detail"},c.a.createElement(Q.a,{key:s.user.id,to:"/user/".concat(s.user.slug)},"".concat(s.user.firstName," ").concat(s.user.middleName?"".concat(s.user.middleName," "):"").concat(s.user.lastName)),c.a.createElement("span",null,new Date(n.blog.timeStamp).toDateString()))))),c.a.createElement(bc,{blog:n}),c.a.createElement("div",{className:"public-blog-content"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{id:"blogContent",dangerouslySetInnerHTML:this.createMarkup(n.blog.content)}),c.a.createElement("div",{className:"right"})),c.a.createElement(fc,{account:r,apis:a,users:i,comments:n.blogComment,likes:n.blogLike,blogId:t})),c.a.createElement(Va,null))}}]),t}(c.a.Component),gc=Object(p.b)(function(e){return e})(vc),yc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.account,a=e.match;return console.log("Props in main",this.props),t.sessionId?t.user?t.user.slug!==a.params.id?c.a.createElement(F.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"broWrapper"},c.a.createElement(Xn,{match:a}),c.a.createElement(tr,{match:a}),c.a.createElement("div",{className:"fake-side-nav"}),c.a.createElement(H.a,{exact:!0,path:"".concat(a.path,"/profile"),component:xr}),c.a.createElement(H.a,{exact:!0,path:"".concat(a.path,"/classes"),component:$r}),c.a.createElement(H.a,{exact:!0,path:"".concat(a.path,"/blog"),component:dc}),c.a.createElement(H.a,{exact:!0,path:"".concat(a.path,"/settings"),component:Lr}),c.a.createElement(H.a,{exact:!0,path:"".concat(a.path,"/drawing-board"),component:Fr}),c.a.createElement(H.a,{exact:!0,path:"".concat(a.path,"/connection"),component:Jr}))):c.a.createElement(Oa,null):c.a.createElement(F.a,{to:"/"})}}]),t}(r.Component),Ec=Object(p.b)(function(e,t){return Object(g.a)({},e,t)})(yc),Cc=a(56),Oc=a(195),jc=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClick=function(){var e=a.props;(0,e.onClick)(e.task.id)};var n=a.props,r=n.tags,c=n.task,s=Object.values(r.byId).filter(function(e){if(c.id===e.boardColumnCardId)return e});return a.state={allTags:s},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.tags,n=t.task;if(a.allIds!==e.tags.allIds){var r=Object.values(a.byId).filter(function(e){if(n.id===e.boardColumnCardId)return e});this.setState({allTags:r})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.task,n=t.index,r=this.state.allTags;return c.a.createElement(Cc.b,{draggableId:"task".concat(a.id),index:n},function(t){return c.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{className:"task-container",onClick:e.onClick,onKeyDown:e.onClick,role:"menuitem",tabIndex:0}),c.a.createElement("div",{className:"pc-task-flag"},c.a.createElement("div",{className:"pc-tag-view"},r.map(function(e,t){return c.a.createElement(Oc.a,{key:t,intent:e.tag,style:{marginRight:"5px"}})})),c.a.createElement("div",{className:"pc-deadline-view"},a.Deadline&&c.a.createElement("p",{className:a.Deadline<new Date?"expire":"no-expire"},le()(a.Deadline).format("YYYY-MM-DD")))),c.a.createElement("p",{className:"pc-task-name"},a.name))})}}]),t}(r.Component),wc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={popOpen:!1,api:{}},a.handlePopOverForm=function(){var e=a.state.popOpen;e||Zr.map(function(e){"name"===e.id&&(e.val="")}),a.setState({popOpen:!e})},a.addNewTask=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.columnId,c=n.account,s=n.boardId,o=n.database,i=n.addDatabaseSchema,l=a.state.api,u=Object.keys(o.BoardColumnCard.byId).reduce(function(e,t){return o.BoardColumnCard.byId[t].boardColumnId===r&&(e+=16384),e},16384),e.next=5,l.addBoardColumnCard({userId:c.user.id,timeStamp:Date.now(),name:t.name,position:u,boardColumnId:r,broadCastId:"Board-".concat(s)});case 5:if(!(d=e.sent)){e.next=10;break}return i("BoardColumnCard",{id:d,userId:c.user.id,timeStamp:Date.now(),name:t.name,position:u,boardColumnId:r}),a.handlePopOverForm(),e.abrupt("return",{response:200});case 10:return e.abrupt("return",{response:404});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.scope("Mentee");case 2:t=e.sent,this.setState({api:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.popOpen;return c.a.createElement("div",null,c.a.createElement(Na,{isOpen:e,onClose:this.handlePopOverForm,callback:this.addNewTask,structure:Zr}),c.a.createElement("div",{className:"column-footer",role:"button",tabIndex:0,onKeyDown:this.handlePopOverForm,onClick:this.handlePopOverForm},"+ New Task"))}}]),t}(r.Component),Ic=Object(p.b)(function(e){return e},Object(g.a)({},n))(wc),kc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={columnDeletePopOver:!1,id:"",columnEditPopOver:!1},a.onMore=function(){var e=Object(T.a)(M.a.mark(function e(t,n){var r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=a.props.column,"delete"===t&&a.setState({id:n,columnDeletePopOver:!0}),"edit"===t&&(Zr.map(function(e){"name"===e.id&&(e.val=r.name)}),a.setState({id:n,columnEditPopOver:!0}));case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.deleteColumn=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.api,c=n.deleteDatabaseSchema,s=n.boardId,o=a.state.id,"confirm"!==t){e.next=6;break}return e.next=5,r.deleteBoardColumn({id:o,boardId:s,broadCastId:"Board-".concat(s)});case 5:c("BoardColumn",{id:o});case 6:a.setState({id:"",columnDeletePopOver:!1});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.updateColumnName=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.api,c=n.updateDatabaseSchema,s=n.boardId,o=a.state.id,e.next=4,r.updateBoardColumn([Object(g.a)({},t,{boardId:s,broadCastId:"Board-".concat(s)}),{id:o}]);case 4:return c("BoardColumn",Object(g.a)({id:o},t)),a.setState({id:"",columnEditPopOver:!1}),e.abrupt("return",{response:200});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.closeUpdatePopOver=function(){var e=a.state.columnEditPopOver;a.setState({columnEditPopOver:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.column,n=t.columnId,r=t.index,s=t.onTaskClick,o=t.boardId,i=t.tags,l=this.state,u=l.columnDeletePopOver,d=l.columnEditPopOver;return c.a.createElement(Cc.b,{draggableId:"column".concat(a.id),index:r},function(t){return c.a.createElement("div",Object.assign({className:"column-container",ref:t.innerRef},t.draggableProps),c.a.createElement("div",{className:"column-inner-container"},c.a.createElement(Na,{onClose:e.closeUpdatePopOver,callback:e.updateColumnName,isOpen:d,structure:Zr}),c.a.createElement(Te,{isOpen:u,action:e.deleteColumn,name:a.name}),c.a.createElement("div",Object.assign({className:"column-title"},t.dragHandleProps),c.a.createElement(Aa,{id:n,onMore:e.onMore}),c.a.createElement("span",null,a.name)),c.a.createElement(Cc.c,{droppableId:"".concat(a.id),type:"task"},function(e){return c.a.createElement("div",Object.assign({className:"task-list",ref:e.innerRef},e.droppableProps),a.tasks.map(function(e,t){var a=e;return c.a.createElement(jc,{key:"task".concat(a.id),task:a,index:t,tags:i,onClick:s})}),e.placeholder)}),t.placeholder,c.a.createElement(Ic,{columnId:a.id,boardId:o})))})}}]),t}(r.Component),Nc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={popOpen:!1,api:{}},a.handlePopOverForm=function(){var e=a.state.popOpen;Zr.map(function(e){"name"===e.id&&(e.val="")}),a.setState({popOpen:!e})},a.addNewColumn=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.classId,c=n.account,s=n.database,o=n.addDatabaseSchema,i=a.state.api,l=Object.keys(s.BoardColumn.byId).reduce(function(e,t){return s.BoardColumn.byId[t].boardId===r&&(e+=16384),e},16384),e.next=5,i.addBoardColumn({userId:c.user.id,timeStamp:Date.now(),name:t.name,position:l,boardId:r,broadCastId:"Board-".concat(r)});case 5:if(!(u=e.sent)){e.next=10;break}return o("BoardColumn",{id:u,userId:c.user.id,timeStamp:Date.now(),name:t.name,position:l,boardId:r}),a.handlePopOverForm(),e.abrupt("return",{response:200});case 10:return e.abrupt("return",{response:404});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.scope("Mentee");case 2:t=e.sent,this.setState({api:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.popOpen;return c.a.createElement("div",{className:"add-new-column"},c.a.createElement(Na,{isOpen:e,onClose:this.handlePopOverForm,callback:this.addNewColumn,structure:Zr}),c.a.createElement("div",{role:"button",tabIndex:0,onKeyDown:this.handlePopOverForm,className:"title",onClick:this.handlePopOverForm},c.a.createElement("span",null,"+ New Column")))}}]),t}(r.Component);Nc.defaultProps={classId:""};var xc=Object(p.b)(function(e){return e},Object(g.a)({},n))(Nc),Sc=a(62),Ac=function(e){var t=e.comment,a=/(\s@\w+\s)|(^@\w+\s)|(^@\w+$)|(\s@\w+$)/,n=t.split(a);return c.a.createElement("div",null,n.map(function(e,t){return e&&e.match(a)?c.a.createElement("span",{key:t,style:{fontWeight:"bold",color:"rgba(19, 124, 189, 1)"}},e):e}))},Dc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={deletePopover:!1,editCommentId:null,comment:"",activeComment:{}},a.editComment=function(e){a.setState({editCommentId:e.id,comment:e.comment})},a.commentChange=function(e){a.setState({comment:e.target.value})},a.saveComment=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.editCommentId,r=t.comment,c=a.props,s=c.apis,o=c.updateDatabaseSchema,e.next=4,s.updateBoardColumnCardComment([{comment:r},{id:n}]);case 4:o("BoardColumnCardComment",{comment:r,id:n}),a.setState({editCommentId:null});case 6:case"end":return e.stop()}},e)})),a.replyComment=function(e){var t=a.props,n=t.commentReply,r=t.userList,c="Anonymous";Object.values(r.byId).map(function(t){t.id===e.userId&&(c=t.firstName)}),n("@".concat(c," "))},a.togglePopover=function(e){a.setState({deletePopover:!0,activeComment:e})},a.deleteComment=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.apis,c=n.boardId,s=n.deleteDatabaseSchema,o=a.state.activeComment,"confirm"!==t){e.next=6;break}return e.next=5,r.deleteBoardColumnCardComment({id:o.id,broadCastId:"Board-".concat(c)});case 5:s("BoardColumnCardComment",{id:o.id});case 6:a.setState({deletePopover:!1,activeComment:{}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getCommentUser=function(e){var t=a.props.userList,n="Anonymous";return Object.values(t.byId).map(function(t){t.id===e.userId&&(n=t.middleName?"".concat(t.firstName," ").concat(t.middleName," ").concat(t.lastName):"".concat(t.firstName," ").concat(t.lastName))}),n},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.comments,n=t.account,r=this.state,s=r.deletePopover,o=r.editCommentId,i=r.comment;return c.a.createElement("div",{className:"comments"},c.a.createElement(Te,{isOpen:s,name:"Comment",action:this.deleteComment}),c.a.createElement("h3",null,"History"),a.map(function(t){return c.a.createElement("div",{className:"s-comment",key:t.id},c.a.createElement("div",null,c.a.createElement("img",{src:Sc,height:"45px",alt:"profile or blank profile"})),c.a.createElement("div",{className:"com-con"},c.a.createElement("div",{className:"com-auth"},c.a.createElement("span",{style:{fontSize:"16px",fontWeight:"bold"}},e.getCommentUser(t)),c.a.createElement("small",null," ",new Date(t.timeStamp).toDateString())),c.a.createElement("div",{className:"com-desc"},o!==t.id?c.a.createElement(Ac,{comment:t.comment}):c.a.createElement("div",{className:"pc-comment-edit"},c.a.createElement(Se.a,{fill:!0,small:!0,style:{fontSize:16,padding:"2px"},placeholder:"Put your comments.",value:i,onChange:function(t){return e.commentChange(t)}}),c.a.createElement(de.b,{icon:"tick",style:{margin:"0px 5px"},onClick:e.saveComment,intent:"success"}),c.a.createElement(de.b,{icon:"cross",onClick:function(){return e.setState({editCommentId:null})}}))),o!==t.id&&c.a.createElement("div",{className:"com-config"},n.user.id===t.userId?c.a.createElement("div",null,c.a.createElement("small",{className:"primary",role:"menu",tabIndex:"0",onKeyDown:function(){return!1},onClick:function(){return e.editComment(t)}},c.a.createElement("u",null,"Edit")),c.a.createElement("small",{className:"danger",role:"menu",tabIndex:"0",onKeyDown:function(){return!1},onClick:function(){return e.togglePopover(t)}},c.a.createElement("u",null,"Delete"))):c.a.createElement("small",{className:"primary",role:"menu",tabIndex:"0",onKeyDown:function(){return!1},onClick:function(){return e.replyComment(t)}},c.a.createElement("u",null,"Reply")))))}))}}]),t}(c.a.Component),Bc=[{id:"name",fieldtype:"input",name:"Name",required:!0,placeholder:"Title"},{id:"attachment",fieldtype:"image",name:"Attachment",text:"Choose a file..."},{id:"submit",fieldtype:"button",text:"Upload",fill:"fill",intent:"success",large:"large"}],Rc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.uploadAttachment=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d,m;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.attachment){e.next=2;break}return e.abrupt("return",{response:400,error:"Choose a file"});case 2:return n=a.props,r=n.account,c=n.apis,s=n.addDatabaseSchema,o=n.boardId,i=n.task,e.prev=3,(l=new FormData).append("data",JSON.stringify({token:r.sessionId,fileType:t.attachment.type.split("/")[0],content:"board"})),l.append("file",t.attachment),e.next=9,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:l});case 9:if(200!==(u=e.sent).status){e.next=16;break}return d={userId:r.user.id,timeStamp:Date.now(),name:t.name,boardColumnCardId:i.id,url:u.data},e.next=14,c.addBoardColumnCardAttachment(Object(g.a)({},d,{broadCastId:"Board-".concat(o)}));case 14:m=e.sent,s("BoardColumnCardAttachment",Object(g.a)({},d,{id:m}));case 16:return e.abrupt("return",{response:200,message:"Uploaded"});case 19:return e.prev=19,e.t0=e.catch(3),e.abrupt("return",{response:400,error:"Network issues"});case 22:case"end":return e.stop()}},e,null,[[3,19]])}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{style:{padding:"5px",minWidth:"300px"}},c.a.createElement(Me,{callback:this.uploadAttachment,data:Bc}))}}]),t}(c.a.Component),Hc=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).onClassChange=function(e){var t=a.props.database,n=[];Object.values(t.BoardColumn.byId).map(function(t){t.boardId===parseInt(e.target.value,10)&&n.push(t)}),a.setState({classVal:e.target.value,colOptions:n.map(function(e){return{label:e.name.substring(0,50),value:e.id}}),colVal:n[0]&&n[0].id})},a.onTaskChange=function(e){a.setState({colVal:e.target.value})},a.submitForm=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.callback,n=a.state,r=n.colVal,c=n.classVal,a.setState({loading:!0}),e.next=5,t({column:r,class:c});case 5:200===(s=e.sent).response?a.setState({loading:!1,message:s.message}):a.setState({loading:!1,error:s.error});case 7:case"end":return e.stop()}},e)}));var n=a.props.database,r=Object.values(n.Board.byId),c=[];return Object.values(n.BoardColumn.byId).map(function(e){e.boardId===r[0].id&&c.push(e)}),a.state={error:null,message:null,loading:!1,classVal:r[0].id,classeOptions:r.map(function(e){return{label:e.name.substring(0,50),value:e.id}}),colOptions:c.map(function(e){return{label:e.name.substring(0,50),value:e.id}}),colVal:c[0]&&c[0].id},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.classeOptions,a=e.colOptions,n=e.colVal,r=e.classVal,s=e.error,o=e.loading,i=e.message;return c.a.createElement("div",{style:{padding:"10px"}},c.a.createElement("div",{style:{padding:"5px"}},c.a.createElement("span",{style:{fontSize:"18px",fontWeight:"bold"}},"Choose a Target Column")),c.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},c.a.createElement("div",{style:{padding:"10px"}},c.a.createElement("p",{style:{fontSize:"16px"}},"Class"),c.a.createElement(je.a,{options:t,onChange:this.onClassChange,value:r})),c.a.createElement("div",{style:{padding:"10px",marginBottom:"10px"}},c.a.createElement("p",{style:{fontSize:"16px"}},"Column"),c.a.createElement(je.a,{options:a,onChange:this.onTaskChange,value:n})),c.a.createElement("div",{className:"btn-group"},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",alignItems:"center"}},o&&c.a.createElement(ge.a,{intent:"primary",size:40}),s&&c.a.createElement(fe.c,{style:{fontSize:16,color:"red"}},s),i&&c.a.createElement(fe.c,{style:{fontSize:16,color:"green"}},i)),c.a.createElement(de.b,{text:"Submit",onClick:this.submitForm,intent:"primary",large:!0,fill:!0}))))}}]),t}(c.a.Component),Pc=function(e){var t=e.tags,a=e.addTag;return c.a.createElement("div",{style:{padding:"5px",minWidth:"250px"}},c.a.createElement("div",{style:{padding:"5px",textAlign:"center",fontSize:"15px",fontWeight:"bold"}},c.a.createElement("span",null,"Select Tags")),c.a.createElement("div",null,["primary","warning","success","danger"].map(function(e,n){var r=!1;return t.map(function(t){t.tag===e&&(r=!0)}),c.a.createElement(Oc.a,{key:n,onClick:function(){return a(e,r)},fill:!0,large:!0,intent:e,interactive:!0,style:{margin:"5px 0px"},icon:r?"tick":null})})))},Mc=function(e){var t=e.callback;return c.a.createElement("div",{style:{padding:"5px",minWidth:"300px"}},c.a.createElement(Me,{callback:t,data:[{id:"deadline",fieldtype:"date",name:"Deadline"},{id:"submit",fieldtype:"button",type:"submit",text:"ADD",fill:"fill",intent:"success",large:"large"}]}))},Tc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={deleteCardPopover:!1},a.uploadDeadLine=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.apis,c=n.task,s=n.updateDatabaseSchema,o=n.boardId,i=new Date(t.deadline).getTime(),e.next=4,r.updateBoardColumnCard([{Deadline:i,broadCastId:"Board-".concat(o)},{id:c.id}]);case 4:return s("BoardColumnCard",{id:c.id,Deadline:i}),e.abrupt("return",{response:200,message:"Deadline added"});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.copyCard=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props,r=n.apis,c=n.account,s=n.description,o=n.attachments,i=n.task,l=n.tags,e.prev=1,e.next=4,r.copyBoardColumnCard({card:Object(g.a)({},i,{userId:c.user.id,timeStamp:Date.now()}),description:Object(g.a)({},s,{userId:c.user.id,timeStamp:Date.now()}),attachments:o.map(function(e){return Object(g.a)({},e,{userId:c.user.id,timeStamp:Date.now()})}),tags:l.map(function(e){return Object(g.a)({},e,{userId:c.user.id})}),boardId:t.class,columnId:t.column});case 4:return e.abrupt("return",{response:200,message:"Copied!"});case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{response:400,error:"Could not copy"});case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a.addTag=function(){var e=Object(T.a)(M.a.mark(function e(t,n){var r,c,s,o,i,l,u,d,m,p;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,c=r.task,s=r.apis,o=r.tags,i=r.addDatabaseSchema,l=r.deleteDatabaseSchema,u=r.account,d=r.boardId,!n){e.next=7;break}return o.map(function(e){e.tag===t&&(m=e)}),e.next=5,s.deleteBoardColumnCardTag({broadCastId:"Board-".concat(d),id:m.id});case 5:return l("BoardColumnCardTag",{id:m.id}),e.abrupt("return");case 7:return e.next=9,s.addBoardColumnCardTag({broadCastId:"Board-".concat(d),userId:u.user.id,boardColumnCardId:c.id,tag:t});case 9:p=e.sent,i("BoardColumnCardTag",{id:p,userId:u.user.id,tag:t,boardColumnCardId:c.id});case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.deleteCard=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.apis,c=n.deleteDatabaseSchema,s=n.boardId,o=n.task,i=n.onClose,"confirm"!==t){e.next=9;break}return a.toggleDeleteCard(),e.next=5,r.deleteBoardColumnCard({id:o.id,broadCastId:"Board-".concat(s)});case 5:c("BoardColumnCard",{id:o.id}),i(),e.next=10;break;case 9:a.toggleDeleteCard();case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.toggleDeleteCard=function(){var e=a.state.deleteCardPopover;a.setState({deleteCardPopover:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.deleteCardPopover,t=this.props,a=t.task,n=t.tags,r=t.addDatabaseSchema,s=t.apis,o=t.account,i=t.boardId,l=t.database;return c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"rt-in"},c.a.createElement("div",{style:{padding:"5px"}},c.a.createElement("span",{style:{color:"#696969"}},"Tools")),c.a.createElement("div",{className:"rt-tools"},c.a.createElement(xa.a,{content:c.a.createElement(Pc,{addTag:this.addTag,tags:n}),position:"left-top"},c.a.createElement(de.b,{alignText:"left",icon:"tag",text:"Tag"})),c.a.createElement(xa.a,{content:c.a.createElement(Mc,{callback:this.uploadDeadLine}),position:"left-top"},c.a.createElement(de.b,{alignText:"left",icon:"outdated",text:"Deadline"})),c.a.createElement(xa.a,{content:c.a.createElement(Rc,{boardId:i,account:o,task:a,apis:s,addDatabaseSchema:r}),position:"left-top"},c.a.createElement(de.b,{alignText:"left",icon:"paperclip",text:"Attachment"}))),c.a.createElement("div",{style:{padding:"5px"}},c.a.createElement("span",{style:{color:"#696969"}},"Actions")),c.a.createElement("div",{className:"rt-actions"},c.a.createElement(xa.a,{content:c.a.createElement(Hc,{callback:this.copyCard,database:l})},c.a.createElement(de.b,{alignText:"left",icon:"move",text:"Copy"})),c.a.createElement(de.b,{alignText:"left",icon:"trash",text:"delete",onClick:this.toggleDeleteCard}),c.a.createElement(Te,{isOpen:e,action:this.deleteCard,name:a.name}))))}}]),t}(c.a.Component),Uc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a.commentChange=function(e){(0,a.props.writeComment)(e.target.value)},a.saveComment=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.apis,r=t.writeComment,c=t.task,s=t.account,o=t.boardId,i=t.addDatabaseSchema,0!==(l=t.comment).replace(/\s/g,"").length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.addBoardColumnCardComment({boardColumnCardId:c.id,comment:l,timeStamp:Date.now(),userId:s.user.id,broadCastId:"Board-".concat(o)});case 5:u=e.sent,i("BoardColumnCardComment",{id:u,boardColumnCardId:c.id,comment:l,timeStamp:Date.now(),userId:s.user.id}),r("");case 8:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.comment;return c.a.createElement("div",{className:"comment-container"},c.a.createElement(Se.a,{fill:!0,placeholder:"Put your comments.",value:t,onChange:function(t){return e.commentChange(t)}}),c.a.createElement(de.b,{style:{marginLeft:"5px"},text:"submit",intent:"primary",onClick:this.saveComment}))}}]),t}(c.a.Component),Lc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={editHead:!1,editDesc:!1,task:{},comments:[],description:{},attachments:[],tags:[],title:"",desc:"",comment:""},a.onClose=function(){var e=a.props;(0,e.onClose)(e.taskId),a.setState({editHead:!1,editDesc:!1})},a.toggleElemTitle=function(){var e=a.state.editHead;a.setState({editHead:!e})},a.titleChange=function(e){a.setState({title:e.target.value})},a.saveTitle=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.apis,r=t.boardId,c=t.updateDatabaseSchema,s=a.state,o=s.task,i=s.title,e.next=4,n.updateBoardColumnCard([{name:i,broadCastId:"Board-".concat(r)},{id:o.id}]);case 4:c("BoardColumnCard",{id:o.id,name:i}),a.toggleElemTitle();case 6:case"end":return e.stop()}},e)})),a.toggleElemDesc=function(){var e=a.state.editDesc;a.setState({editDesc:!e})},a.descChange=function(e){a.setState({desc:e.target.value})},a.saveDesc=Object(T.a)(M.a.mark(function e(){var t,n,r,c,s,o,i,l,u;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.apis,r=t.account,c=t.boardId,s=t.addDatabaseSchema,o=a.state,i=o.task,l=o.desc,e.next=4,n.addBoardColumnCardDescription({boardColumnCardId:i.id,title:l,timeStamp:Date.now(),userId:r.user.id,broadCastId:"Board-".concat(c)});case 4:u=e.sent,s("BoardColumnCardDescription",{boardColumnCardId:i.id,title:l,timeStamp:Date.now(),userId:r.user.id,id:u}),a.toggleElemDesc();case 7:case"end":return e.stop()}},e)})),a.getTags=function(){var e=a.props.tags,t=a.state.task;return t.id?Object.values(e.byId).filter(function(e){if(e.boardColumnCardId===t.id)return e}):[]},a.getName=function(e){var t=a.props.userList.byId[e];return t.middleName?"".concat(t.firstName," ").concat(t.middleName," ").concat(t.lastName):"".concat(t.firstName," ").concat(t.lastName)},a.deleteAttachment=function(){var e=Object(T.a)(M.a.mark(function e(t,n){var r,c,s,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,c=r.apis,s=r.deleteDatabaseSchema,o=r.account,e.prev=1,e.next=4,L.a.post("".concat(te,"/web/delete-file"),{token:o.sessionId,content:"board",fileName:n});case 4:return e.next=6,c.deleteBoardColumnCardAttachment({id:t});case 6:s("BoardColumnCardAttachment",{id:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error");case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t,a){return e.apply(this,arguments)}}(),a.writeComment=function(e){a.setState({comment:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.taskId,n=e.tasks,r=e.comments,c=e.attachments,s=e.descriptions,o=e.tags,i=r.filter(function(e){if(a===e.boardColumnCardId)return e}),l=c.filter(function(e){if(a===e.boardColumnCardId)return e}),u=s.filter(function(e){if(a===e.boardColumnCardId)return e}).sort(at)[0],d=Object.values(o.byId).filter(function(e){if(a===e.boardColumnCardId)return e}),m="";u&&(m=u.title),n.map(function(e){e.id===a&&t.setState({comments:i,attachments:l,task:e,tags:d,description:u,title:e.name,desc:m})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.database,r=this.state,s=r.editHead,o=r.editDesc,i=r.task,l=r.comments,u=r.attachments,d=r.title,m=r.description,p=r.desc,f=r.tags,b=r.comment,h=this.props,v=h.userList,g=h.apis,y=h.boardId,E=h.onClose,C=h.deleteDatabaseSchema,O=h.updateDatabaseSchema,j=h.addDatabaseSchema,w=h.account;return c.a.createElement(ue.a,{isOpen:a,onClose:this.onClose,className:"overlay-container",style:{width:"800px"}},c.a.createElement("div",{className:"task-detail-overlay"},c.a.createElement("div",{className:"overlay-title"},c.a.createElement("div",{className:"head"},s?c.a.createElement(Se.a,{value:d,onChange:function(t){return e.titleChange(t)}}):c.a.createElement("span",{className:"title"},i.name),s?c.a.createElement("div",{className:"buttons-group"},c.a.createElement(de.b,{icon:"tick",intent:"success",onClick:this.saveTitle}),c.a.createElement(de.b,{icon:"cross",onClick:this.toggleElemTitle})):c.a.createElement("div",{className:"buttons-group"},c.a.createElement(Z.a,{className:"edit-title",icon:"edit",onClick:this.toggleElemTitle}))),c.a.createElement(de.b,{icon:"cross",style:{float:"right"},minimal:!0,onClick:this.onClose})),c.a.createElement("div",{className:"overlay-body"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"pc-tags-and-deadline"},c.a.createElement("div",{className:"pc-tag-view"},this.getTags().map(function(e,t){return c.a.createElement(Oc.a,{key:t,large:!0,intent:e.tag,style:{margin:"5px"}})})),c.a.createElement("div",{className:"pc-deadline-view"},i.Deadline&&c.a.createElement("p",{className:i.Deadline<new Date?"expire":"no-expire"},"Deadline: ".concat(le()(i.Deadline).format("YYYY-MM-DD"))))),c.a.createElement("div",{className:"overlay-description"},c.a.createElement("div",{className:"desc-head"},c.a.createElement("u",null,"Description"),o?c.a.createElement("span",{className:"buttons-group"},c.a.createElement(de.b,{icon:"tick",onClick:this.saveDesc,intent:"success",small:!0,className:"edit-button"}),c.a.createElement(de.b,{icon:"cross",onClick:this.toggleElemDesc,small:!0,className:"edit-button"})):c.a.createElement(Z.a,{icon:"edit",onClick:this.toggleElemDesc,className:"edit-button"})),c.a.createElement("div",{className:"desc"},o?c.a.createElement(Se.a,{value:p,onChange:this.descChange}):c.a.createElement("span",null,m&&m.title))),c.a.createElement("div",{className:"attach-container"},0!==u.length&&c.a.createElement("u",null,"Attachments"),c.a.createElement("div",{className:"attach-list"},c.a.createElement("ul",null,u.map(function(t){var a=e.getName(t.userId),n="".concat(te,"/user/").concat(1e7+parseInt(t.userId,10),"/board/").concat(t.url);return c.a.createElement("li",{key:t.id},c.a.createElement("div",{className:"file-type"},c.a.createElement("span",null,t.url.split(".")[1]),c.a.createElement(Z.a,{iconSize:11,icon:"cross",className:"pc-attach-delete",onClick:function(){return e.deleteAttachment(t.id,t.url)}})),c.a.createElement("div",{className:"file-detail"},c.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n,className:"attach-title"},t.name),c.a.createElement("span",null,le()(t.timeStamp).format("DD-MM-YYYY"),c.a.createElement(Q.a,{to:"/user/".concat(t.userId)}," - ".concat(a)))))})))),c.a.createElement(Uc,{apis:g,addDatabaseSchema:j,account:w,boardId:y,task:i,writeComment:this.writeComment,comment:b}),c.a.createElement(Dc,{comments:l,account:w,apis:g,userList:v,commentReply:this.writeComment,boardId:y,deleteDatabaseSchema:C,updateDatabaseSchema:O})),c.a.createElement(Tc,{tags:f,onClose:E,boardId:y,task:i,apis:g,account:w,database:n,description:m,attachments:u,deleteDatabaseSchema:C,updateDatabaseSchema:O,addDatabaseSchema:j}))))}}]),t}(r.Component),Wc=Object(p.b)(function(e){var t=e.database,a=e.account;return{userList:t.User,account:a,database:t}})(Lc),zc=a(339),Yc=a(205),Gc=function(e){var t=e.detail;return c.a.createElement("div",{style:{padding:"10px 5px 5px 5px"}},c.a.createElement("div",{style:{padding:"2px"}},c.a.createElement(Q.a,{to:"/user/".concat(t.slug)},t.middleName?"".concat(t.firstName," ").concat(t.middleName," ").concat(t.lastName):"".concat(t.firstName," ").concat(t.lastName))))},qc=function(e){var t=e.userList,a=e.boardMembers,n=e.boardId;return c.a.createElement("div",{style:{padding:"10px 5px 5px 10px",display:"flex",alignItems:"center",flexDirection:"column"}},c.a.createElement("div",{style:{fontWeight:600,padding:"2px"}},c.a.createElement("span",null,"Members")),c.a.createElement("div",{style:{padding:"2px"}},Object.values(a.byId).map(function(e){if(e.boardId===n)return c.a.createElement("div",{style:{padding:"5px"}},c.a.createElement(Q.a,{to:"/user/".concat(t.byId[e.tuserId].slug)},t.byId[e.tuserId].middleName?"".concat(t.byId[e.tuserId].firstName," ").concat(t.byId[e.tuserId].middleName," ").concat(t.byId[e.tuserId].lastName):"".concat(t.byId[e.tuserId].firstName," ").concat(t.byId[e.tuserId].lastName)))})))},Fc=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userList,a=e.boardMembers,n=e.boardId;return c.a.createElement("div",{className:"each-item user-list"},Object.values(a.byId).map(function(e,a){if(e.boardId===n)return c.a.createElement(xa.a,{position:"bottom",content:c.a.createElement(Gc,{detail:t.byId[e.tuserId]}),key:a},c.a.createElement("div",{className:"i-user"},t.byId[e.tuserId].firstName[0].toUpperCase(),t.byId[e.tuserId].lastName[0].toUpperCase(),t.byId[e.tuserId].activeStatus&&c.a.createElement("span",{className:"green-dot"})))}),c.a.createElement(xa.a,{position:"right-top",content:c.a.createElement(qc,{userList:t,boardMembers:a,boardId:n})},c.a.createElement("div",{className:"i-user"},c.a.createElement(bn.c,{size:18}))))}}]),t}(c.a.Component),Qc=[{id:"email",fieldtype:"input",name:"Email",placeholder:"Example: nabin@properclass.com"},{id:"submit",fieldtype:"button",text:"Send Request",fill:"fill",intent:"success",large:"large"}],Vc=function(e){var t=e.callback;return c.a.createElement("div",{style:{padding:"5px",minWidth:"300px"}},c.a.createElement(Me,{data:Qc,callback:t}))},Kc=function(e){var t=function(){var t=Object(T.a)(M.a.mark(function t(a){var n,r,c,s,o;return M.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.apis,r=e.boardId,c=e.account,s=Object(g.a)({},a,{joinStatus:!0,userType:"normal",fuserId:c.user.id,boardId:r,timeStamp:Date.now()}),t.prev=2,t.next=5,n.addBoardMember(s);case 5:if(200!==(o=t.sent).status){t.next=8;break}return t.abrupt("return",{response:200,message:"Congratulations! You have added a new user"});case 8:return t.abrupt("return",{response:201,error:o.message});case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",{response:400,error:"Network Error"});case 14:case"end":return t.stop()}},t,null,[[2,11]])}));return function(e){return t.apply(this,arguments)}}();return c.a.createElement(xa.a,{content:c.a.createElement(Vc,{callback:t})},c.a.createElement(de.b,{minimal:!0,text:"Add user +"}))},Jc=function(e,t){for(var a=e.toDataURL({format:"jpeg",quality:1}).split(","),n=a[0].match(/:(.*?);/)[1],r=window.atob(a[1]),c=r.length,s=new Uint8Array(c);c;)s[c-=1]=r.charCodeAt(c);return new File([s],t,{type:n})},Zc=function(){var e=Object(T.a)(M.a.mark(function e(t,a){var n,r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("data",JSON.stringify({token:a.sessionId,fileType:"image",content:"report"})),n.append("file",t),e.next=6,L()({config:{headers:{"Content-Type":"multipart/form-data"}},method:"post",url:"".concat(te,"/web/upload-file"),data:n});case 6:if(200!==(r=e.sent).status){e.next=9;break}return e.abrupt("return",r.data);case 9:return e.abrupt("return",!1);case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t,a){return e.apply(this,arguments)}}(),Xc=function(){var e=Object(T.a)(M.a.mark(function e(t){var a,n,r,c,s,o,i,l,u,d;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.account,n=t.apis,r=t.boardDetail,c=t.tableData,s=["BoarActivityBarChart.jpeg","BoardActivityLineChart.jpeg","CommunicationActivityBarChart.jpeg","CommunicationActivityLineChart.jpeg"],o=["board-activity-bar-chart","board-activity-line-chart","communication-activity-bar-chart","communication-activity-line-chart"].map(function(e){return document.getElementById(e)}),i=o.map(function(e,t){return Jc(e,s[t])}),l=i.map(function(e){return Zc(e,a)}),e.next=8,Promise.all(l);case 8:return u=e.sent,e.next=11,n.generateReport({allImages:u,boardDetail:r,tableData:c});case 11:return d=e.sent,e.abrupt("return",{images:u,pdf:d});case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_c=a(338),$c=a(95),es=a.n($c),ts=["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080","#000000"],as=function(e,t,a,n,r,c,s){return new es.a(s,{type:"horizontalBar",data:{labels:e,datasets:[{label:t,data:a,backgroundColor:e.map(function(e,t){return ts[t]}),borderColor:e.map(function(e,t){return ts[t]}),borderWidth:1}]},options:{responsive:!0,title:{display:!0,text:n},scales:{yAxes:[{display:!0,scaleLabel:{display:!0,labelString:r},ticks:{beginAtZero:!0}}],xAxes:[{display:!0,scaleLabel:{display:!0,labelString:c},ticks:{beginAtZero:!0}}]}}})},ns=function(e,t,a){var n=e.map(function(e){return e.firstName});return as(n,"Board Activities",t,"Boar Activities Bar Chart","User List","No of Board Activities",a)},rs=a(96),cs=a(337),ss=a(346),os=a(319),is=a(98),ls=function(e,t){return e.map(function(e){return e.filter(function(e){return e.userId===t})}).map(function(e){return e.length})},us=function(e,t){var a=e[0].timeStamp,n=[],r=[],c=0;e.forEach(function(e){t(new Date(a),new Date(e.timeStamp))?r.push(Object(g.a)({},e,{sameValue:c})):(c+=1,r.push(Object(g.a)({},e,{sameValue:c})),a=e.timeStamp)});for(var s=function(e){n.push(r.filter(function(t){return t.sameValue===e}))},o=0;o<=c;o+=1)s(o);return n},ds=function(e,t){for(var a=[],n=t(new Date(Date.now()),new Date(e[0].timeStamp)),r=1;r<=n+1;r+=1)a.push(r);return a},ms=function(e,t,a,n,r){var c,s;switch(r){case"Week":c=us(n,is.a),s=ds(n,cs.a);break;case"Month":c=us(n,rs.a),s=ds(n,ss.a);break;default:c=us(n,We.a),s=ds(n,os.a)}var o=e.map(function(e,t){return{label:e.firstName,backgroundColor:ts[t],borderColor:ts[t],data:ls(c,e.id),fill:!1}});return ps(s,"Communication Activities","Communication Activities","No of Days",o,a)},ps=function(e,t,a,n,r,c){return new es.a(c,{type:"line",data:{labels:e,datasets:r},options:{responsive:!0,title:{display:!0,text:t},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{yAxes:[{display:!0,scaleLabel:{display:!0,labelString:a},ticks:{beginAtZero:!0}}],xAxes:[{display:!0,scaleLabel:{display:!0,labelString:n},ticks:{beginAtZero:!0}}]}}})},fs=function(e,t){for(var a=[],n=t(new Date(Date.now()),new Date(e[0].timeStamp)),r=1;r<=n+1;r+=1)a.push(r);return a},bs=function(e,t,a,n,r){var c,s;switch(r){case"Week":c=us(n,is.a),s=fs(n,cs.a);break;case"Month":c=us(n,rs.a),s=fs(n,ss.a);break;default:c=us(n,We.a),s=fs(n,os.a)}var o=e.map(function(e,t){return{label:e.firstName,backgroundColor:ts[t],borderColor:ts[t],data:ls(c,e.id),fill:!1}});return ps(s,"Board Activities Chart","Activities","No Of Days",o,a)},hs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={timelineValue:"Day",myBarChart:null,myLineChart:null},a.drawChart=function(e){var t=document.getElementById("board-activity-bar-chart"),n=document.getElementById("board-activity-line-chart"),r=a.props,c=r.boardActivities,s=r.userList,o=r.users,i=[];s.forEach(function(e){var t=c.filter(function(t){return t.userId===e.tuserId});i.push(t)});var l=s.map(function(e){return Object.values(o.byId).find(function(t){return t.id===e.tuserId})}),u=i.map(function(e){return e.length}),d=ns(l,u,t),m=bs(l,i,n,c,e);a.setState({myLineChart:m,myBarChart:d})},a.timelineChange=function(e){var t=a.state,n=t.myBarChart,r=t.myLineChart;a.setState({timelineValue:e.target.value}),n&&(n.destroy(),r.destroy()),a.drawChart(e.target.value)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.timelineValue;this.drawChart(e)}},{key:"render",value:function(){var e=this.state.timelineValue;return c.a.createElement("div",{className:"pc-canvases"},c.a.createElement("div",{className:"pc-canvas-con"},c.a.createElement("canvas",{id:"board-activity-bar-chart",width:400,height:400})),c.a.createElement("div",{className:"pc-graph-timeline"},c.a.createElement("h3",null,"Select a timeline: "),c.a.createElement(_c.a,{className:"pc-report-radio-group",inline:!0,onChange:this.timelineChange,selectedValue:e},c.a.createElement(Mr.a,{label:"Day",value:"Day"}),c.a.createElement(Mr.a,{label:"Week",value:"Week"}),c.a.createElement(Mr.a,{label:"Month",value:"Month"}))),c.a.createElement("div",{className:"pc-canvas-con"},c.a.createElement("canvas",{id:"board-activity-line-chart",width:400,height:400})))}}]),t}(c.a.Component),vs=function(e,t,a){var n=e.map(function(e){return e.firstName});return as(n,"Communication Activities",t,"Communication Activities Bar Chart","User List","No Of Hours",a)},gs=function(e){return(e.reduce(function(e,t){return t.type&&(e+=t.duration),e},0)/36e5).toFixed(2)},ys=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={timelineValue:"Day",myBarChart:null,myLineChart:null},a.drawChart=function(e){var t=document.getElementById("communication-activity-bar-chart"),n=document.getElementById("communication-activity-line-chart"),r=a.props,c=r.boardCommunicationActivities,s=r.userList,o=r.users,i=[];s.forEach(function(e){var t=c.filter(function(t){return t.userId===e.tuserId});i.push(t)});var l=s.map(function(e){return Object.values(o.byId).find(function(t){return t.id===e.tuserId})}),u=i.map(function(e){return gs(e)}),d=vs(l,u,t),m=ms(l,i,n,c,e);a.setState({myLineChart:m,myBarChart:d})},a.timelineChange=function(e){var t=a.state,n=t.myLineChart,r=t.myBarChart;a.setState({timelineValue:e.target.value}),n&&(n.destroy(),r.destroy()),a.drawChart(e.target.value)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.timelineValue;this.drawChart(e)}},{key:"render",value:function(){var e=this.state.timelineValue;return c.a.createElement("div",{className:"pc-canvases"},c.a.createElement("div",{className:"pc-canvas-con"},c.a.createElement("canvas",{id:"communication-activity-bar-chart",width:400,height:400})),c.a.createElement("div",{className:"pc-graph-timeline"},c.a.createElement("h3",null,"Select a timeline: "),c.a.createElement(_c.a,{className:"pc-report-radio-group",inline:!0,onChange:this.timelineChange,selectedValue:e},c.a.createElement(Mr.a,{label:"Day",value:"Day"}),c.a.createElement(Mr.a,{label:"Week",value:"Week"}),c.a.createElement(Mr.a,{label:"Month",value:"Month"}))),c.a.createElement("div",{className:"pc-canvas-con"},c.a.createElement("canvas",{id:"communication-activity-line-chart",width:400,height:400})))}}]),t}(c.a.Component),Es=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"pc-report-charts"},c.a.createElement(hs,this.props),c.a.createElement(ys,this.props))}}]),t}(c.a.Component),Cs=function(e,t){return t.map(function(t,a){return c.a.createElement("tr",{key:a,style:{background:t.rowColor?t.rowColor:a%2===0?"white":"#f5f5f5"}},function(e,t){return e.map(function(e,a){return c.a.createElement("td",{key:a,style:{textAlign:"center",padding:8}},t[e])})}(e,t))})},Os=function(e){return c.a.createElement("div",{style:{width:"100%",overflowX:"auto"}},c.a.createElement("table",{className:"pc-table"},c.a.createElement("tbody",null,c.a.createElement("tr",null,Object.values(e.headers).map(function(e,t){return c.a.createElement("th",{key:t},e)})),Cs(Object.keys(e.headers),e.data))))},js=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).fetchReport=Object(T.a)(M.a.mark(function e(){var t,n,r,c;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.boardId,r=t.apis,e.next=3,r.getBoardActivity({boardId:n});case 3:(c=e.sent)?a.setState({boardActivities:c.boardActivities,boardCommunicationActivities:c.boardCommunicationActivities}):a.setState({error:"Faild to fetch report data."});case 5:case"end":return e.stop()}},e)})),a.generatePdfHandler=function(){var e=Object(T.a)(M.a.mark(function e(t,n){var r,c,s;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.account,a.setState({loading:!0}),c=document.getElementById("report-chart"),e.next=5,Xc(Object(g.a)({},a.props,{canvas:c,boardDetail:t,tableData:n}));case 5:(s=e.sent).images.map(function(){var e=Object(T.a)(M.a.mark(function e(t){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.post("".concat(te,"/web/delete-file"),{token:r.sessionId,content:"report",fileName:t});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Internal Error",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()),a.setState({loading:!1,pdfUrl:"".concat(te,"/user/").concat(1e7+parseInt(r.user.id,10),"/report/").concat(s.pdf)});case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.state={boardActivities:null,pdfUrl:null,loading:!1,boardCommunicationActivities:null,error:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.isOpen,n=t.onClose,r=t.boardId,s=t.boards,o=t.users,i=t.boardMembers,l=this.state,u=l.boardActivities,d=l.error,m=l.boardCommunicationActivities,p=l.loading,f=l.pdfUrl,b=s.byId[r].name,h=Object.values(i.byId).filter(function(e){return e.boardId===r}),v=h.map(function(e){return Object.values(o.byId).find(function(t){return t.id===e.tuserId})}),g=u?v.map(function(e){return function(e,t,a){return{userName:e.firstName,noOfCreateCard:t.filter(function(t){return t.userId===e.id}).filter(function(e){return"Create Card"===e.message}).length,noOfComment:t.filter(function(t){return t.userId===e.id}).filter(function(e){return"Create Comment"===e.message}).length,noOfHours:(a.filter(function(t){return t.userId===e.id}).reduce(function(e,t){return t.type&&(e+=t.duration),e},0)/36e5).toFixed(2),noOfMessage:a.filter(function(t){return t.userId===e.id}).length}}(e,u,m)}):[];return c.a.createElement(ue.a,{onOpening:this.fetchReport,isOpen:a,title:b,icon:"chart",onClose:n,className:"pc-report-overlay"},u&&!d?c.a.createElement("div",{className:"pc-report-content"},c.a.createElement(Es,Object.assign({boardId:r},this.props,{boardActivities:u,boardCommunicationActivities:m,userList:h})),c.a.createElement("div",{className:"pc-report-table-con"},c.a.createElement("div",{className:"table-title"},c.a.createElement("h3",null,"Tabulated Data")),c.a.createElement(Os,{headers:{userName:"Users",noOfCreateCard:"No of cards created",noOfMoveCard:"No of card moves",noOfComment:"No of comments",noOfHours:"Call time(hr)",noOfMessage:"Total messages sent"},data:g})),c.a.createElement("div",{className:"pc-pdf-gen-btn-con"},f&&c.a.createElement("div",{className:"pdf-link"},c.a.createElement("a",{href:f,rel:"noopener noreferrer",target:"_blank"},"Download Pdf")),c.a.createElement(de.b,{loading:p,text:"Generate PDF",intent:"success",onClick:function(){return e.generatePdfHandler(s.byId[r],g)}}))):c.a.createElement(ge.a,{intent:"success"}))}}]),t}(c.a.Component),ws=js;js.defaultProps={isOpen:null};var Is=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showReport:null},a.toggleAddUser=function(){var e=a.state.addUser;a.setState({addUser:!e})},a.onChat=function(){var e=a.props,t=e.updateWebRtc,n=e.boardId;t("showCommunication",n),t("peerType","board"),t("communicationContainer","history"),t("chatHistory",{type:"board",user:{user:null},connectionId:n})},a.generateReportHandler=function(){a.setState({showReport:window.location.pathname})},a.reportCloseHandler=function(){a.setState({showReport:null})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.boards,a=e.boardId,n=e.users,r=e.boardMembers,s=e.account,o=e.apis,i=e.UserDetail,l=Object.values(i.byId).find(function(e){return e.userId===s.user.id}),u=Object.values(t.byId).find(function(e){return e.id===a}),d=this.state.showReport;return c.a.createElement("div",{className:"tool-bar"},c.a.createElement(ws,Object.assign({isOpen:d,onClose:this.reportCloseHandler,boardId:a},this.props,{boards:t,apis:o,users:n})),c.a.createElement("div",{className:"toolbar-container"},c.a.createElement("div",{className:"left-tools"},c.a.createElement("div",{className:"class-name each-item"},u.name),c.a.createElement(zc.a,null),c.a.createElement(Fc,{userList:n,boardId:a,boardMembers:r})),c.a.createElement("div",{className:"right-tools"},c.a.createElement(de.b,{minimal:!0,icon:"chat",onClick:this.onChat}),c.a.createElement(Kc,{apis:o,account:s,boardId:a}),l&&"mentor"===l.type&&c.a.createElement(me.a,{content:c.a.createElement("span",{style:{color:"#1d4354"}},"Generate Report")},c.a.createElement(de.b,{minimal:!0},c.a.createElement(Yc.a,{size:20,onClick:this.generateReportHandler}))))))}}]),t}(c.a.Component),ks=Object(p.b)(function(e){var t=e.database,a=e.account;return{boards:t.Board,UserDetail:t.UserDetail,users:t.User,boardMembers:t.BoardMember,account:a,database:t}},Object(g.a)({},n))(Is),Ns=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,api:{},classId:0,columns:[],tasks:[],comments:[],attachments:[],descriptions:[],taskOverlayIsOpen:!1,taskIdInOverlay:0},a.onDragEnd=function(){var e=Object(T.a)(M.a.mark(function e(t){var n,r,c,s,o,i,l,u,d,m,p,f,b,h,v,g,y,E,C,O,j,w,I,k,N,x,S,A,D;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.source,r=t.destination,c=t.draggableId,s=t.type,o=a.state,i=o.api,l=o.columns,u=o.classId,r){e.next=4;break}return e.abrupt("return");case 4:if("column"!==s){e.next=18;break}if(n.index!==r.index){e.next=7;break}return e.abrupt("return");case 7:return d=Number(c.split("column")[1]),m=l,p={},l.map(function(e){e.id===d&&(p=e)}),0===r.index?p.position=l[0].position/2:r.index===l.length-1?p.position=l[r.index].position+16384:(n.index>r.index&&(p.position=(l[r.index-1].position+l[r.index].position)/2),n.index<r.index&&(p.position=(l[r.index].position+l[r.index+1].position)/2)),m.splice(n.index,1),m.splice(r.index,0,p),a.setState({columns:m}),e.next=17,i.updateBoardColumn([{position:p.position,timeStamp:Date.now(),broadCastId:"Board-".concat(u)},{id:d}]);case 17:return e.abrupt("return");case 18:if(n.droppableId!==r.droppableId){e.next=37;break}return f=Number(n.droppableId),b=Number(c.split("task")[1]),h=l,g={},y=[],l.map(function(e,t){e.id===f&&(g=e,y=e.tasks,v=t)}),E={},y.map(function(e){e.id===b&&(E=e)}),0===r.index?E.position=y[0].position/2:r.index===y.length-1?E.position=y[r.index].position+16384:(n.index>r.index&&(E.position=(y[r.index-1].position+y[r.index].position)/2),n.index<r.index&&(E.position=(y[r.index].position+y[r.index+1].position)/2)),y.splice(n.index,1),y.splice(r.index,0,E),g.tasks=y,h.splice(v,1),h.splice(v,0,g),a.setState({columns:h}),e.next=36,i.updateBoardColumnCard([{position:E.position,todo:"withinColumn",timestamp:Date.now(),broadCastId:"Board-".concat(u)},{id:b}]);case 36:return e.abrupt("return");case 37:return C=Number(n.droppableId),O=Number(r.droppableId),j=Number(c.split("task")[1]),N={},x={},(w=l).map(function(e,t){e.id===C&&(N=e,I=t),e.id===O&&(x=e,k=t)}),S=N.tasks,A=x.tasks,S.map(function(e){e.id===j&&(D=e)}),S.splice(n.index,1),0===r.index?0!==A.length?D.position=A[0].position/2:D.position=16384:r.index===A.length?D.position=A[r.index-1].position+16384:D.position=(A[r.index-1].position+A[r.index].position)/2,A.splice(r.index,0,D),x.tasks=A,N.tasks=S,w.splice(I,1),w.splice(I,0,N),w.splice(k,1),w.splice(k,0,x),a.setState({columns:w}),e.next=59,i.updateBoardColumnCard([{todo:"outsideColumn",position:D.position,timeStamp:Date.now(),boardColumnId:O,broadCastId:"Board-".concat(u)},{id:j}]);case 59:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.toggleTaskOverlay=function(e){var t=a.state.taskOverlayIsOpen;a.setState({taskIdInOverlay:e,taskOverlayIsOpen:!t})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match;se.scope("Mentee").then(function(a){e.setState({api:a,classId:parseInt(t.params.classId,10),loading:!1}),e.componentWillReceiveProps(e.props)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.tasks,a=e.columns,n=e.comments,r=e.attachments,c=e.descriptions,s=e.match,o=[];Object.values(a.byId).map(function(e){if(e.boardId===Number(s.params.classId)){var a=Object(g.a)({},e),n=[];Object.values(t.byId).map(function(t){t.boardColumnId===e.id&&n.push(t)}),n.sort(tt),a.tasks=n,o.push(a)}}),this.setState({tasks:Object.values(t.byId),columns:o.sort(tt),comments:Object.values(n.byId).sort(at),attachments:Object.values(r.byId),descriptions:Object.values(c.byId)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.classId,n=t.columns,r=t.tasks,s=t.api,o=t.taskIdInOverlay,i=t.taskOverlayIsOpen,l=t.comments,u=t.attachments,d=t.descriptions,m=t.loading,p=this.props,f=p.addDatabaseSchema,b=p.tags,h=p.account,v=p.updateDatabaseSchema,g=p.deleteDatabaseSchema,y=p.match;return h.sessionId?!h.user||m?c.a.createElement(Oa,null):h.user.slug!==y.params.userSlug?c.a.createElement(F.a,{to:"/"}):c.a.createElement("div",{style:{position:"relative"}},c.a.createElement(Qa,{className:"pcm-nav"}),c.a.createElement(ks,{boardId:a,apis:s}),c.a.createElement("div",{className:"class-wrapper",style:{height:window.innerHeight}},c.a.createElement(Cc.a,{onDragEnd:this.onDragEnd},c.a.createElement(Cc.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},function(t){return c.a.createElement("div",Object.assign({className:"columns"},t.droppableProps,{ref:t.innerRef}),n.map(function(t,n){if(t.boardId===a)return c.a.createElement(kc,{key:"column".concat(t.id),column:t,columnId:t.id,index:n,api:s,tags:b,boardId:a,addDatabaseSchema:f,updateDatabaseSchema:v,deleteDatabaseSchema:g,onTaskClick:e.toggleTaskOverlay})}),t.placeholder,c.a.createElement(xc,{classId:a}))}))),c.a.createElement(Wc,{apis:s,isOpen:i,taskId:o,tasks:r,onClose:this.toggleTaskOverlay,comments:l,attachments:u,descriptions:d,boardId:a,tags:b,addDatabaseSchema:f,updateDatabaseSchema:v,deleteDatabaseSchema:g})):c.a.createElement(F.a,{to:"/"})}}]),t}(r.Component),xs=Object(p.b)(function(e){var t=e.database;return{account:e.account,columns:t.BoardColumn,tasks:t.BoardColumnCard,comments:t.BoardColumnCardComment,descriptions:t.BoardColumnCardDescription,attachments:t.BoardColumnCardAttachment,boardUsers:t.User,tags:t.BoardColumnCardTag}},Object(g.a)({},n))(Ns),Ss=[{id:"email",fieldtype:"input",name:"Email",placeholder:"Eg, alex@gmail.com",required:!0},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"primary",large:"large"}],As=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(Me,{data:Ss,callback:Sn})}}]),t}(r.Component),Ds=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"o-log-or-reg"},c.a.createElement("div",{className:"log-or-reg"},c.a.createElement("div",{className:"reg-box-header"},c.a.createElement("p",null,"Recover your password"),c.a.createElement(Q.a,{to:"/login"},c.a.createElement("u",null,"or login to your account"))),c.a.createElement(As,null)))}}]),t}(r.Component),Bs=[{id:"newPassword",fieldtype:"input",hidden:!0,name:"New Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"}},{id:"confirmPassword",fieldtype:"input",hidden:!0,name:"Confirm Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"}},{id:"submit",type:"submit",fieldtype:"button",text:"Submit",fill:"fill",intent:"primary",large:"large"}],Rs=[{id:"oldPassword",fieldtype:"input",hidden:!0,name:"Old Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"}},{id:"newPassword",fieldtype:"input",hidden:!0,name:"New Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"}},{id:"confirmPassword",fieldtype:"input",hidden:!0,name:"Confirm Password",placeholder:"Eg, ........",icon:{side:"right",name:"eye-open"}},{id:"submit",fieldtype:"button",type:"submit",text:"Submit",fill:"fill",intent:"primary",large:"large"}],Hs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.pForm;return c.a.createElement(Me,{data:e,callback:Dn})}}]),t}(r.Component),Ps=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.type;return c.a.createElement("div",{className:"o-log-or-reg"},c.a.createElement("div",{className:"log-or-reg"},c.a.createElement("div",{className:"reg-box-header"},c.a.createElement("p",null," Reset your password ")),c.a.createElement(Hs,{pForm:"change"===e?Rs:Bs})))}}]),t}(r.Component),Ms=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={emailVerification:null,loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match,e.prev=1,e.next=4,L.a.get("".concat(te,"/auth/email-verification?token=").concat(t.params.token));case 4:200===e.sent.status&&this.setState({emailVerification:!0,loading:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({emailVerification:!1,loading:!1});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.emailVerification,a=e.loading;return c.a.createElement("div",null,a?c.a.createElement(ge.a,{size:30}):c.a.createElement("div",null,c.a.createElement(Ln,{message:t?"You have been verified":"Verification failed",intent:t?"success":"danger"}),c.a.createElement("div",{style:{marginTop:50}},t&&c.a.createElement(Mn,null))))}}]),t}(c.a.Component),Ts=a(103),Us=function(e){var t=e.obj,a=t.blog.content.replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").substring(0,300),n=t.userDetails.find(function(e){return e.user.id===t.blog.userId}),r=t.blog.coverImage?"".concat(te,"/user/").concat(1e7+parseInt(t.blog.userId,10),"/blog/").concat(t.blog.coverImage):Ts;return c.a.createElement("div",{className:"ar-left-i"},c.a.createElement("div",{className:"ar-i-img"},c.a.createElement("img",{alt:"test here",height:"170px",src:r})),c.a.createElement("div",{className:"ar-i-detail"},c.a.createElement(Q.a,{to:"/blog/".concat(n.user.slug,"/").concat(t.blog.slug),className:"ar-i-title"},t.blog.title),c.a.createElement("p",null,c.a.createElement("span",null,"Author-"),c.a.createElement(Q.a,{to:"/user/".concat(n.user.slug,"/")}," ".concat(n.user.firstName," ").concat(n.user.middleName?"".concat(n.user.middleName," "):"").concat(n.user.lastName)),c.a.createElement("br",null),c.a.createElement("small",{className:"pc-date"},new Date(t.blog.timeStamp).toDateString())),c.a.createElement("p",{className:"pc-blog-desc"},"".concat(a," ...")),c.a.createElement("div",{className:"ar-i-counts"},c.a.createElement("p",{className:"label"},c.a.createElement("span",{className:"count"},t.blogComment.length),"Comments"),c.a.createElement("p",{className:"label"},c.a.createElement("span",{className:"count"},t.blogLike.length),"Likes"))))},Ls=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,data:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(T.a)(M.a.mark(function e(){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,this.props.updateNav)({schema:"mainNav",data:{name:"archive"}}),e.prev=2,e.next=5,L.a.get("".concat(te,"/web/get-index"));case 5:t=e.sent,this.setState({data:t.data,loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Eror: ",e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.data;return t?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"archive"},c.a.createElement("div",{className:"ar-top"},c.a.createElement("span",null,"BASED ON YOUR READING HISTORY")),c.a.createElement("div",{className:"ar-content"},c.a.createElement("div",{className:"ar-left"},a.archive.map(function(e,t){return c.a.createElement(Us,{key:t,obj:e})})),c.a.createElement("div",{className:"ar-right"},c.a.createElement("p",{className:"ar-right-top"},"Popular on PC"),c.a.createElement("hr",null)))),c.a.createElement(Va,null))}}]),t}(c.a.Component),Ws=Object(p.b)(function(e){return e},Object(g.a)({},n))(Ls),zs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:"tour"}})}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"take-tour"},c.a.createElement("iframe",{width:"600",height:"600",src:"https://www.youtube.com/embed/tgbNymZ7vqY"})))}}]),t}(c.a.Component),Ys=Object(p.b)(function(e){return e},Object(g.a)({},n))(zs),Gs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-about"},c.a.createElement("div",{className:"pc-about-header"},c.a.createElement("h1",null,"About Us"),c.a.createElement("p",null,"Revolutionizing Online Mentorship")),c.a.createElement("div",{className:"pc-about-content"},c.a.createElement("h2",null,"Our Story"),c.a.createElement("p",null,"Proper Class begins some years ago when two classmates were doing their college project during their bachelors final year. They realized the traditional way of in person Mentorship has not been effective in this era. So they came up with a plan to integrate all the tools and techniques to make online Mentorship possible and better."),c.a.createElement("h2",null,"Mentorship since history"),c.a.createElement("p",null,"Great men and women who left remarkable achievements and great inspiration had Mentors in their lives. Bruce Lee, Albert Einstein, Steven Hawkins, Alexander The Great, Aristotle, Plato, Steve Jobs and many other great leaders and protagonists had one or more Mentors in their lives.",c.a.createElement("br",null),c.a.createElement("br",null),"Mentorship is not just a tool or a concept to do good in our lives but it has been in many cultures sinces ages. Like Hindu people have gurus who mentor them throughout their lifetime in bad and good times. Mentors are respected, loved and given a higher priority."),c.a.createElement("h2",null,"A World of Opportunities"),c.a.createElement("p",null,"Proper Class gives a platform for learners and teachers. Specially to professionals who have real field knowledge, and have ability to pass that knowledge to noobies who are just aspiring. And to the people who are looking to get real field knowledge through experienced Mentors. Proper Class breaks the physical barriers and makes it possible to meet experienced mentors, get mentored and pay from a single place."),c.a.createElement("h2",null,"Our Vision"),c.a.createElement("p",null,"A world with practical education from experienced Mentors."),c.a.createElement("h2",null,"Our Mission"),c.a.createElement("p",null,"To create opportunities so people can share and access quality education."))),c.a.createElement(Va,null))}}]),t}(c.a.Component),qs=Object(p.b)(function(e){return e},Object(g.a)({},n))(Gs),Fs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-privacy"},c.a.createElement("div",{className:"pc-privacy-content"},c.a.createElement("h2",null,"Privacy Policy"),c.a.createElement("p",null,"We use your personal information only for providing services and improving the Site. By using the site, you agree to the collection and use of information in accordance with the following policy. Unless otherwise defined in this Privacy Policy, terms used in this privacy policy have the same meanings as in our"," ",c.a.createElement(Q.a,{to:"/terms-and-conditions"},"Terms and Conditions"),"."),c.a.createElement("h3",null,"1. Information We Collect"),c.a.createElement("ul",null,c.a.createElement("li",null,"The information you actively give us when you perform certain actions in our site, such as creating an account, filling out your profile details, writing blogs, creating classrooms(Projects), and communications(audio, video, conferencing etc.)."),c.a.createElement("li",null,'While using our site you may also provide data that is not personally identifiable("non-identifying data"). This includes your expertize, timezone, language.'),c.a.createElement("li",null,"We may also collect information about your interactions with this Platform, such as requests posted, session history, pages viewed, likes and connections."),c.a.createElement("li",null,'Like many sites, we collect information that your browser sends whenever you visit our site ("Log Data"). This Log Data may include information such as your computer\'s Internet Protocol address, browser type, browser version, the pages of our site that you visit, the time and date of your visit, the time spent on those pages, and other statistics.'),c.a.createElement("li",null,"Our website also sends your browser some cookies which are stored on your computers hard drive. Cookies are very small files containing data. However you can block cookies from your browser settings. We recommend you not blocking the cookies because we use it to enhance your experience in our site."),c.a.createElement("li",null,"If you connect your Proper Class account with third parties like google, we store information provided by those third-party services such as email and profile information. This information is controlled by the third-party service or your authorization via the privacy settings at that service.")),c.a.createElement("h3",null,"2. Use of Personal Information"),c.a.createElement("ul",null,c.a.createElement("li",null,"We may use your personal credentials to send you emails, notifications or other important reminders."),c.a.createElement("li",null,"Information collected from users can also be used to analyse the trend to improve our product development."),c.a.createElement("li",null,"Collected data is used to improve, maintain, and develop our services. For example, we use the personal information to recommend mentors to mentees."),c.a.createElement("li",null,"We may use also feature profile in our most viewed pages as our testimonials and success stories."),c.a.createElement("li",null,"To investigate and prevent security issues and abuse."),c.a.createElement("li",null,"We display your public information to other people using our site, such as your experience, education etc. But we won't share your sensitive information like conversation and login credentials.")))),c.a.createElement(Va,null))}}]),t}(c.a.Component),Qs=Object(p.b)(function(e){return e},Object(g.a)({},n))(Fs),Vs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-terms"},c.a.createElement("div",{className:"pc-terms-content"},c.a.createElement("h2",null,"Terms and Conditions"),c.a.createElement("p",null,"Terms and Conditions Coming Soon...."))),c.a.createElement(Va,null))}}]),t}(c.a.Component),Ks=Object(p.b)(function(e){return e},Object(g.a)({},n))(Vs),Js=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-support"},c.a.createElement("div",{className:"pc-support-content"},c.a.createElement("h2",null,"Support"),c.a.createElement("p",null,"Please make sure you need it before you write us.",c.a.createElement("br",null),"If you are facing any problem on this site. Please write us your issue."," ",c.a.createElement(Q.a,{to:"#"},"support@properclass.com")))),c.a.createElement(Va,null))}}]),t}(c.a.Component),Zs=Object(p.b)(function(e){return e},Object(g.a)({},n))(Js),Xs=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-career"},c.a.createElement("div",{className:"pc-career-content"},c.a.createElement("h2",null,"Careers"),c.a.createElement("p",null,"We do not have any job openings at the moment.",c.a.createElement("br",null),"But we always review what you can offer. You can write us at"," ",c.a.createElement(Q.a,{to:"#"},"careers@properclass.com")))),c.a.createElement(Va,null))}}]),t}(c.a.Component),_s=Object(p.b)(function(e){return e},Object(g.a)({},n))(Xs),$s=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-report"},c.a.createElement("div",{className:"pc-report-content"},c.a.createElement("h2",null,"Report"),c.a.createElement("p",null,"If you find any sort of malfunction, bug or if you find anything abusive.",c.a.createElement("br",null),"Please write us about at"," ",c.a.createElement(Q.a,{to:"#"},"report@properclass.com")))),c.a.createElement(Va,null))}}]),t}(c.a.Component),eo=Object(p.b)(function(e){return e},Object(g.a)({},n))($s),to=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-business"},c.a.createElement("div",{className:"pc-business-content"},c.a.createElement("h2",null,"Business Enquiry"),c.a.createElement("p",null,"Our main business is Proper Class online Mentorship platform. However we provide other tech related solutions.",c.a.createElement("br",null),"If you are willing to partner with us or want to know more about our business. Please write us at"," ",c.a.createElement(Q.a,{to:"#"},"info@properclass.com")))),c.a.createElement(Va,null))}}]),t}(c.a.Component),ao=Object(p.b)(function(e){return e},Object(g.a)({},n))(to),no=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.updateNav)({schema:"mainNav",data:{name:""}}),this.setState({loading:!1})}},{key:"render",value:function(){return this.state.loading?c.a.createElement(Oa,null):c.a.createElement("div",null,c.a.createElement(Qa,null),c.a.createElement("div",{className:"pc-services"},c.a.createElement("div",{className:"pc-services-content"},c.a.createElement("h2",null,"Our Software Services"),c.a.createElement("p",null,"Our main business is Proper Class online Mentorship platform. However we provide other tech related solutions. We have expertize on mobile app development, digital marketing, web application development, machine learning and AI.",c.a.createElement("br",null),"If you are looking for software solutions for your business, please write us at"," ",c.a.createElement(Q.a,{to:"#"},"info@properclass.com")))),c.a.createElement(Va,null))}}]),t}(c.a.Component),ro=Object(p.b)(function(e){return e},Object(g.a)({},n))(no),co=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.account;return c.a.createElement(B.a,null,c.a.createElement("div",{className:"home-screen"},c.a.createElement(R.a,null,c.a.createElement(H.a,{exact:!0,path:"/about",component:qs}),c.a.createElement(H.a,{exact:!0,path:"/privacy-policy",component:Qs}),c.a.createElement(H.a,{exact:!0,path:"/terms-and-conditions",component:Ks}),c.a.createElement(H.a,{exact:!0,path:"/support",component:Zs}),c.a.createElement(H.a,{exact:!0,path:"/career",component:_s}),c.a.createElement(H.a,{exact:!0,path:"/report",component:eo}),c.a.createElement(H.a,{exact:!0,path:"/business",component:ao}),c.a.createElement(H.a,{exact:!0,path:"/services",component:ro}),c.a.createElement(H.a,{exact:!0,path:"/archive",component:Ws}),c.a.createElement(H.a,{exact:!0,path:"/take-a-tour",component:Ys}),c.a.createElement(H.a,{path:"/login",component:Mn}),c.a.createElement(H.a,{path:"/register",component:Vn}),c.a.createElement(H.a,{path:"/forgot-password",component:Ds}),c.a.createElement(H.a,{path:"/class-work/:userSlug/:classId",component:xs}),c.a.createElement(H.a,{path:"/edit-blog/:id/:blogId",component:oc}),c.a.createElement(H.a,{path:"/create-blog/:id",component:oc}),c.a.createElement(H.a,{exact:!0,path:"/reset/:token",component:Ps}),c.a.createElement(H.a,{exact:!0,path:"/email-verification/:token",component:Ms}),c.a.createElement(H.a,{path:"/blog/:userSlug/:blogSlug",component:gc}),c.a.createElement(H.a,{path:"/user/:userId",component:nn}),c.a.createElement(H.a,{path:"/search/key=:searchKey",component:mn}),c.a.createElement(H.a,{path:"/:id",component:Ec}),c.a.createElement(H.a,{exact:!0,path:"/",component:kn})),e.user&&c.a.createElement(ya,null)))}}]),t}(c.a.Component),so=Object(p.b)(function(e){return e})(co),oo=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,{store:D},c.a.createElement(so,null))}}]),t}(r.Component);a(307),a(309),a(311),a(313),a(315);o.a.render(c.a.createElement(oo,null),document.getElementById("root"))},44:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(132)),r=u(a(133)),c=u(a(134)),s=u(a(135)),o=u(a(136)),i=u(a(137)),l=u(a(138));function u(e){return e&&e.__esModule?e:{default:e}}t.default={init:n.default,add:r.default,remove:c.default,update:s.default,map:i.default,all:o.default,get:l.default}},62:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAKeAAACngG20ANEAAAEU0lEQVR4nO1aO2zUWBT138/2jKALVBRAQ0JmgCw0QaKCAAVCCNGChEQRGgqkFAgUihUSsFXoKNBWu1okOgQdElAAIeMJCQWCgg4qEmZsv3n+oRtiacjOMJ/cZ08yc0p/zr33+P187xXjOBb6GVJfRz8QYCDAQICBAD3gQ6YYCNADPmSKvhdAycLowsLCDkWWT9dfC8Lw0cjIyOe0fUntKLz4/v05RunZMAjGgzAcqlH6y32dEEGR5a+yorzQCPlveM+ef9Pwi7sAi4uL49R1Z1zXLURR1NY7kiQJpmmWiWleHh4efsHTP64ClG17xnGcSZ+xrt5XNU2wLOteoVi8jO7cKrgJMDc7+6RSqRzD4Mrn80/3j41NYHCtBZddADN4AHABJxZfPdAFgGGPGXwC4ARubF7UKQAL3vLS0vNu53wrwJqwZevWw5gLI+oIgNWeV/AA4AYbmJxoAsA+D1sdFl8zgA2whcWHJkDNdS+0u8+vB2ADbGHxoQkQRtE4FleatlAEgCFJPc/C4GoHYAtrGqAIEPrBvjSGfwKwBTYxuFAEiKJgGwZPFjb7Ph8wEKAHfMgUKAKIolRNOwgsmygC6Lr+EYMnC5toP0NvXr2KXddF4WoF0zSFPw4dEjG40NYAWZZfYnGlaQtNAI0QLgkL3rZQ8wGzr19/cRxnCI2wASzL+jp28CDawQt1G9QJuQYZXV4AbrCBSY+eFMXOB9aDR3IU/XNphFwyDOMDNi9wAjc2L7oAUN4yc7mjmCIAF3DyKJ1xmbCJCPl8ft3bFXDwCh7AvTQ2X56/5bnOJKU018l7hJCqYVr3RgujU/y8S6k4CtXgMAiuBj6bqDF/Z7PMMaS9dU39pKjaE1lRbqdRLU69URJqB3EcHwl8tqv+uqJqH0VRfMa7GLoWfd8pyr1BApKXcRTtTr54GITFZs+KoliVZGnlL48Qww6jaHbDlcchYL9Gj0OgURQVKKVCtwlTWBNUVXVkSbJlRbEVVf0HWxAUAeq7PzzPG+KVIa5fJLHEWJcAsMX5rDbRSfcHFkAMoutPVU17uHd09H63tF0JAIGzGj3P+8+vHSTtNJquz3QjREcCvJufv8hqdKpadXYix7FugBCWZb3UDWOqk6nRlgBwkPEZu1utVM6kPdQ7haZpFdOy/m63r6ilAGXbPkEpvU89b3sG8XSNXC5X1g3jVKvT5G8FKM29ve55dJpn0wNPwP8EMYxzhWLxcTMzTQUozc093AhDvhVgShCD3Nm3/8DNRo82FIBnVicLwAKZy+duNBLhf/mAzRa8sFpOr1aq0zCl1977RQBeLW69gEQE2MobCmCXSle+Ly9PbsbgE/wUofIX/JIn11YEgAue605v9AWvHTDG8tR1HiSPrggAvXdwo5cdxwScZGGXA0rRLpVmlr5929RDvxFWO9FPSoyx873nHn/A4S7w/T8lIY5Ta2/rNUDCpu9bZBRN13vAjWyg6brwAzLER5MVJ3BoAAAAAElFTkSuQmCC"},75:function(e,t,a){"use strict";var n;function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.PKT_RPC_REQUEST=function(e,t,a,n){return JSON.stringify([c,e,t,a,n])},t.PKT_RPC_RESPONSE=function(e,t,a){return JSON.stringify([s,e,t,a])},t.PKT_EVENT=function(e,t){return JSON.stringify([o,e,t])},t.PKT_ACTION=function(e){return JSON.stringify([i,e])},t.PKT_SCOPE_REQUEST=function(e,t,a){return JSON.stringify([l,e,t,a])},t.PKT_SCOPE_RESPONSE=function(e,t,a){return JSON.stringify([u,e,t,a])},t.PKT_CALL=function(e,t,a){return JSON.stringify([d,e,t,a])},t.createParser=function(){var e={parse:function(t){try{var a=JSON.parse(t);if(!Array.isArray(a))throw new Error("Invalid message format");var n=(o=a,Array.isArray(o)?o:Array.from(o)),r=n[0],c=n.slice(1),s=m[r];if(!s)throw new Error("Unknown message type - "+r);if(!e[s])throw new Error("No parser defined for - "+s);try{e[s].apply(null,c)}catch(i){throw new Error("Error executing parser - "+s+" - "+i.message)}}catch(i){e.onError?e.onError(i):console.error("Error parsing message",i)}var o}};return e};var c=1,s=2,o=3,i=4,l=5,u=6,d=7,m=(r(n={},c,"onRpcRequest"),r(n,s,"onRpcResponse"),r(n,o,"onEvent"),r(n,i,"onAction"),r(n,l,"onScopeRequest"),r(n,u,"onScopeResponse"),r(n,d,"onCall"),n)}},[[123,2,1]]]);